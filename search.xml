<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Xcodeä»¿Cocoapodsè‡ªåŠ¨åŒ–é”å®šæ–‡ä»¶ï¼ˆlocked fileï¼‰]]></title>
    <url>%2F2018%2F09%2F28%2F201809280021%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šXcodeä»¿Cocoapodsè‡ªåŠ¨åŒ–é”å®šæ–‡ä»¶ï¼ˆlocked fileï¼‰ å‰è¨€æœ€è¿‘åœ¨åšè¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œæ‰“åŒ…é¡¹ç›®æ—¶è¯»å–æœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶çš„ä¸åŒå‘ˆç°ä¸åŒç‰ˆæœ¬æˆ–è€…æ¨¡å—ï¼Œå½“ç„¶å®é™…æ¯”ä»¥ä¸Šæè¿°æ›´å¤æ‚äº›ã€‚ç”±äºè½¯ä»¶çš„é€»è¾‘æ˜¯åŸºäºé…ç½®æ–‡ä»¶æ¥å¯åŠ¨è¿è¡Œçš„ï¼Œè¿™æ—¶æˆ‘ä»¬é¢ä¸´äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆé˜²æ­¢åŒä¼´è¯¯æ“ä½œé…ç½®æ–‡ä»¶ï¼Ÿ æ­£æ–‡å½“ç„¶ï¼Œè§£å†³è¿™ä¸€ç±»é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ–¹æ¡ˆï¼Œæ¯”å¦‚ï¼Œsvn/gité”å®šè¯¥æ–‡ä»¶ï¼›å†æ¯”å¦‚å°†é…ç½®æ–‡ä»¶ä½œä¸ºä¸€ä¸ªç§æœ‰podsï¼Œè®©podsæ¥å®ç°é”å®šåŠŸèƒ½ï¼›ä¾¿äºæ¯æ¬¡åŒä¼´è¯¯æ“ä½œæ—¶ä¼šæé†’ï¼› ä»¥ä¸Šçš„æ–¹å¼ä¹Ÿè¿˜ä¸é”™ï¼Œä½†æ€»è§‰å¾—å•°å—¦ï¼Œèƒ½ä¸èƒ½æˆ‘ä»¬è‡ªå·±åœ¨Xcodeä¸­é”å®šæ–‡ä»¶å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šå¯ä»¥ï¼ˆä¸è¿‡é”å®šæ–‡ä»¶å’ŒXcodeæ²¡å•¥å…³ç³»ï¼‰ï¼Œæ‰€è°“é”å®šï¼Œå…¶å®æ˜¯ä¿®æ”¹æ–‡ä»¶çš„è¯»å†™æƒé™ï¼Œå°†æ–‡ä»¶å˜ä¸ºåªè¯»ã€‚ä½ å¯ä»¥æ‰‹åŠ¨show in finderé‡Œï¼ŒæŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯ï¼Œä¿®æ”¹ä¸ºåªè¯»æˆ–è€…å‹¾é€‰é”å®šã€‚è¿™æ ·çš„æ‰‹åŠ¨æ“ä½œä¹‹åï¼Œåœ¨Xcodeç¼–è¾‘çš„ç¡®æœ‰äº†è§£é”æç¤ºï¼Œä½†è¿™æ ·ä¹Ÿåªèƒ½ç®—æ˜¯ç”»åœ°ä¸ºç‰¢ï¼Œå¯¹è‡ªå·±åªè¯»ï¼ŒåŒä¼´ä¾æ—§å¯ä»¥ä¿®æ”¹ã€‚ é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆè‡ªåŠ¨åŒ–é”å®šæ–‡ä»¶çš„æ–¹æ³•å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬åªéœ€åœ¨å·¥ç¨‹é¡¹ç›®ä¸­æ·»åŠ æ‰§è¡Œè„šæœ¬å³å¯ã€‚ å…·ä½“æ­¥éª¤ï¼Œé€‰æ‹©é¡¹ç›®targetï¼Œå•å‡»Build Phasesï¼Œå·¦ä¸Šè§’åŠ å¥½ï¼Œæ–°å»ºè¿è¡Œè„šæœ¬ï¼ŒNew Run Script Phaseé€‰é¡¹ï¼Œç„¶ååœ¨è„šæœ¬å¡«å†™å¦‚ä¸‹ï¼š 1234567891011121314# Type a script or drag a script file from your workspace to insert its path.# Aä¸ºçˆ¶æ–‡ä»¶å¤¹ï¼ŒBä¸ºå­æ–‡ä»¶å¤¹ï¼ŒC.fileã€D.fileä¸ºç›®æ ‡æ–‡ä»¶cd $&#123;SRCROOT&#125;/Apushd B echo &quot;A/Bç›®å½•æ£€ç´¢é…ç½®æ–‡ä»¶&quot; for f in * ; do # éå†æ–‡ä»¶ if [ &quot;$f&quot; == &quot;C.file&quot; ] || [ &quot;$f&quot; == &quot;D.file&quot; ]; then echo &quot;â¤ï¸: é”å®š $f æ–‡ä»¶ğŸ”&quot; chmod -R -w &quot;$f&quot; # åˆ é™¤æ–‡ä»¶çš„å†™æƒé™ fi donepopd#@author ä»ä¼¯å®‰ ä¹¦å†™å®Œæˆåï¼Œç¼–è¯‘é¡¹ç›®ï¼Œå³å¯è‡ªåŠ¨åŒ–é”å®šæ–‡ä»¶ã€‚ ç»“è¯­æˆ˜æˆ˜å…¢å…¢ï¼Œå¦‚å±¥è–„å†°ï¼Œæœ›å†æ¥å†å‰ï¼Œä»ä¼¯å®‰çš„GitHubï¼Œ ä»ä¼¯å®‰ä¸»é¡µï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œè¯·ä¸è¦åå•¬ç‚¹èµï¼ŒO(âˆ©_âˆ©)Oè°¢è°¢â€¦â€¦ æœ¬æ–‡å·²åœ¨ç‰ˆæƒå°å¤‡æ¡ˆï¼Œå¦‚éœ€è½¬è½½è¯·åœ¨ç‰ˆæƒå°è·å–æˆæƒã€‚è·å–ç‰ˆæƒ]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Xcode</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºJenkinså’Œfastlaneçš„iOSæŒç»­é›†æˆä¸å‘å¸ƒç¯å¢ƒæ­å»º]]></title>
    <url>%2F2018%2F06%2F29%2F201806292034%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šåŸºäºJenkinså’Œfastlaneçš„iOSæŒç»­é›†æˆä¸å‘å¸ƒç¯å¢ƒæ­å»º å‰è¨€Jenkinså®‰è£…Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºç›‘æ§æŒç»­é‡å¤çš„å·¥ä½œï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶çš„æŒç»­é›†æˆå˜æˆå¯èƒ½ã€‚ Jenkinsä¸‹è½½åœ°å€é€‰æ‹©Mac os Xä¸‹è½½å¥½ï¼Œä¸€æ­¥ä¸€æ­¥å®‰è£…å³å¯ã€‚ å®‰è£…æˆåŠŸåï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp://localhost:8080/ ï¼Œæ‰“å¼€jenkinsï¼›123http://localhost:8080/exit // é€€å‡ºJenkinshttp://localhost:8080/restart // é‡å¯Jenkinsï¼Œä¸€èˆ¬è£…äº†æ’ä»¶é‡å¯ä¸‹http://localhost:8080/reload // é‡æ–°åŠ è½½Jenkins æ‰¾åˆ°12345678910111213141516171819202122232425262728æˆ–è€…å¦‚ä¸‹å›¾ï¼Œæ‰§è¡Œ```sudo cat /Users/Shared/Jenkins/Home/secrets/initialAdminPassword```ï¼Œå°†è¾“å‡ºçš„å¯†ç æ‹·è´çº¸é¡µé¢å¯†ç åŒºåŸŸï¼›![è§£é”Jenkins-initialAdminPassword.png](https://upload-images.jianshu.io/upload_images/949086-67a99a991002c170.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![è§£é”Jenkins-å¯†ç æ‹·è´.png](https://upload-images.jianshu.io/upload_images/949086-cc407d5721a3b31a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![è‡ªå®šä¹‰å®‰è£….png](https://upload-images.jianshu.io/upload_images/949086-58f181439c951fe0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![ä¸‹ä¸€æ­¥å®‰è£….png](https://upload-images.jianshu.io/upload_images/949086-6c58047ee1187ad6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![åˆ›å»ºç®¡ç†å‘˜.png](https://upload-images.jianshu.io/upload_images/949086-99808012363b5841.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![instace config.png](https://upload-images.jianshu.io/upload_images/949086-86d1bac2519bdd53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![start jenkins.png](https://upload-images.jianshu.io/upload_images/949086-d69276d9a61a8cac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![å®‰è£…å®Œæˆ.png](https://upload-images.jianshu.io/upload_images/949086-7cacaec4f6dc40c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)#### æ’ä»¶å®‰è£…åœ¨ç³»ç»Ÿç®¡ç†--&gt;ç®¡ç†æ’ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹æ’ä»¶ï¼š![image.png](http://upload-images.jianshu.io/upload_images/949086-a2c63f505cbcd640.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)[Xcode integration](https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin)[Git plugin](http://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)[GitHub plugin](http://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin)[PostBuildScript Plugin](http://wiki.jenkins-ci.org/display/JENKINS/PostBuildScript+Plugin)æ³¨æ„ï¼šè®°å¾—å®‰è£…ç¯å¢ƒå˜é‡æ³¨å…¥æ’ä»¶ï¼Œç„¶ååœ¨é…ç½®å·¥ç¨‹æ—¶ï¼Œæ„å»º-&gt;å¢åŠ æ„å»ºæ­¥éª¤-&gt;å¼•å…¥å¦‚ä¸‹è·¯å¾„ï¼› PATH=$PATH:/usr/local/bin åŒ…æ‹¬podã€fastlaneã€gitç­‰shellçš„æ‰§è¡Œï¼Œéƒ½ä¾é è¿™ä¸ªè·¯å¾„1234567891011[Environment Injector Plugin](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin) // ç¯å¢ƒå˜é‡æ³¨å…¥![Inject environment variables.png](https://upload-images.jianshu.io/upload_images/949086-5c76f163b88f195b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![fastlaneæŒ‡ä»¤.png](https://upload-images.jianshu.io/upload_images/949086-c672aec0522f56de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)## fastlane å®‰è£…[fastlaneå·¥å…·](https://fastlane.tools)1ã€Xcode å‘½ä»¤è¡Œå®‰è£… xcode-select â€“install1234å¦‚æœè¾“å‡ºå¦‚ä¸‹ï¼Œè¡¨ç¤ºå·²ç»å®‰è£…![Xcode-select.png](https://upload-images.jianshu.io/upload_images/949086-f4b1521e56153c49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)2ã€fastlaneå®‰è£… sudo gem install fastlane // å®‰è£…fastlanefastlane -v // æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬1å¦‚æœæŠ¥é”™ ERROR: While executing gem â€¦ (Gem::FilePermissionError)You donâ€™t have write permissions for the /usr/bin directory.1è¯·ä½¿ç”¨ sudo gem install -n /usr/local/bin/ fastlane 12345678### æ–°å»ºItem![æ–°å»ºItem.png](http://upload-images.jianshu.io/upload_images/949086-07d2802cd1d66c63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![create Item.png](http://upload-images.jianshu.io/upload_images/949086-e4805bb6531af2ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![iOS_test.png](http://upload-images.jianshu.io/upload_images/949086-198b277ab1f8c9b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![workspace path.png](http://upload-images.jianshu.io/upload_images/949086-731fffffa4f7b81a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) /Users/developer/.jenkins/jobs/iOS_Test/workspace/é¡¹ç›®å·¥ç¨‹123456### Jenkinsé€šç”¨é…ç½®#### æ³¨æ„ç‚¹ï¼š1ã€Keychainsè·å–Jenkinså¯¹é’¥åŒ™ä¸²çš„è®¿é—®æƒé™ ~/Library/Keychains/login.keychain æˆ–è€…login.keychain-db122ã€Provisioning Profileså°†æè¿°æ–‡ä»¶æ‹·è´åˆ° ~/Library/MobileDevice/Provisioning Profiles/1å°†ä»¥ä¸Šæ–‡ä»¶åˆ†åˆ«æ‹·è´åˆ° /Users/Shared/Jenkins/Library/Keychains/ /Users/Shared/Jenkins/Library/MobileDevice/Provisioning Profiles/13ã€è¯ä¹¦æƒé™ é’¥åŒ™ä¸²-&gt; ç™»å½• -&gt; æˆ‘çš„è¯ä¹¦æ‰¾åˆ°å¯¹åº”è¯ä¹¦ï¼Œå±•å¼€-é€‰ä¸­ç§é’¥ï¼ŒåŒå‡»ï¼Œè®¿é—®æ§åˆ¶ï¼Œå…è®¸æ‰€æœ‰åº”ç”¨ç¨‹åºè®¿é—®æ­¤é¡¹ç›®ï¼Œå³ä¸‹è§’ï¼Œå­˜å‚¨æ›´æ”¹ã€‚123### fastlaneé…ç½®1ã€è¿›å…¥å·¥ç¨‹ä¸»ç›®å½• fastlane init12ã€æŸ¥çœ‹Appfileæ–‡ä»¶ app_identifier(â€œcom.XX.XXâ€) # The bundle identifier of your appapple_id(â€œrenboan@liyun.comâ€) # Your Apple email address For more information about the Appfile, see:https://docs.fastlane.tools/advanced/#appfile123ã€é…ç½®Fastfileæ–‡ä»¶ This file contains the fastlane.tools configurationYou can find the documentation at https://docs.fastlane.tools# For a list of all available actions, check out# https://docs.fastlane.tools/actions# For a list of all available plugins, check out# https://docs.fastlane.tools/plugins/available-plugins# Uncomment the line if you want fastlane to automatically update itselfupdate_fastlaneå¹³å°ï¼Œå®‰å“è¿˜æ˜¯iOSdefault_platform(:ios) iOSè¿›è¡Œçš„æ“ä½œplatform :ios dodesc â€œä¼ä¸šç‰ˆâ€ åœ¨æ‰§è¡Œlaneä¹‹å‰è¿›è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹å‰éƒ½æ‰§è¡Œä¸€æ¬¡pod install#before_all do faselaneä¸­pod installçš„æ“ä½œ#cocoapods #end æ‰“åŒ…çš„laneæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®å¤šä¸ªlaneæ¥æ‰“ä¸åŒç¯å¢ƒçš„åŒ…lane :enterprise do |op| æ‰“åŒ…ä¹‹å‰è·Ÿæ–°æŒ‡å®šé…ç½®çš„æè¿°æ–‡ä»¶update_project_provisioning( ä¹‹å‰æœ‰sighä¸‹è½½çš„æè¿°æ–‡ä»¶å­˜å‚¨è·¯å¾„profile:â€./XXXXDis.mobileprovisionâ€, æ‰“åŒ…é…ç½®ï¼ŒDebugï¼ŒReleasebuild_configuration:â€Debugâ€) automatic_code_signing( å·¥ç¨‹æ–‡ä»¶æ‰€åœ¨è·¯å¾„path:â€ProjectName.xcodeprojâ€, æ˜¯å¦ä½¿ç”¨è‡ªåŠ¨ç­¾åï¼Œè¿™é‡Œå¦‚æœæ˜¯æ‰“åŒ…çš„è¯åº”è¯¥ä¸€èˆ¬éƒ½ä¸ºfalseå§ï¼Œé»˜è®¤ä¹Ÿæ˜¯falseuse_automatic_signing:false, æ‰“åŒ…çš„team IDï¼Œ ä¹Ÿå°±æ˜¯æ‰“åŒ…ä½¿ç”¨çš„è¯ä¹¦ä¸­çš„team IDï¼Œè¿™ä¸ªå¦‚æœä¸çŸ¥é“æ˜¯ä»€ä¹ˆçš„è¯å¯ä»¥åœ¨xCodeä¸­è®¾ç½®å¥½ç­¾åç”¨çš„æè¿°æ–‡ä»¶ååˆ°xcodeprojä¸‹çš„pbxprojæ–‡ä»¶ä¸­æœç´¢â€œDEVELOPMENT_TEAMâ€ï¼Œå®ƒçš„å€¼å°±æ˜¯äº†team_id:â€XXXXâ€, è¿™ä¸ªå°±ä¸ç”¨è¯´äº†ï¼Œéœ€è¦ä¿®æ”¹çš„targetstargets:â€ProjectNameâ€, ç”¨å“ªç§æ–¹å¼æ‰“åŒ…â€œiPhone Developâ€è¿˜æ˜¯â€œiPhone Distributionâ€code_sign_identity:â€iPhone Distributionâ€, æè¿°æ–‡ä»¶åç§°ï¼Œ ä¹Ÿå°±æ˜¯ä½¿ç”¨å“ªä¸ªæè¿°æ–‡ä»¶æ‰“åŒ…profile_name:â€XXXXDisâ€) currentTime = Time.new.strftime(â€œ%Y-%m-%d-%H-%Mâ€)outputDirectory = â€œ./build/#{currentTime}â€logDirectory = â€œ#{outputDirectory}/fastlanelogâ€ gym( æ‰“åŒ…æ–¹å¼ï¼Œenterprise, adhoc,appstore,developmentexport_method: â€œenterpriseâ€,scheme: â€œProjectNameâ€, pod ç”Ÿæˆçš„workspaceæ–‡ä»¶workspace:â€ProjectName.xcworkspaceâ€, è¾“å‡ºæ–‡ä»¶å¤¹output_directory: outputDirectory, è¾“å‡ºåŒ…åç§°output_name:â€ProjectName.ipaâ€, æ‰“åŒ…å‰æ˜¯å¦cleanclean:true,silent:true, æ‰“åŒ…çš„é…ç½® Debug Releaseconfiguration:â€Debugâ€, æ‰“åŒ…æ—¥å¿—è¾“å‡ºæ–‡ä»¶å¤¹buildlog_path:logDirectory, æ‰“åŒ…è¯ä¹¦codesigning_identity:â€™iPhone Distribution: XXXXXXXXXXXX TECHNOLOGY CO.,LTD.â€™, Xcode 9 é»˜è®¤ä¸å…è®¸è®¿é—®é’¥åŒ™ä¸²çš„å†…å®¹,å¿…é¡»è¦è®¾ç½®æ­¤é¡¹æ‰å¯ä»¥ï¼Œè¿è¡Œè¿‡ç¨‹å¯èƒ½ä¼šæç¤ºæ˜¯å¦å…è®¸è®¿é—®é’¥åŒ™ä¸²ï¼Œéœ€è¦è¾“å…¥ç”µè„‘å¯†ç export_xcargs: â€œ-allowProvisioningUpdatesâ€, å¯¼å‡ºé€‰é¡¹export_options:{ æ‰“åŒ…å¯¼å‡ºæ—¶å¯é€‰æè¿°æ–‡ä»¶ â€œbundleIDâ€=&gt;â€æè¿°æ–‡ä»¶åç§°â€provisioningProfiles: {â€œcom.XXXX.XXXXâ€ =&gt; â€œXXXXDis.mobileprovisionâ€,},})archive_path=â€Published succeed:/XXXXXXXXXXXX/build/#{currentTime}/ProjectName.ipaâ€puts â€œ#{archive_path}â€end å½“laneæ‰§è¡Œå®Œæˆä¹‹åè¿›è¡Œå“ªäº›æ“ä½œafter_all do |lane| end error do |lane, exception|end end 124ã€å‘½ä»¤è¡Œæ‰§è¡Œæ‰“åŒ… fastlane ios enterprise1234### Jenkinsé…ç½®##### 1ã€shellè¯­å¥ export LANG=â€en_US.UTF-8â€pwdcd $WORKSPACE/ProjectName fastlane ios enterprise123##### 2ã€Set build description![Set build description.png](https://upload-images.jianshu.io/upload_images/949086-7a7ac164fd367fb3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) Published succeed:(.*) å•å‡»ipaåŒ…ä¸‹è½½1Regular expressionï¼šPublished succeed:(.*) // è¿™é‡Œè¿™æ ·å†™ï¼Œæ˜¯å› ä¸ºfastlaneæ–‡ä»¶ä¸­è¾“å‡ºäº†ä»¥Published succeed:ä¸ºå‰ç¼€çš„ä¸€ä¸ªåœ°å€ï¼› archive_path=â€Published succeed:/XXXXXXXXXXXX/build/#{currentTime}/ProjectName.ipaâ€puts â€œ#{archive_path}â€12345678910111213141516Descriptionï¼šæ„å»ºåçš„æè¿°ä¸­çš„```\1```çš„æ„æ€æ˜¯è·å–æ­£åˆ™è¡¨è¾¾å¼è·å–çš„å†…å®¹ã€‚##### 3ã€é‚®ä»¶é€šçŸ¥é¦–å…ˆå°†ç³»ç»Ÿç®¡ç†å‘˜é‚®ç®±ï¼ˆä½ ç”¨æ¥å‘é‚®ä»¶çš„é‚®ç®±ï¼‰smtpæœåŠ¡æ‰“å¼€ï¼Œæ‹¿126é‚®ç®±ä¸¾ä¾‹ï¼Œæ‰“å¼€é‚®ç®±ï¼Œè¿›å…¥è®¾ç½®ï¼Œè¿›å…¥POP3/SMTP/IMAPè®¾ç½®ï¼Œæ‰“å¼€å¦‚ä¸‹å›¾å‡ ä¸ªé€‰é¡¹ã€‚![image.png](https://upload-images.jianshu.io/upload_images/949086-af0ed2f213f7c230.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)ç„¶åï¼Œåœ¨Jenkinsï¼Œæ·»åŠ ç³»ç»Ÿç®¡ç†å‘˜é‚®ç®±åŠSMTPæœåŠ¡å™¨ï¼Œå…·ä½“æ­¥éª¤æ˜¯ï¼Œè¿›å…¥Jenkinsçš„ç³»ç»Ÿç®¡ç†--&gt;ç³»ç»Ÿè®¾ç½®ï¼Œæ‰¾åˆ°Jenkins Locationï¼Œå¡«å†™ç³»ç»Ÿç®¡ç†å‘˜é‚®ä»¶åœ°å€ï¼›![image.png](https://upload-images.jianshu.io/upload_images/949086-25c47d155c2ead19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æ·»åŠ SMTPæœåŠ¡å™¨åœ°å€ï¼Œ126é‚®ç®±çš„æ˜¯smtp.126.comï¼Œå¡«å†™ç®¡ç†å‘˜é‚®ç®±åŠå¯†ç ã€‚![image.png](https://upload-images.jianshu.io/upload_images/949086-972342ab6dad517d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æœ€åï¼Œåœ¨é¡¹ç›®é…ç½®ä¸­ï¼Œæ„å»ºåæ“ä½œé¡¹ï¼Œæ·»åŠ æ”¶å–é‚®ä»¶çš„é‚®ç®±ï¼Œå¤šä¸ªé‚®ç®±ç”¨ç©ºæ ¼éš”å¼€ã€‚![image.png](https://upload-images.jianshu.io/upload_images/949086-838b145fcc58e12a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)è®¾ç½®å®Œæˆåï¼Œåœ¨æ„å»ºå†å²åŒºåŸŸå¯ä»¥ç›´æ¥ä¸‹è½½æ‰“åŒ…çš„ipaåŒ…ã€‚![image.png](https://upload-images.jianshu.io/upload_images/949086-aa38f2a70ea40cfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)- Jenkinså¯åŠ¨ sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist1- åœæ­¢è¿è¡ŒJenkins sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist1234- æ‰¾å›å¯†ç æ‰¾åˆ°config.xmlæ–‡ä»¶ /Users/Shared/Jenkins/Home/users/admin/config.xml1æ–‡ä»¶ä¸­æ‰¾åˆ°ï¼ŒfullNameä¸ºç”¨æˆ·åï¼š```admin```ï¼ŒpasswordHashä¸ºåŠ å¯†çš„å¯†ç ï¼š```111111 12&lt;fullName&gt;admin&lt;/fullName&gt;&lt;passwordHash&gt;#jbcrypt:$2a$10$DdaWzN64JgUtLdvxWIflcuQu2fgrrMSAMabF5TSrGK5nXitqK9ZMS&lt;/passwordHash&gt; æœ¬æ–‡å·²åœ¨ç‰ˆæƒå°å¤‡æ¡ˆï¼Œå¦‚éœ€è½¬è½½è¯·åœ¨ç‰ˆæƒå°è·å–æˆæƒã€‚è·å–ç‰ˆæƒ]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>åšå®¢</tag>
        <tag>Jenkins</tag>
        <tag>fastlane</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢æ¡†æ¶ä¸‹Gitmentå–ä»£å¤šè¯´è¯„è®º]]></title>
    <url>%2F2017%2F06%2F29%2F201706292034%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šHexoåšå®¢æ¡†æ¶ä¸‹Gitmentå–ä»£å¤šè¯´è¯„è®º å‰è¨€ä»¥å¾€çš„å„¿ç«¥èŠ‚éƒ½ä¼šç»™å„¿å­è¯´ï¼šâ€œäº²çˆ±çš„å„¿å­ï¼Œä¸å¥½æ„æ€ï¼Œä»Šå¹´ä½ çˆ¹åˆæ²¡è¿½åˆ°ä½ å¨˜ï¼Œä½ å†ç­‰ç­‰å§ï¼Œæå‰ç¥ä½ å…­ä¸€å¿«ä¹â€ã€‚ä»Šå¹´å…­ä¸€ç•¥æ˜¾ä¸åŒï¼Œå¤šè¯´æ­£å¼å…³é—­æœåŠ¡ï¼Œå¿ƒå¡ã€‚æ›¾ä¹Ÿæƒ³è½¬å›Disqusï¼Œä¹Ÿå°è¯•æ³¨å†Œäº†ç•…è¨€(å¥ˆä½•è¦å¤‡æ¡ˆç½‘ç«™)ï¼Œæœ€ç»ˆç§ç§åŸå› ä¸å¾—ä¸æ”¾å¼ƒäº†ã€‚è¿‘æœŸï¼Œä¸ç»æ„é—´çœ‹åˆ°äº†ï¼Œimsunå®ç°çš„ä¸€æ¬¾åŸºäº GitHub Issues çš„è¯„è®ºç³»ç»ŸGitmentï¼Œä½œä¸ºèœé¸Ÿçš„æˆ‘çœ‹åˆ°åï¼Œè¿˜æ˜¯è›®ä½©æœçš„ã€‚ GitHubæˆæƒæ¥å…¥Gitmentæ˜¯ä½¿ç”¨çš„GitHub Issuesä½œä¸ºè¯„è®ºç³»ç»Ÿï¼Œåœ¨æ¥å…¥Gitmentå‰ï¼Œéœ€è¦è·å¾—GitHubçš„æˆæƒï¼Œè·å¾—ç›¸åº”çš„å®¢æˆ·ç«¯idå’Œå®¢æˆ·ç«¯ç§é’¥ï¼Œä»¥å¤‡ç«™ç‚¹ä½¿ç”¨ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šOAuth applicationæ³¨å†Œæ¥å…¥ Hexoæ¡†æ¶Nextä¸»é¢˜ä¸‹æ·»åŠ Gitmentå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Hexoæ¡†æ¶çš„Nextä¸»é¢˜åšå®¢ï¼Œæƒ³è¦æ·»åŠ Gitmentçš„æ—¶å€™ï¼Œè®°å¾—å°†è‡ªå·±çš„Nextä¸»é¢˜æ›´æ–°ä¸‹ç‰ˆæœ¬ï¼Œå¼€å§‹æœ¬äººä½¿ç”¨çš„æ˜¯version 5.1.0çš„ï¼Œé…ç½®åï¼Œä¼šé‡åˆ°æ¯æ¬¡æ‰“å¼€æ–‡ç« ï¼Œéƒ½éœ€è¦é‡æ–°ç‚¹å‡»Initialize commentsçš„æƒ…å†µï¼Œä»¥å¾€è¯„è®ºå†å²æ•°æ®è·å–ä¹Ÿæœ‰é—®é¢˜ã€‚é‰´äºæ­¤ï¼Œæˆ‘æ›´æ–°äº†Nextä¸»é¢˜ï¼ˆå½“å‰ä¸ºversion 5.1.1ï¼‰ï¼Œç°åœ¨ä½¿ç”¨æ­£å¸¸ï¼Œå¤§å®¶å¯å…ˆæ¥æœ¬äººåšå®¢çœ‹çœ‹æ•ˆæœï¼šä»ä¼¯å®‰GitHubä¸»é¡µï¼Œï¼ˆé¦–å…ˆå¾—è°¢è°¢DotaWang11åŒå­¦çš„æ”¯æŒè¯„è®ºO(âˆ©_âˆ©)O~ï¼‰ï¼Œå¦‚æœæ‚¨ä»äº‹iOSå·¥ä½œï¼Œè¿˜è¯·åœ¨ä»ä¼¯å®‰çš„GitHubç»™ä¸ªStarã€‚ Nextä¸»é¢˜ä¸‹Gitmenté…ç½® å¼•è‡ªï¼šGitment - ä½¿ç”¨ GitHub Issues æ­å»ºè¯„è®ºç³»ç»Ÿ123456789101112131415&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;https://imsun.github.io/gitment/style/default.css&quot;&gt;&lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var gitment = new Gitment(&#123; id: &apos;é¡µé¢ ID&apos;, // å¯é€‰ã€‚é»˜è®¤ä¸º location.href owner: &apos;ä½ çš„ GitHub ID&apos;, // å¯ä»¥æ˜¯ä½ çš„GitHubç”¨æˆ·åï¼Œä¹Ÿå¯ä»¥æ˜¯github id repo: &apos;å­˜å‚¨è¯„è®ºçš„ github repo&apos;, oauth: &#123; client_id: &apos;ä½ çš„ client id&apos;, client_secret: &apos;ä½ çš„ client secret&apos;, &#125;, &#125;) gitment.render(&apos;container&apos;)&lt;/script&gt; åœ¨é…ç½®ownerçš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttps://api.github.com/users/GitHubç”¨æˆ·åï¼Œæ¥è·å–å¯¹åº”æ•°æ®idã€‚ å¼•å…¥Gitmentéœ€è¦å°†ä»¥ä¸Šå¼•æ–‡ä»£ç å†™å…¥å¯¹åº”çš„é¡µé¢å³å¯ï¼Œåœ¨Hexoæ¡†æ¶çš„Nextä¸»é¢˜ä¸­é…ç½®Gitmentçš„æ­¥éª¤å¦‚ä¸‹ï¼š ä¸»é¢˜æ–‡ä»¶config.ymlé…ç½®åœ¨ä¸»é¢˜ä¸‹themes/next/_config.ymlæ–‡ä»¶ä¸­æ·»åŠ ï¼š123456789# Gitment # Introduction: https://imsun.net/posts/gitment-introduction/gitment: enable: true githubID: zonghongyan repo: zonghongyan.github.io ClientID: ------ ClientSecret: ------ lazy: false å…¶ä¸­lazyçš„å«ä¹‰ï¼Œæ˜¯å¦æ‡’åŠ è½½ç›¸åº”è¯„è®ºæ¡†ï¼Œå¦‚æœä¸ºtrueï¼Œæ–‡ç« åº•éƒ¨è¯„è®ºæ˜¯æ”¶èµ·çŠ¶æ€ï¼Œæç¤ºæ˜¾ç¤º Gitment è¯„è®ºæŒ‰é’®ï¼Œå•å‡»å±•å¼€è¯„è®ºæ¡†ã€‚ æ‡’åŠ è½½æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—è®¾ç½®ï¼š åœ¨ä¸»é¢˜ä¸‹languages/en.ymlæ–‡ä»¶ä¸­æ·»åŠ ï¼š 1gitmentbutton: Show comments from Gitment åœ¨ä¸»é¢˜ä¸‹languages/zh-Hans.ymlæ–‡ä»¶ä¸­æ·»åŠ ï¼š1gitmentbutton: æ˜¾ç¤º Gitment è¯„è®º åœ¨ä¸»é¢˜ä¸‹languages/zh-hk.ymlæ–‡ä»¶ä¸­æ·»åŠ ï¼š1gitmentbutton: é¡¯ç¤º Gitment è©•è«– åœ¨ä¸»é¢˜ä¸‹languages/zh-tw.ymlæ–‡ä»¶ä¸­æ·»åŠ ï¼š1gitmentbutton: é¡¯ç¤º Gitment è©•è«– æ‡’åŠ è½½æŒ‰é’®divåŠäº‹ä»¶é…ç½® åœ¨ä¸»é¢˜ä¸‹layout/_partials/comments.swigæ–‡ä»¶ä¸­æ·»åŠ ï¼š 12345678910111213 &lt;div id=&quot;lv-container&quot; data-id=&quot;city&quot; data-uid=&quot;&#123;&#123; theme.livere_uid &#125;&#125;&quot;&gt;&lt;/div&gt; &#123;% elseif theme.changyan.appid and theme.changyan.appkey %&#125; &lt;div id=&quot;SOHUCS&quot;&gt;&lt;/div&gt; &#123;% elseif theme.gitment.enable %&#125; &#123;% if theme.gitment.lazy %&#125; &lt;div onclick=&quot;ShowGitment()&quot; id=&quot;gitment-display-button&quot;&gt;&#123;&#123; __(&apos;gitmentbutton&apos;) &#125;&#125;&lt;/div&gt; &lt;div id=&quot;gitment-container&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt; &#123;% else %&#125; &lt;div id=&quot;gitment-container&quot;&gt;&lt;/div&gt; &#123;% endif %&#125; &#123;% endif %&#125; &lt;/div&gt;&#123;% endif %&#125; å¯¹åº”é¡µé¢ç”ŸæˆJSä»£ç é…ç½®åœ¨ä¸»é¢˜ä¸‹layout/_third-party/comments/ç›®å½•ä¸‹ä¸­æ·»åŠ æ–‡ä»¶gitment.swigï¼š12345678910111213141516171819202122232425262728293031323334353637&#123;% if theme.gitment.enable %&#125; &#123;% set owner = theme.gitment.githubID %&#125; &#123;% set repo = theme.gitment.repo %&#125; &#123;% set cid = theme.gitment.ClientID %&#125; &#123;% set cs = theme.gitment.ClientSecret %&#125; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://imsun.github.io/gitment/style/default.css&quot;&gt; &lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&gt;&lt;/script&gt; &#123;% if not theme.gitment.lazy %&#125; &lt;script type=&quot;text/javascript&quot;&gt; var gitment = new Gitment(&#123; id: document.location.href, owner: &apos;&#123;&#123;owner&#125;&#125;&apos;, repo: &apos;&#123;&#123;repo&#125;&#125;&apos;, oauth: &#123; client_id: &apos;&#123;&#123;cid&#125;&#125;&apos;, client_secret: &apos;&#123;&#123;cs&#125;&#125;&apos;, &#125;&#125;); gitment.render(&apos;gitment-container&apos;); &lt;/script&gt; &#123;% else %&#125; &lt;script type=&quot;text/javascript&quot;&gt; function ShowGitment()&#123; document.getElementById(&quot;gitment-display-button&quot;).style.display = &quot;none&quot;; document.getElementById(&quot;gitment-container&quot;).style.display = &quot;block&quot;; var gitment = new Gitment(&#123; id: document.location.href, owner: &apos;&#123;&#123;owner&#125;&#125;&apos;, repo: &apos;&#123;&#123;repo&#125;&#125;&apos;, oauth: &#123; client_id: &apos;&#123;&#123;cid&#125;&#125;&apos;, client_secret: &apos;&#123;&#123;cs&#125;&#125;&apos;, &#125;&#125;); gitment.render(&apos;gitment-container&apos;); &#125; &lt;/script&gt; &#123;% endif %&#125; &#123;% endif %&#125; æ·»åŠ gitment.swigæ–‡ä»¶åï¼Œåœ¨ä¸»é¢˜ä¸‹layout/_third-party/comments/index.swigæ–‡ä»¶ä¸­å¼•å…¥gitment.swigæ–‡ä»¶ï¼š 1&#123;% include &apos;gitment.swig&apos; %&#125; è®¾ç½®CSSæ ·å¼åœ¨ä¸»é¢˜ä¸‹source/css/_common/components/third-party/ç›®å½•ä¸‹æ·»åŠ gitment.stylæ–‡ä»¶ï¼Œè®¾ç½®buttonçš„æ ·å¼ï¼š 12345678910111213#gitment-display-button&#123; display: inline-block; padding: 0 15px; color: #0a9caf; cursor: pointer; font-size: 14px; border: 1px solid #0a9caf; border-radius: 4px; &#125; #gitment-display-button:hover&#123; color: #fff; background: #0a9caf; &#125; ä¹‹åï¼Œåœ¨ä¸»é¢˜ä¸‹ source/css/_common/components/third-party/third-party.stylæ–‡ä»¶ä¸­å¼•å…¥ç›¸åº”çš„CSSæ ·å¼å³å¯ 1@import &quot;gitment&quot;; è¯¦è§ï¼šAdd Gitment Supportæ–‡æœ‰ä¸å½“ä¹‹å¤„è¿˜è¯·è§è°…ï¼ï¼ï¼ å¸¸è§é—®é¢˜ï¼š é…ç½®ä¸»é¢˜æ–‡ä»¶_config.ymlæ—¶ï¼Œæ ¼å¼é”™è¯¯ï¼Œæ¯”å¦‚gitmentå‰æœ‰ç©ºæ ¼ä¹Ÿä¼šé€ æˆä»£ç ç”Ÿæˆé—®é¢˜ï¼› Error: Not Foundé—®é¢˜ï¼Œrepoåº“å¡«å†™é—®é¢˜ï¼Œè¯¦è§gitment issues 18ï¼› å…¶ä»–é—®é¢˜ï¼Œå‚è§ä½œè€…é¡¹ç›®çš„Issue ä½œè€…æé†’ä½¿ç”¨æœ¬é¡¹ç›®çš„ç”¨æˆ·ï¼Œè¯·ä¿æŒå…‹åˆ¶ï¼Œåˆ‡å‹¿æ»¥ç”¨ã€‚è¯¦è§ Gitmentï¼šä½¿ç”¨ GitHub Issues æ­å»ºè¯„è®ºç³»ç»Ÿ å‚è€ƒï¼š [1]. ä½¿ç”¨ GitHub Issues æ­å»ºè¯„è®ºç³»ç»Ÿ [2]. imsun-gitment [3]. Add Gitment Support æœ¬æ–‡å·²åœ¨ç‰ˆæƒå°å¤‡æ¡ˆï¼Œå¦‚éœ€è½¬è½½è¯·åœ¨ç‰ˆæƒå°è·å–æˆæƒã€‚è·å–ç‰ˆæƒ]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>åšå®¢</tag>
        <tag>Hexo</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xcode9ä¸‹iOS11é€‚é…æ³¨æ„äº‹é¡¹åŠæ— çº¿éƒ¨ç½²è°ƒè¯•]]></title>
    <url>%2F2017%2F06%2F16%2F201706161952%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šXcode9ä¸‹iOS11é€‚é…æ³¨æ„äº‹é¡¹åŠæ— çº¿éƒ¨ç½²è°ƒè¯• å‰è¨€çœ‹ç€ç½‘ç»œä¸Šé“ºå¤©ç›–åœ°çš„iOS11çš„æ¶ˆæ¯ï¼Œä½œä¸ºä¸€æšiOSä»ä¸šè€…è°åˆä¼šæ— åŠ¨äºè¡·å‘¢ï¼å¸¦ç€è¿™ä»½å¥½å¥‡ï¼Œå‡çº§äº†macOSåˆ°10.12.4ï¼Œä¸‹è½½å®‰è£…äº†Xcode9.0 Betaã€‚ å•ä»è¿™å‡ å¤©ä½“éªŒæ¥è®²ï¼ŒXcode9ä¸æ„§ä¸ºä¸€ç¯‡ä½³ä½œï¼Œä»£ç é¢„è§ˆã€ç¼–è¯‘é€Ÿåº¦ç­‰éƒ½æœ‰è¾ƒå¤§æå‡ï¼Œæœ€è®©äººçœ¼å‰ä¸€äº®çš„è«è¿‡äºXcode9å°†ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿç‹¬ç«‹å‡ºæ¥äº†ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨åŒä¸€å±€åŸŸç½‘ä¸‹æ”¯æŒæ— çº¿éƒ¨ç½²è°ƒè¯•ã€‚è¯´çœŸå¿ƒè¯ï¼Œå¦‚æœä¸æ˜¯æ€•ä¸Šçº¿é¡¹ç›®å‡ºé—®é¢˜ï¼ŒçœŸå¿ƒä¸æƒ³åˆ‡åˆ°Xcode8æ¥å¼€å‘ã€‚ Xcode9ä¸‹ç›¸å†Œç­‰è®¿é—®æƒé™é—®é¢˜ä¹‹å‰é¡¹ç›®ä¸­ç›¸æœºåŠŸèƒ½ä¸€ç›´ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„PickerViewï¼Œè¯´å®è¯ä¸ç”šç¾è§‚ï¼Œè‡ªå·±ç©ºé—²ä¹‹ä½™ä¸€ç›´ç€æ‰‹å¼€å‘è‡ªå®šä¹‰ç›¸æœºï¼ˆEVNCameraï¼šç»™ä¸ªStarO(âˆ©_âˆ©)O~ï¼‰ã€‚åœ¨Xcode9çš„é¦–ä¸ªBetaç‰ˆæœ¬ä¸­å¼€å‘ç›¸æœºåŠŸèƒ½æ—¶å‘ç°ï¼ŒåŸæœ‰é¡¹ç›®ç«Ÿç„¶crashï¼Œåæ¥å‘ç°iOS11ä¸‹ï¼Œè‹¹æœå¯¹ç›¸å†Œçš„æƒé™keyåšäº†è°ƒæ•´ï¼ŒåŸæ¥çš„ NSPhotoLibraryUsageDescription ï¼Œåœ¨iOS11ä¹‹åï¼Œæ”¹æˆäº†NSPhotoLibraryAddUsageDescriptionã€‚è¯¦è§ï¼šCocoa Keys âœ¨ï¼šä¸è¿‡æœ‰ç«¥é‹åé¦ˆä½¿ç”¨Xcode 9 Beta3ä¸­æ‰“åŒ…åº”ç”¨ï¼Œä½¿ç”¨åŸæœ‰ç›¸å†Œæƒé™NSPhotoLibraryUsageDescriptionä¾æ—§æ­£å¸¸ï¼Œæœ¬äººå°è¯•Xcode 9 Beta4ä¸­æ‰“åŒ…ï¼Œä½¿ç”¨åŸæ¥ç›¸å†Œæƒé™çš„keyä¾æ—§crashã€‚ è¿‘åœºé€šè®¯NFCæƒé™åœ¨iOS11ä¸­ï¼Œè‹¹æœå¼€æ”¾äº†NFC(Near field communication)ï¼Œæ€•ä¹Ÿæ˜¯å…¶æ¨å¹¿ApplePayçš„ä¸€ç§ç­–ç•¥ã€‚åœ¨ä½¿ç”¨è¿‘åœºé€šè®¯æ—¶ï¼Œé¦–å…ˆä¹Ÿè¦åœ¨info.plisté…ç½®NFCReaderUsageDescription æƒé™ï¼Œæ¡ˆä¾‹æ­¥éª¤ï¼Œå¦‚ä¸‹ï¼š iOS 11 Core NFC - any sample code? å¯¼èˆªæ TitileViewçš„å®½åº¦è®¾ç½®åœ¨å¯¼èˆªtitleViewä½¿ç”¨SearchBarå®½åº¦é€‚é…é—®é¢˜ï¼Ÿå¦‚æœæ‚¨åœ¨Navigationä¸Šçš„titleViewä¸Šæ·»åŠ searchBarï¼ŒiOS11æƒ…å†µä¸‹å¯èƒ½æœ‰é—®é¢˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ–¹æ¡ˆä¸€:iOS 11 SearchBar in NavigationBar æ–¹æ¡ˆäºŒï¼šé‡è®¾titleViewçš„çº¦æŸ1234567891011121314151617181920212223242526272829#import &lt;UIKit/UIKit.h&gt;@interface EVNUILayoutView : UIView- (instancetype)initWithFrame:(CGRect)frame;@end#import &quot;EVNUILayoutView.h&quot;@implementation EVNUILayoutView- (instancetype)initWithFrame:(CGRect)frame&#123; self = [super initWithFrame:frame]; if (self) &#123; &#125; return self;&#125;/** * æ’‘å¼€viewçš„å¸ƒå±€ @return CGSize */- (CGSize)intrinsicContentSize&#123; return UILayoutFittingExpandedSize;&#125;@end // æœ‰æœ‹å‹è®²ï¼Œäº‹ä»¶è§¦å‘æœ‰é—®é¢˜ï¼Œæ­¤å¤„è¦æ„Ÿè°¢èŒƒå­Ÿç«¥é‹123456789101112131415161718192021222324252627282930313233343536// é‡è®¾çº¦æŸ- (void)resetSearchBar&#123; CGFloat leftButtonWidth = 35, rightButtonWidth = 75; // left padding right padding EVNUILayoutView *container = [[EVNUILayoutView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width - leftButtonWidth - rightButtonWidth, 44)]; self.searchBar.translatesAutoresizingMaskIntoConstraints = NO; [container addSubview:self.searchBar]; CGFloat offset = (rightButtonWidth - leftButtonWidth) / 2; // ç»™searchBaræ·»åŠ çº¦æŸ if (@available(iOS 11.0, *)) &#123; // ç»™searchBaræ·»åŠ çº¦æŸ [NSLayoutConstraint activateConstraints:@[ [self.searchBar.topAnchor constraintEqualToAnchor:container.topAnchor], // é¡¶éƒ¨çº¦æŸ [self.searchBar.leftAnchor constraintEqualToAnchor:container.leftAnchor constant:10*ScreenScaleX], // å·¦è¾¹è·çº¦æŸ [self.searchBar.rightAnchor constraintEqualToAnchor:container.rightAnchor constant:-10*ScreenScaleX], // å³è¾¹è·çº¦æŸ [self.searchBar.bottomAnchor constraintEqualToAnchor:container.bottomAnchor], // åº•éƒ¨çº¦æŸ [self.searchBar.heightAnchor constraintEqualToAnchor:container.heightAnchor], ]]; &#125; else &#123; // ç»™searchBaræ·»åŠ çº¦æŸ [NSLayoutConstraint activateConstraints:@[ [self.searchBar.topAnchor constraintEqualToAnchor:container.topAnchor], // é¡¶éƒ¨çº¦æŸ [self.searchBar.leftAnchor constraintEqualToAnchor:container.leftAnchor constant:-25*ScreenScaleX], // å·¦è¾¹è·çº¦æŸ [self.searchBar.rightAnchor constraintEqualToAnchor:container.rightAnchor constant:0], // å³è¾¹è·çº¦æŸ [self.searchBar.bottomAnchor constraintEqualToAnchor:container.bottomAnchor], // åº•éƒ¨çº¦æŸ [self.searchBar.centerXAnchor constraintEqualToAnchor:container.centerXAnchor constant:-offset], // æ¨ªå‘ä¸­å¿ƒçº¦æŸ // [self.searchBar.widthAnchor constraintEqualToAnchor:container.widthAnchor constant:width] // å®½åº¦çº¦æŸ ]]; &#125; self.navigationItem.titleView = container; // é¡¶éƒ¨å¯¼èˆªæœç´¢&#125; âœ¨âœ¨ï¼šå¦‚æœä½¿ç”¨Xcode9æ‰“åŒ…çš„å…ˆæš‚æ—¶ä½¿ç”¨è‡ªå®šä¹‰çš„searchBarå§ï¼Œå¯ä»¥å‚è€ƒé„™äººçš„Demoï¼šEVNCustomSearchBarï¼ŒåæœŸé€‚é…iPhoneXå¾…ç»­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ ScrollViewç›¸å…³æ§ä»¶åç§»é—®é¢˜ScrollViewç›¸å…³æ§ä»¶ï¼Œæ¯”å¦‚tableviewã€webViewã€collectionViewç­‰æ§ä»¶é¡¶éƒ¨ä¼šæœ‰ä¸€å®šè·ç¦»çš„åç§»ã€‚ 12345678 if (@available(iOS 11.0, *)) &#123; self.hostWebView.scrollView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;&#125; else&#123; self.automaticallyAdjustsScrollViewInsets = NO;&#125; å…¶ä½™æ³¨æ„äº‹é¡¹æš‚æœªå‘ç°ï¼Œå¤§å®¶å¦‚æœ‰å…¶å®ƒçš„å‘ç°ï¼Œè¿˜è¯·åœ¨ç•™è¨€åŒºæé†’ï¼Œè°¢è°¢ï¼Œå¾…ç»­â€¦â€¦ æ— çº¿éƒ¨ç½²è°ƒè¯•ä»Xcode9æ”¯æŒæ— çº¿éƒ¨ç½²è°ƒè¯•æ¥çœ‹ï¼Œåƒå‘¼ä¸‡å”¤çš„iPhone8æ”¯æŒæ— çº¿å……ç”µå‡ ä¹æ˜¯å¿…ç„¶ã€‚ä¸‹é¢ç®€å•æ¢³ç†ä¸‹æ— çº¿è°ƒè¯•çš„æ­¥éª¤ï¼š1ã€ç¬¬ä¸€æ¬¡éƒ¨ç½²è°ƒè¯•è¿˜æ˜¯éœ€è¦è¿çº¿ï¼Œè¿æ¥å¥½ä¹‹åï¼Œé€‰æ‹©Window-&gt;Devices and Simulatorsï¼Œæˆ–è€…ç›´æ¥å¿«æ·é”®shift+command+2ï¼› 2ã€ä¿è¯macä¸æ‰‹æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹ï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­ï¼Œå‹¾é€‰connect via networkï¼›3ã€å‹¾é€‰å¥½åï¼Œè€å¿ƒç­‰å¾…â€¦â€¦4ã€å½“å‡ºç°ä¸Šå›¾ä¸­çš„å°çƒæ—¶ï¼Œè¯´æ˜ä½ çš„iPhoneä¸XcodeåŒ¹é…æˆåŠŸï¼Œæ­¤æ—¶ï¼Œæ‹”æ‰æ•°æ®çº¿å³å¯ã€‚5ã€ç›´æ¥è¿è¡Œé¡¹ç›®æµ‹è¯•ã€‚ æœ¬æ–‡å·²åœ¨ç‰ˆæƒå°å¤‡æ¡ˆï¼Œå¦‚éœ€è½¬è½½è¯·åœ¨ç‰ˆæƒå°è·å–æˆæƒã€‚è·å–ç‰ˆæƒ]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºSDWebImageæºç å¸¸è§é—®é¢˜]]></title>
    <url>%2F2017%2F05%2F17%2F201705172052%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šå…³äºSDWebImageæºç å¸¸è§é—®é¢˜ ç®€æå‰æ®µæ—¶é—´ï¼Œå’Œä¸€ä¸ªå°ä¼™äº¤æµï¼Œé‚£å°ä¼™é—®æˆ‘ï¼šå°ä¼™ï¼šâ€œNSStringå£°æ˜å±æ€§æ—¶ï¼Œç”¨ä»€ä¹ˆä¿®é¥°ï¼Ÿâ€æˆ‘ï¼šâ€œcopyâ€å°ä¼™ï¼šâ€œä¸ºä»€ä¹ˆç”¨copyï¼Œç”¨strongæœ‰ä»€ä¹ˆé—®é¢˜ä¹ˆï¼Ÿâ€æˆ‘ï¼šâ€œå¦‚æœä½¿ç”¨strongä¿®é¥°,åªæ˜¯å¯¹å­—ç¬¦ä¸²åšäº†æµ…æ‹·è´ï¼Œå½“æŸä¸ªå¯¹è±¡æŒæœ‰è¿™ä¸ªå±æ€§æ—¶ï¼Œä¼šæ”¹å˜è¿™ä¸ªå±æ€§å€¼ã€‚â€å°ä¼™ï¼šâ€œé‚£æˆ‘å°±æƒ³è®©å®ƒæ”¹å˜å‘¢ï¼Ÿâ€æˆ‘ï¼šâ€œâ€¦â€¦(âŠ™oâŠ™)?â€ å‡ºæ¥æ··ä¹Ÿæœ‰ä¸‰å¹´äº†ï¼Œç«Ÿç„¶åˆåœ¨æœ€åŸºç¡€çš„ä¸Šé¢æ ½äº†ï¼Œå¥½å°´å°¬ã€‚å…¶å®è¯´åˆ°åº•è¿˜æ˜¯è‡ªå·±å†…åŠŸä¿®ä¸ºä¸å¤Ÿã€‚èœ»èœ“ç‚¹æ°´ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€æ˜¯å¤§å¿Œï¼Œåšè¿‡å‡ æ¬¾APPå°±è§‰å¾—è‡ªå·±æ€æ ·æ€æ ·ï¼ŒçœŸçœŸæ˜¯äº•åº•ä¹‹è›™ğŸ¸ã€‚åšä¸ºiOSå¼€å‘è€…ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„ä½¿ç”¨æˆ–äº†è§£è¿‡SDWebImageï¼Œå‰–æå…¶æºç çš„æ–‡ç« ä¸åœ¨å°‘æ•°ï¼Œä»Šå¤©æˆ‘ä»é—®é¢˜é©±åŠ¨çš„è§’åº¦æ¥ç®€å•æ¢³ç†ä¸‹æˆ‘æ‰€ç†è§£çš„SDWebImageã€‚ SDWebImageså›¾ç‰‡ç±»å‹è¯†åˆ«é—®é¢˜å¤§å®¶éƒ½çŸ¥é“ï¼ŒUIImageViewé»˜è®¤æƒ…å†µä¸‹åªèƒ½åŠ è½½pngç±»å‹çš„å›¾ç‰‡ï¼ŒåŠ è½½jpg/gifç­‰ç±»å‹æ—¶æ˜¯è¦å•ç‹¬å¤„ç†çš„ï¼Œé‚£ä¹ˆSDWebImageæ˜¯æ€ä¹ˆè¯†åˆ«ç½‘ç»œå›¾ç‰‡çš„ç±»å‹å‘¢ï¼Ÿé˜…è¯»æºç ï¼Œå¤§å®¶ä¼šå‘ç°åœ¨NSDataçš„åˆ†ç±»æ–‡ä»¶NSData+ImageContentType.mä¸­ï¼Œå®ƒæ˜¯æ ¹æ®æ–‡ä»¶å¤´æ¥è¯†åˆ«ï¼Œå³å›¾ç‰‡æµæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ¤æ–­ã€‚ 1234567891011121314151617181920212223242526272829303132#import &quot;NSData+ImageContentType.h&quot;@implementation NSData (ImageContentType)+ (SDImageFormat)sd_imageFormatForImageData:(nullable NSData *)data &#123; if (!data) &#123; return SDImageFormatUndefined; &#125; uint8_t c; [data getBytes:&amp;c length:1]; switch (c) &#123; case 0xFF: return SDImageFormatJPEG; case 0x89: return SDImageFormatPNG; case 0x47: return SDImageFormatGIF; case 0x49: case 0x4D: return SDImageFormatTIFF; case 0x52: // R as RIFF for WEBP if (data.length &lt; 12) &#123; return SDImageFormatUndefined; &#125; NSString *testString = [[NSString alloc] initWithData:[data subdataWithRange:NSMakeRange(0, 12)] encoding:NSASCIIStringEncoding]; if ([testString hasPrefix:@&quot;RIFF&quot;] &amp;&amp; [testString hasSuffix:@&quot;WEBP&quot;]) &#123; return SDImageFormatWebP; &#125; &#125; return SDImageFormatUndefined;&#125;@end OpenCVå›¾ç‰‡ç±»å‹è¯†åˆ«ä¹Ÿç±»ä¼¼ï¼Œå‚è§ï¼šinclude1224çš„åšå®¢ï¼šè¯»æ–‡ä»¶å¤´åˆ¤æ–­å›¾ç‰‡ç±»å‹ SDWebImageçš„ä¸‹è½½é˜Ÿåˆ—æœºåˆ¶SDWebImageåŠ è½½ç½‘ç»œå›¾ç‰‡çš„æ–¹å¼æ˜¯å¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼Œä¸ç®¡æ˜¯ä»æ€§èƒ½æ–¹é¢è¿˜æ˜¯ä»ä¸ºç”¨æˆ·èŠ‚çœæµé‡çš„è§’åº¦è€Œè¨€ï¼ŒSDWebImageåšçš„éƒ½æ˜¯æ¯”è¾ƒå¥½çš„ã€‚é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†:1ã€ å¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡æ—¶ï¼ŒSDWebImageæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿæ˜¯å¦æœ‰å¯¹åº”çš„å¹¶å‘é˜Ÿåˆ—ï¼Ÿ2ã€å¦‚æœæœ‰ï¼Œå®ƒçš„å¹¶å‘é˜Ÿåˆ—è¿è¡Œæœºåˆ¶æ˜¯æ€æ ·çš„å‘¢ï¼Ÿæ—¢ç„¶æ˜¯å¹¶å‘é˜Ÿåˆ—ï¼Œæœ€å¤§çš„å¹¶å‘æ•°æ˜¯å¤šå°‘ï¼Ÿ3ã€å½“å¤šä¸ªå›¾ç‰‡ä¸‹è½½ä»»åŠ¡ç»“æŸæ—¶ï¼Œåœ¨é˜Ÿåˆ—ä¸­ç§»é™¤çš„ç­–ç•¥æ˜¯æ€æ ·çš„ï¼Œæ˜¯å…ˆè¿›å…ˆå‡ºï¼Ÿè¿˜æ˜¯åè¿›å…ˆå‡ºï¼Ÿ4ã€å½“æŸä¸ªå›¾ç‰‡çš„URLä¸ºé”™è¯¯é“¾æ¥ï¼Œæˆ–è€…æœåŠ¡å™¨å¼‚å¸¸ï¼Œæˆ–è€…ç½‘ç»œå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼ŒSDWebImageæœ‰æ²¡æœ‰å¼‚å¸¸è¶…æ—¶å¤„ç†ï¼Ÿå¦‚æœæœ‰è¶…æ—¶æœºåˆ¶ï¼Œæ—¶é•¿æ˜¯å¤šå°‘å‘¢ï¼Ÿä¸‹é¢æˆ‘å°†ä¸€ä¸€ä¸ºå¤§å®¶æ‰¾åˆ°ç­”æ¡ˆï¼šSDWebImageç½‘ç»œå›¾ç‰‡ä¸‹è½½æ˜¯é€šè¿‡SDWebImageDownloaderå’ŒSDWebImageDownloaderOperationç±»æ¥å®Œæˆçš„ã€‚ SDWebImageDownloaderOperationå°è£…äº†å•ä¸ªå›¾ç‰‡ä¸‹è½½æ“ä½œï¼Œå®ƒæœ‰ä¸€ä¸ªstartæ–¹æ³•ç”¨æ¥å¼€å¯ä¸€ä¸ªä¸‹è½½ä»»åŠ¡ï¼Œçœ‹æºç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨startæ–¹æ³•ä½“ä¸­æœ‰ä¸€æ®µï¼š12NSURLSessionConfiguration *sessionConfig = [NSURLSessionConfiguration defaultSessionConfiguration];sessionConfig.timeoutIntervalForRequest = 15; åœ¨å†…éƒ¨æ˜ç¡®å†™äº†å•ä¸ªä»»åŠ¡çš„è¶…æ—¶æ—¶é—´15ç§’ã€‚ SDWebImageDownloaderæ˜¯ç”¨æ¥ç®¡ç†SDWebImageDownloaderOperationå›¾ç‰‡ä¸‹è½½ä»»åŠ¡çš„ï¼ˆå¦å¤–åœ¨SDWebImageDownloaderä¸­ä¹Ÿå¯ä»¥é…ç½®ä»»åŠ¡è¶…æ—¶æ—¶é•¿ï¼‰ï¼Œå®ƒæŒæœ‰å¤šä¸ªå…¬æœ‰å±æ€§ï¼šmaxConcurrentDownloadsï¼ˆæœ€å¤§å¹¶å‘æ•°ï¼‰ã€downloadTimeoutï¼ˆä»»åŠ¡è¶…æ—¶æ—¶é•¿ï¼‰ã€executionOrderï¼ˆé˜Ÿåˆ—æ‰§è¡Œæ–¹å¼ï¼‰ç­‰ï¼Œç»´æŠ¤ç€ä¸€ä¸ªç§æœ‰å¹¶å‘ä¸‹è½½é˜Ÿåˆ—downloadQueueå’Œä¸€ä¸ªæœ€æ–°ä»»åŠ¡æ·»åŠ ä»»åŠ¡lastAddedOperationã€‚çœ‹æºç æˆ‘ä»¬å¯ä»¥è½»æ¾äº†è§£åˆ°ï¼ŒSDWebImageçš„ä¸‹è½½é˜Ÿåˆ—é»˜è®¤æƒ…å†µä¸‹æ˜¯SDWebImageDownloaderFIFOExecutionOrderï¼Œæ˜¯å…ˆè¿›å…ˆå‡ºçš„ï¼Œä¸‹è½½é˜Ÿåˆ—å¹¶å‘æ•°ä¸º6ã€‚ 123downloadQueue.maxConcurrentOperationCount = 6;downloadTimeoutï¼š 15.0;executionOrder: SDWebImageDownloaderFIFOExecutionOrder; è¯¦è§æºç ï¼š 1234567891011121314151617181920212223242526272829303132@interface SDWebImageDownloader () @property (strong, nonatomic, nonnull) NSOperationQueue *downloadQueue;......@end- (nonnull instancetype)initWithSessionConfiguration:(nullable NSURLSessionConfiguration *)sessionConfiguration &#123; if ((self = [super init])) &#123; _operationClass = [SDWebImageDownloaderOperation class]; _shouldDecompressImages = YES; _executionOrder = SDWebImageDownloaderFIFOExecutionOrder; _downloadQueue = [NSOperationQueue new]; _downloadQueue.maxConcurrentOperationCount = 6; _downloadQueue.name = @&quot;com.hackemist.SDWebImageDownloader&quot;; _URLOperations = [NSMutableDictionary new];#ifdef SD_WEBP _HTTPHeaders = [@&#123;@&quot;Accept&quot;: @&quot;image/webp,image/*;q=0.8&quot;&#125; mutableCopy];#else _HTTPHeaders = [@&#123;@&quot;Accept&quot;: @&quot;image/*;q=0.8&quot;&#125; mutableCopy];#endif _barrierQueue = dispatch_queue_create(&quot;com.hackemist.SDWebImageDownloaderBarrierQueue&quot;, DISPATCH_QUEUE_CONCURRENT); _downloadTimeout = 15.0; sessionConfiguration.timeoutIntervalForRequest = _downloadTimeout; /** * Create the session for this task * We send nil as delegate queue so that the session creates a serial operation queue for performing all delegate * method calls and completion handler calls. */ self.session = [NSURLSession sessionWithConfiguration:sessionConfiguration delegate:self delegateQueue:nil]; &#125; return self;&#125; SDWebImageç¼“å­˜æœºåˆ¶SDWebImageç¼“å­˜æœºåˆ¶å…¶å®ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå†…å­˜ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€‚ä»SDImageCacheæ–‡ä»¶ä¸­æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºè¿™ä¸€ç‚¹ï¼Œå…¶ä¸­memCacheå³å†…å­˜ç¼“å­˜ï¼ŒdiskCachePathå³ç£ç›˜ç¼“å­˜ï¼Œæ•°æ®æ–‡ä»¶å­˜å‚¨åœ¨æ²™ç›’ä¸­ï¼š12345@interface SDImageCache ()@property (strong, nonatomic, nonnull) NSCache *memCache;@property (strong, nonatomic, nonnull) NSString *diskCachePath;......@end å†…å­˜ç¼“å­˜å…ˆè¯´ä¸‹å†…å­˜ç¼“å­˜memCacheï¼Œä¸ºäº†å®Œå–„å†…å­˜ç¼“å­˜ï¼ŒSDWebImageå®ç°äº†NSCacheçš„ä¸€ä¸ªå­ç±»AutoPurgeCacheï¼Œæ‰©å……äº†NSCacheï¼Œå½“å†…å­˜è­¦å‘Šæ—¶ï¼Œå®ƒä¼šæ¥å—UIApplicationDidReceiveMemoryWarningNotificationé€šçŸ¥ï¼Œè‡ªåŠ¨æ‰§è¡ŒremoveAllObjectsæ“ä½œã€‚ 123456789101112131415161718@interface AutoPurgeCache : NSCache@end@implementation AutoPurgeCache- (nonnull instancetype)init &#123; self = [super init]; if (self) &#123;#if SD_UIKIT [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(removeAllObjects) name:UIApplicationDidReceiveMemoryWarningNotification object:nil];#endif &#125; return self;&#125;- (void)dealloc &#123;#if SD_UIKIT [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidReceiveMemoryWarningNotification object:nil];#endif&#125;@end å¦‚æœå¤§å®¶ç»†å¿ƒçš„è¯ä¼šå‘ç°ï¼ŒSDWebImageåšäº†å†…å­˜ç¼“å­˜ï¼Œå½“æˆ‘ä»¬é¢‘ç¹çš„ä½¿ç”¨SDWebImageåŠ è½½å¤šå¼ å›¾ç‰‡æ—¶ï¼Œå´ä¸ºä½•åŸºæœ¬ä¸ä¼šå‡ºç°å†…å­˜æš´æ¶¨çš„æƒ…å†µå‘¢ï¼Ÿå…¶å®è¿™ä¸€åˆ‡å½’åŠŸäºè‡ªåŠ¨é‡Šæ”¾æ± @autoreleasepoolã€‚ç£ç›˜ç¼“å­˜æ¥ä¸‹æ¥å’±ä»¬è¯´ä¸‹ç£ç›˜ç¼“å­˜ï¼Œç£ç›˜ç¼“å­˜æ–‡ä»¶æ˜¯å­˜å‚¨åœ¨æ²™ç›’ä¸­çš„ï¼Œå­˜å‚¨è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ã€‚æˆ‘å…ˆç®€å•è¯´ä¸‹ï¼ŒSDWebImageåŠ è½½å›¾ç‰‡çš„å¤§è‡´æµç¨‹ï¼Œç›¸ä¿¡ä»ä¸­ï¼Œå¤§å®¶ä¼šå¯¹diskCacheæœ‰æ‰€äº†è§£ã€‚åœ¨ä½¿ç”¨SDWebImageæ—¶ï¼Œå¾€å¾€æ˜¯ä»UIImageView+WebCacheæ–‡ä»¶å¼€å§‹çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨SDWebImageç¬¬ä¸€æ­¥å°±æ˜¯è¦å¼•å…¥UIImageViewçš„åˆ†ç±»WebCacheï¼Œç„¶åè°ƒç”¨sd_setImageWithURL:æ–¹æ³•ï¼Œå®Œæˆå›¾ç‰‡çš„å¼‚æ­¥åŠ è½½ã€‚å›¾ç‰‡åŠ è½½çš„å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š è°ƒç”¨sd_setImageWithURLæ–¹æ³•æ—¶ï¼Œå®ƒé¦–å…ˆæ˜¯é€šè¿‡URLä½œä¸ºkeyæŸ¥è¯¢å†…å­˜ç¼“å­˜ï¼Œå³SDImageCacheçš„memCacheå±æ€§ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥æ˜¾ç¤ºåˆ°Viewä¸Šã€‚ åä¹‹ï¼Œå°†é€šè¿‡md5ç¼–ç URLä½œä¸ºæ–‡ä»¶åï¼Œå»æ²™ç›’ï¼ˆå³SDImageCacheçš„diskCachePathè·¯å¾„ä¸‹ï¼‰ä¸­æŸ¥è¯¢æœ‰æ— æ­¤æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±æŠŠæ²™ç›’ä¸­çš„æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ç¼“å­˜memCacheä¸­ï¼Œç„¶åé€šè¿‡SDWebImageDecoderè§£ç åï¼Œç›´æ¥æ˜¾ç¤ºåˆ°Viewä¸Šã€‚ å¦‚æœæ²™ç›’ä¸­ä¸å­˜åœ¨ï¼Œåˆ™å…ˆå°†å ä½å›¾ç‰‡placeholderImageåŠ è½½åˆ°Viewä¸Šï¼Œç´§æ¥ç€å»SDWebImageDownloaderçš„downloadQueueé˜Ÿåˆ—ä¸­ï¼ŒæŸ¥æ‰¾æ˜¯å¦æœ‰æ­£åœ¨ä¸‹è½½è¯¥å›¾ç‰‡çš„ä¸‹è½½ä»»åŠ¡ï¼Œå¦‚æœå­˜åœ¨ç»§ç»­è¯¥ä»»åŠ¡ã€‚ å¦‚æœä¸‹è½½é˜Ÿåˆ—ä¸å­˜åœ¨ï¼Œåˆ›å»ºå›¾ç‰‡ä¸‹è½½ä»»åŠ¡SDWebImageDownloaderOperationï¼Œç„¶åé€šè¿‡lastAddedOperationï¼Œæ ¹æ®å¯¹åº”çš„æœºåˆ¶æ·»åŠ åˆ°ä¸‹è½½å¹¶å‘é˜Ÿåˆ—downloadQueueä¸­ï¼Œä¸‹è½½å®Œæ¯•åï¼Œå°†æ“ä½œåœ¨é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œå°†å›¾ç‰‡æ·»åŠ åˆ°å†…å­˜ç¼“å­˜ä¸­ï¼Œç›´æ¥æ˜¾ç¤ºåˆ°Viewï¼Œå¹¶å°†è¯¥æ–‡ä»¶å‹ç¼©ç¼–ç åå­˜å‚¨åˆ°æ²™ç›’ä¸­ï¼Œå°†é€šè¿‡md5ç¼–ç URLä½œä¸ºæ–‡ä»¶åã€‚ ç›¸ä¿¡çœ‹åˆ°ä¸Šé¢çš„æµç¨‹åï¼Œå¤§å®¶å¯¹ç£ç›˜ç¼“å­˜æœºåˆ¶æœ‰æ‰€äº†è§£ï¼Œå½“ç„¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›ç–‘é—®ï¼Œæ¯”å¦‚ï¼š1ã€å›¾ç‰‡æ–‡ä»¶ä¸ºä»€ä¹ˆä½¿ç”¨md5ç¼–ç çš„URLä½œä¸ºæ–‡ä»¶åï¼Ÿ2ã€ç£ç›˜ç¼“å­˜ï¼Œæ—¢ç„¶ç§°ä¸ºç¼“å­˜ï¼Œå°±è‚¯å®šæœ‰ä¸€å®šçš„æ—¶é—´æœŸé™ï¼Œç¼“å­˜çš„æ—¶é•¿æ˜¯å¤šå°‘ï¼Ÿ3ã€æ–‡ä»¶è¿‡æœŸä¹‹åï¼Œåœ¨ä»€ä¹ˆæ—¶æœºæ¸…é™¤è¿‡æœŸå›¾ç‰‡æ–‡ä»¶çš„ï¼Ÿ4ã€æ²™ç›’å¤§å°æ˜¯æœ‰é™åº¦çš„ï¼Œé‚£ä¹ˆä¸ºSDWebImageé¢„ç•™çš„ç£ç›˜ç©ºé—´æœ‰æ²¡æœ‰å¤§å°é™åˆ¶ï¼Ÿ5ã€å¦‚æœæˆ‘æƒ³æ¸…ç©ºæ‰€æœ‰çš„SDWebImageç¼“å­˜æ€ä¹ˆæ¸…é™¤ï¼Ÿå¦‚æœæˆ‘ä»¬éœ€è¦æ¸…é™¤ç‰¹å®šçš„å›¾ç‰‡ç¼“å­˜åˆè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿä¸‹æ–‡ï¼Œæˆ‘å°†ä¸ºå¤§å®¶ä¸€ä¸€è§£ç­”è¿™ä¸€ç³»åˆ—ç–‘é—®ï¼š SDWebImageç¼“å­˜å›¾ç‰‡å‘½åé—®é¢˜SDWebImageæ˜¯æ€æ ·ç»´æŠ¤ç¼“å­˜å›¾ç‰‡çš„ï¼Ÿåœ¨SDImageCacheæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œå®ƒæ˜¯åˆ©ç”¨äº†MD5çš„å‹ç¼©æ€§ç‰¹æ€§ã€å®¹æ˜“è®¡ç®—ã€å¼ºæŠ—ç¢°æ’ç­‰ç‰¹æ€§ï¼Œå°†å›¾ç‰‡çš„URLè¿›è¡Œmd5ç¼–ç ï¼Œä½œä¸ºæ–‡ä»¶åå­˜å‚¨åˆ°æ²™ç›’ä¸­çš„ã€‚ MD5ç™¾åº¦ç™¾ç§‘MD5ç®—æ³•å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š1ã€å‹ç¼©æ€§ï¼šä»»æ„é•¿åº¦çš„æ•°æ®ï¼Œç®—å‡ºçš„MD5å€¼é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ã€‚2ã€å®¹æ˜“è®¡ç®—ï¼šä»åŸæ•°æ®è®¡ç®—å‡ºMD5å€¼å¾ˆå®¹æ˜“ã€‚3ã€æŠ—ä¿®æ”¹æ€§ï¼šå¯¹åŸæ•°æ®è¿›è¡Œä»»ä½•æ”¹åŠ¨ï¼Œå“ªæ€•åªä¿®æ”¹1ä¸ªå­—èŠ‚ï¼Œæ‰€å¾—åˆ°çš„MD5å€¼éƒ½æœ‰å¾ˆå¤§åŒºåˆ«ã€‚4ã€å¼ºæŠ—ç¢°æ’ï¼šå·²çŸ¥åŸæ•°æ®å’Œå…¶MD5å€¼ï¼Œæƒ³æ‰¾åˆ°ä¸€ä¸ªå…·æœ‰ç›¸åŒMD5å€¼çš„æ•°æ®ï¼ˆå³ä¼ªé€ æ•°æ®ï¼‰æ˜¯éå¸¸å›°éš¾çš„ã€‚ 12345678910111213141516171819- (nullable NSString *)cachePathForKey:(nullable NSString *)key inPath:(nonnull NSString *)path &#123; NSString *filename = [self cachedFileNameForKey:key]; return [path stringByAppendingPathComponent:filename];&#125;- (nullable NSString *)defaultCachePathForKey:(nullable NSString *)key &#123; return [self cachePathForKey:key inPath:self.diskCachePath];&#125;- (nullable NSString *)cachedFileNameForKey:(nullable NSString *)key &#123; const char *str = key.UTF8String; if (str == NULL) &#123; str = &quot;&quot;; &#125; unsigned char r[CC_MD5_DIGEST_LENGTH]; CC_MD5(str, (CC_LONG)strlen(str), r); NSString *filename = [NSString stringWithFormat:@&quot;%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%@&quot;, r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8], r[9], r[10], r[11], r[12], r[13], r[14], r[15], [key.pathExtension isEqualToString:@&quot;&quot;] ? @&quot;&quot; : [NSString stringWithFormat:@&quot;.%@&quot;, key.pathExtension]]; return filename;&#125; SDWebImageç¼“å­˜æ–‡ä»¶ä¿ç•™æ—¶é•¿åŠç¼“å­˜ç©ºé—´å¤§å°æ—¢ç„¶æ˜¯ç¼“å­˜ï¼Œè‚¯å®šæœ‰ç›¸åº”çš„æ—¶é—´æœŸé™ï¼Œé»˜è®¤æƒ…å†µä¸‹SDWebImageçš„ç¼“å­˜æ—¶é•¿ä¸ºä¸€å‘¨ï¼Œå¹¶ä¸”ç¼“å­˜ç©ºé—´å¯ä»¥è‡ªå®šä¹‰ã€‚123456789101112131415#import &quot;SDImageCacheConfig.h&quot;static const NSInteger kDefaultCacheMaxCacheAge = 60 * 60 * 24 * 7; // 1 week@implementation SDImageCacheConfig- (instancetype)init &#123; if (self = [super init]) &#123; _shouldDecompressImages = YES; _shouldDisableiCloud = YES; _shouldCacheImagesInMemory = YES; _maxCacheAge = kDefaultCacheMaxCacheAge; _maxCacheSize = 0; &#125; return self;&#125;@end è¿‡æ»¤URLï¼Œç¦ç”¨ç¼“å­˜å¦‚æœæƒ³è¿‡æ»¤ç‰¹å®šURLï¼Œä¸ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¯¹åº”ä½ç½®åŠ å…¥å¦‚ä¸‹ä»£ç è¿‡æ»¤ã€‚ 1234567891011SDWebImageManager.sharedManager.cacheKeyFilter = ^NSString * _Nullable(NSURL * _Nullable url) &#123; url = [[NSURL alloc] initWithScheme:url.scheme host:url.host path:url.path]; NSLog(@&quot;url.scheme:%@, url.host:%@, url.path: %@&quot;, url.scheme, url.host, url.path); // if([[url.host absoluteString] isEqualToString:@&quot;upload-images.jianshu.io&quot;]) if ([[url absoluteString] isEqualToString:@&quot;http://upload-images.jianshu.io/upload_images/949086-5d2c51f1e3a9cddd.png&quot;]) &#123; return nil; &#125; return [url absoluteString]; &#125;; æ¸…é™¤ç‰¹å®šå›¾ç‰‡ç¼“å­˜åˆšè¯´è¿‡ï¼ŒSDWebImageåŠ è½½å›¾ç‰‡æ˜¯æœ‰ç¼“å­˜çš„ï¼Œé»˜è®¤å­˜å‚¨ä¸€å‘¨çš„æ—¶é—´ã€‚ä½¿ç”¨SDWebImageåŠ è½½åŒæ ·URLçš„å›¾ç‰‡æ—¶ï¼Œä¼˜å…ˆä¼šä»ç¼“å­˜ä¸­å–ï¼Œè€Œä¸æ˜¯æ¯æ¬¡é‡æ–°è¯·æ±‚åŠ è½½ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„å¤´åƒ/å¹¿å‘Šå›¾ç­‰ï¼Œéœ€è¦å®æ—¶åˆ·æ–°ï¼Œæˆ‘ä»¬è¦éœ€è¦æ¸…é™¤ç‰¹å®šçš„å›¾ç‰‡ç¼“å­˜ã€‚å•å•å°±å¤´åƒ/å¹¿å‘Šå›¾æ›´æ–°é—®é¢˜è€Œè¨€ï¼Œæ— éæ˜¯æ›´æ–°ç¼“å­˜é—®é¢˜ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•è§£å†³ï¼Œ ä½¿ç”¨options:SDWebImageRefreshCachedåˆ·æ–°ç¼“å­˜ï¼Œä½†æ˜¯æœ‰äº›ç«¥é‹ååº”è¯¥æ–¹æ³•æœ‰é—ªçƒé—®é¢˜ï¼Œç”šè‡³æœ‰æ—¶å¹¶æ²¡æœ‰æ›´æ–°å›¾ç‰‡ï¼Œæ‰€ä»¥ä¿é™©èµ·è§ï¼Œæœ€å¥½è¿˜æ˜¯æ‰‹åŠ¨æ¸…ç¼“å­˜çš„æ–¹å¼ã€‚ æ¯æ¬¡æ¸…é™¤æ‰å›¾ç‰‡ç¼“å­˜ï¼Œé‡æ–°åŠ è½½çš„æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789 NSURL *imageURL = [NSURL URLWithString:@&quot;http://upload-images.jianshu.io/upload_images/949086-5d2c51f1e3a9cddd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/999&quot;];// è·å–å¯¹åº”URLé“¾æ¥çš„key NSString *key = [[SDWebImageManager sharedManager] cacheKeyForURL:imageURL]; NSString *pathStr = [[SDImageCache sharedImageCache] defaultCachePathForKey:key]; NSLog(@&quot;keyå­˜å‚¨çš„è·¯å¾„: %@&quot;, pathStr);// åˆ é™¤å¯¹åº”keyçš„æ–‡ä»¶ [[SDImageCache sharedImageCache] removeImageForKey:key withCompletion:^&#123; [self.tempImageView sd_setImageWithURL:imageURL placeholderImage:[UIImage imageNamed:@&quot;placeholderHead.png&quot;]]; &#125;]; æ¸…é™¤è¿‡æœŸæ–‡ä»¶çš„æ—¶æœºé€šè¿‡ä¸Šæ–‡çš„è§£ç­”ï¼Œå¤§å®¶çŸ¥é“ç£ç›˜ç¼“å­˜çš„æ–‡ä»¶æ˜¯æœ‰æ—¶é—´æœŸé™çš„ï¼Œé‚£ä¹ˆï¼ŒSDWebImageåœ¨ä»€ä¹ˆæ—¶æœºæ¸…é™¤è¿‡æœŸæ–‡ä»¶çš„å‘¢ï¼Ÿåœ¨SDImageCacheæ–‡ä»¶æˆ‘ä»¬åŒæ ·å¯ä»¥å¾—åˆ°ç­”æ¡ˆï¼šæ¸…é™¤è¿‡æœŸæ—§æ–‡ä»¶çš„æ—¶é—´ç‚¹æœ‰ä¸¤å¤„ï¼šç¨‹åºåˆ‡åˆ°åå°ã€æ€æ­»APPæ—¶ã€‚ 123[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deleteOldFiles) name:UIApplicationWillTerminateNotification object:nil];[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(backgroundDeleteOldFiles) name:UIApplicationDidEnterBackgroundNotification object:nil]; å…·ä½“æºç å¦‚ä¸‹ï¼š123456789101112131415161718192021@interface AutoPurgeCache : NSCache@end@implementation AutoPurgeCache- (nonnull instancetype)init &#123; self = [super init]; if (self) &#123;#if SD_UIKIT [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(removeAllObjects) name:UIApplicationDidReceiveMemoryWarningNotification object:nil];#endif &#125; return self;&#125;- (void)dealloc &#123;#if SD_UIKIT [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidReceiveMemoryWarningNotification object:nil];#endif&#125;@end æœ¬æ–‡å·²åœ¨ç‰ˆæƒå°å¤‡æ¡ˆï¼Œå¦‚éœ€è½¬è½½è¯·åœ¨ç‰ˆæƒå°è·å–æˆæƒã€‚è·å–ç‰ˆæƒ]]></content>
      <categories>
        <category>iOSè¿›é˜¶ç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoæ¡†æ¶ä¹‹GitHubåšå®¢æ­å»ºåŠSEOç«™ç‚¹æ”¶å½•]]></title>
    <url>%2F2017%2F02%2F18%2F201702181911%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šHexoæ¡†æ¶ä¹‹GitHubåšå®¢æ­å»ºåŠSEOç«™ç‚¹æ”¶å½• æƒ³åšä¸€ä¸ªç‹¬ç«‹åšå®¢æƒ³äº†å¾ˆä¹…äº†ï¼Œç”±äºæ‹…å¿ƒè‡ªå·±æƒ³æ³•å¹¼ç¨šåŠå…¶å®ƒç§ç§åŸå› ï¼Œåæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰å°†æ­¤äº‹æ”¾ä¸Šæ—¥ç¨‹ã€‚è™½ç„¶æ¯å¤©å–Šç€æ„è¯šå¿ƒæ­£è€Œåèº«ä¿®ï¼Œèº«ä¿®è€Œåå®¶é½å›½æ²»å¤©ä¸‹å¹³ï¼Œå¯åˆ°å¤´æ¥ä¹Ÿæ‘†è„±ä¸äº†è‡ªå·±åº¸äººæ ‡ç­¾ï¼›è™½ç„¶æ¯å¤©é‚£ä¹ˆåŠªåŠ›ï¼Œå¿å—äº†é‚£ä¹ˆå¤šå¯‚å¯å’Œç—›è‹¦ï¼Œå¯ä¹Ÿæ²¡è§è‡ªå·±å¤šä¹ˆä¼˜ç§€å•Šï¼åœ¨è‡ªå·±æµè§ˆåˆ«äººçš„æŠ€æœ¯è´´çš„è¿‡ç¨‹ä¸­ï¼Œæ¸æ¸æ‰“æ¶ˆäº†æ­¤ç§é¡¾è™‘ï¼Œå¦„è‡ªè²è–„å¯¹äºä¸€ä¸ªæŠ€æœ¯äººå‘˜è€Œè¨€æ˜¯ä¸‡ä¸‡ä¸å¯å–çš„ï¼Œå®ƒå°±åƒä¸€ä¸ªæŸç¼šè‡ªèº«çš„ç‰¢ç¬¼ï¼Œä¸é£ä½ æ€çŸ¥å¤©ç©ºçš„å¹¿é˜”ï¼Œä¸åšåˆæ€çŸ¥è‡ªå·±å°±çœŸçš„ä¸€æ–‡ä¸å€¼å‘¢ï¼Ÿä¸‹æ–‡ä¸ºè‡ªå·±åœ¨GitHubä¸Šè‡ªå»ºåšå®¢çš„ç»å†ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ç›Šã€‚æ–‡ç« ä¸»è¦åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š Hexoæ¡†æ¶ç”Ÿæˆæ­¥éª¤æµç¨‹ï¼› ä¸»é¢˜é…ç½®ï¼Œæœ¬äººåšå®¢é‡‡ç”¨çš„æ˜¯NexTä¸»é¢˜ï¼› ä¸‰æ–¹æœåŠ¡é›†æˆï¼Œå¦‚å¤šè¯´è¯„è®ºã€å†…å®¹åˆ†äº«ç­‰ï¼› è‡ªå»ºç«™ç‚¹çš„ç™¾åº¦/è°·æ­Œæœç´¢å¼•æ“æ”¶å½•åŠéªŒè¯ é—²è¨€å°‘å™ï¼Œå…ˆçœ‹ä¸‹æœ¬äººçš„åšå®¢æ•ˆæœï¼šhttps://zonghongyan.github.io ï¼Œå¦‚æœæ‚¨ä»äº‹iOSï¼Œè¿˜è¯·åœ¨ä»ä¼¯å®‰çš„GitHubç»™ä¸ªStarã€‚ å‰è¨€markdownä»¥å…¶ç®€æ´æ˜“å­¦çš„ç‰¹ç‚¹ï¼Œå·²é€æ¸æ¼”å˜æˆäº†åšå®¢å¹³å°ä¸­ä¸€ç§é€šç”¨çš„æ–‡å­—æ ‡è®°è¯­è¨€ï¼Œè€Œå…¶å½±å“åŠ›ä¹Ÿä¸å…‰åœ¨åšå®¢å¹³å°æ–¹é¢ï¼ŒGitHubã€Wikipediaä¹Ÿéƒ½å…¼å®¹markdownè¯­æ³•ã€‚ç°æœ‰åšå®¢æ¡†æ¶ä¸­å¯¹markdownæ”¯æŒæ¯”è¾ƒå¥½çš„ï¼Œå¤§è‡´æœ‰Ghost, Jekyllå’ŒHexoç­‰ï¼Œæœ¬äººé‡‡ç”¨çš„æ˜¯Hexoæ¡†æ¶ã€‚Hexoæ˜¯ä¸€ä¸ªç®€æ´é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œå¯¹markdownæ–‡æ¡£æ¸²æŸ“é€Ÿåº¦å¿«ï¼Œè€Œä¸”å¯¹ä¸­æ–‡æ”¯æŒè¾ƒå¥½ï¼Œä¾èµ–å°‘ï¼Œæ”¯æŒNodeå°±å¥½ã€‚ Hexoæ¡†æ¶ç”Ÿæˆ GitHub Pageç”ŸæˆGitHub Pageç”Ÿæˆæœ‰ä¸ªçº¦å®šä¿—ç§°çš„ä¸œè¥¿ï¼Œåœ¨åˆ›å»ºåº“æ—¶åå­—å¿…é¡»æ˜¯:ç”¨æˆ·å.github.ioï¼Œè®°ä½è¿™ä¸€ç‚¹å³å¯ï¼Œå…·ä½“æµç¨‹å¯å‚ç…§ä¸‹å›¾ã€‚ Hexoæ¡†æ¶ç”Ÿæˆåœ¨ç”ŸæˆHexoæ¡†æ¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®å¥½Nodeå’Œgitç¯å¢ƒï¼Œå¯è‡ªè¡Œé…ç½®ã€‚é…ç½®å¥½æ£€æµ‹ç¯å¢ƒæ˜¯å¦é…ç½®å®Œæˆï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š123// æ£€æµ‹ç¯å¢ƒæ˜¯å¦é…ç½®å®Œæˆnpm --versiongit --version å¦‚æœé…ç½®å¥½ç¯å¢ƒåï¼Œå°†GitHubçš„GitHub Pageåº“Checkoutåˆ°æœ¬åœ°ï¼š12// ç»ˆç«¯å‘½ä»¤æ–¹å¼git clone -o github git@github.com:zonghongyan/zonghongyan.github.io.git ä¸ºäº†å‘å¸ƒä»£ç å’Œæºç åˆ†ç¦»ï¼Œæˆ‘ä½¿ç”¨åˆ†æ”¯æ¡†æ¶æºç åœ¨debugåˆ†æ”¯ä¸­ï¼Œmasterä¸ºå‘å¸ƒçš„ä»£ç ã€‚12// ç»ˆç«¯å‘½ä»¤æ–¹å¼git branch debug æˆ‘ä»¬åªéœ€ä½¿ç”¨npmå³å¯å®ŒæˆHexoæ¡†æ¶ç”Ÿæˆå·¥ä½œï¼š1234developer$ npm install -g hexo-cli/usr/local/bin/hexo -&gt; /usr/local/lib/node_modules/hexo-cli/bin/hexo/usr/local/libâ””â”€â”€ hexo-cli@1.0.2 å®‰è£…Hexoä¹‹åï¼Œå³å¯å»ºç«™å·¥ä½œï¼š123456// å»ºç«™hexo init zonghongyan.github.io......INFO Start blogging with Hexo!cd zonghongyan.github.ionpm install å°†gitæ–‡ä»¶æ‹·è´åˆ°å¯¹åº”ç›®å½•ä¸­ï¼Œgit add . æ›´æ–°gitæ–‡ä»¶â€“&gt;git commitæäº¤â€“&gt;git push -u origin debugåˆ°åˆ†æ”¯debugä¸­å³å¯ã€‚ æ­¤åˆ»ä¸ºæ­¢ï¼ŒHexoæ¡†æ¶ç”Ÿæˆå®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œdebugï¼Œåœ¨ç«™ç‚¹ç›®å½•è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š1hexo s -debug åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp://localhost:4000 ï¼Œå³å¯é¢„è§ˆHexoé»˜è®¤ä¸»é¢˜çš„æ•ˆæœã€‚ NexTä¸»é¢˜é…ç½®Hexoæœ‰å¾ˆå¤šä¸»é¢˜é£æ ¼ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢NexTï¼Œä»¥é»‘ç™½è‰²ä¸ºä¸»è‰²è°ƒï¼Œç®€æ´æ˜äº†ï¼Œä¸èŠ±å“¨ã€‚ NexTä¸»é¢˜å®‰è£…é¦–å…ˆï¼Œåœ¨ç»ˆç«¯ä¸­cdåˆ°ä½ çš„ç«™ç‚¹ç›®å½•ï¼Œå¦‚ï¼šzonghongyan.github.ioç›®å½•ä¸‹ï¼Œå…‹éš†nextä¸»é¢˜ï¼š1git clone https://github.com/iissnan/hexo-theme-next themes/next cloneæˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°åœ¨themeç›®å½•ä¸‹å¤šäº†ä¸ªnextç›®å½•ï¼Œæ­¤å³ä¸»é¢˜æ–‡ä»¶ï¼š NexTä¸»é¢˜é…ç½®åœ¨Hexoæ¡†æ¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªè¾ƒä¸ºé‡è¦çš„ä¸»é¢˜æ–‡ä»¶ï¼šç«™ç‚¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€ä¸»é¢˜ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚ ï¼ˆ1ï¼‰å¯ç”¨ä¸»é¢˜æ‰“å¼€ç«™ç‚¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œæ‰¾åˆ°theme: landscapeï¼Œä¿®æ”¹ä¸ºtheme: nextã€‚ ï¼ˆ2ï¼‰ä¸»é¢˜éªŒè¯éªŒè¯ä¸ä¸ŠèŠ‚landscapeä¸»é¢˜çš„é¢„è§ˆæ–¹å¼ç±»ä¼¼ï¼Œç›´æ¥åœ¨ç«™ç‚¹ç›®å½•ä¸‹æ‰§è¡Œï¼šhexo sæˆ–è€…hexo s -debugã€‚åˆ°è¿™é‡Œï¼ŒåŸºæœ¬çš„Hexoæ¡†æ¶NexTä¸»é¢˜çš„åšå®¢åˆ›å»ºå®Œæ¯•ã€‚ï¼ˆ3ï¼‰ç«™ç‚¹å‘å¸ƒæ‰“å¼€ç«™ç‚¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œæ‰¾åˆ°deployéƒ¨åˆ†ï¼Œé…ç½®å¦‚ä¸‹ï¼š123456# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: git@github.com:yousite/yousite.github.io.git branch: master ç„¶ååœ¨ç»ˆç«¯ä¸­cdåˆ°ç«™ç‚¹ç›®å½•ï¼Œæ‰§è¡Œï¼š123hexo clean // æ¸…é™¤ä¸Šæ¬¡publishæ–‡ä»¶hexo g æˆ–è€… hexo generate // ç”Ÿæˆpublishæ–‡ä»¶hexo d æˆ–è€… hexo deploy // å‘å¸ƒ å¦‚æœæ‰§è¡Œhexo deploy å‘å¸ƒçš„æ—¶å€™é‡åˆ°é—®é¢˜ï¼Œå¯èƒ½æ˜¯hexoæ¡†æ¶çš„gitå·¥å…·åŒ…æ²¡å®‰è£…çš„ç¼˜æ•…ï¼Œå¯åœ¨ç«™ç‚¹ç›®å½•æ‰§è¡Œï¼š1npm install hexo-deployer-git --save ç„¶åcommitæ–‡ä»¶åˆ°åˆ†æ”¯åï¼Œé‡æ–°å‘å¸ƒã€‚æœ€åï¼Œç›´æ¥åœ¨ç½‘ç«™ä¸­è¾“å…¥ï¼šhttps://yousite.github.io ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦ã€‚ ä¸»é¢˜é…ç½®ä»¥ä¸Šåˆ›å»ºçš„åªæ˜¯æœ€ç®€æ˜“çš„NexTä¸»é¢˜ç«™ç‚¹ï¼Œå¦‚æœéœ€è¦æœ‰è®¿é—®é‡ç»Ÿè®¡ã€ç«™å†…æœç´¢ã€æ‰“èµåŠŸèƒ½ã€å…¬ç›Š404ç­‰ï¼Œéœ€é¢å¤–é…ç½®_config.ymlæ–‡ä»¶ã€‚å…¶ä»–é…ç½®è‡ªè¡Œåˆ°NexTä¸»é¢˜é…ç½® ç«™ç‚¹é…ç½®ï¼Œç”±äºå®˜ç½‘æä¾›çš„404é…ç½®æœ‰äº›é—®é¢˜ï¼ˆGitHubä¸ºHttpså®‰å…¨åè®®ï¼Œå®˜ç½‘ç»™å‡ºçš„æ˜¯httpçš„ï¼‰ï¼Œæˆ‘ä»¬è¿™é‡Œå•ç‹¬è¯´ä¸‹å…¬ç›Š404é…ç½®ï¼Œä¹Ÿç®—æ˜¯ç§¯å¾·è¡Œå–„å•¦ã€‚å…ˆçœ‹ä¸‹æœ€ç»ˆæ•ˆæœï¼šhttps://zonghongyan.github.io/404.htmlé…ç½®æ­¥éª¤å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰æ–°å»º 404.html é¡µé¢ï¼Œæ”¾åˆ°ä¸»é¢˜çš„ source ç›®å½•ä¸‹ï¼Œä»£ç ç‰¹åˆ«æ„Ÿè°¢songjinzhongï¼ˆ2ï¼‰åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­é…ç½®commonwealï¼š12# .../themes/next/_config.ymlæ–‡ä»¶ä¸­ commonweal: /404.html å¦‚æœéœ€è¦è¯„ä»·ç³»ç»Ÿã€å†…å®¹åˆ†äº«ç­‰ï¼Œè¿˜éœ€è¦ç¬¬ä¸‰æ–¹æ”¯æŒã€‚ ä¸‰æ–¹æœåŠ¡é›†æˆæˆ‘çš„åšå®¢ä¸»è¦å®é…ç½®çš„åŠŸèƒ½æœ‰ï¼šè®¿é—®é‡ç»Ÿè®¡ã€è¯„ä»·ç³»ç»Ÿã€ç«™å†…æœç´¢ã€å¤šè¯´çƒ­è¯„ã€æ‰“èµã€å…¬ç›Š404ç­‰ã€‚ä¸‹é¢æˆ‘ç®€å•è¯´æ˜å‡ ç‚¹ï¼š è¯„ä»·ç³»ç»ŸNexTä¸»é¢˜æ”¯æŒå¤šè¯´å’ŒDisqusè¯„è®ºç³»ç»Ÿï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯å¤šè¯´è¯„ä»·ã€‚ä½¿ç”¨å¤šè¯´é¦–å…ˆè¦åœ¨å¤šè¯´ä¸­åˆ›å»ºä¸€ä¸ªç«™ç‚¹ã€‚http://duoshuo.com ï¼Œç™»å½•åï¼Œåœ¨é¦–é¡µå•å‡»æˆ‘è¦å®‰è£…ï¼Œåˆ›å»ºç«™ç‚¹ï¼Œå¡«å†™è¡¨å•ã€‚ç«™ç‚¹åç§°ï¼šéšä¾¿å†™ï¼Œç«™ç‚¹åœ°å€å³ï¼šhttps://yousite.github.io ï¼Œå¤šè¯´åŸŸåï¼šè¿™ä¸€æ æ¯”è¾ƒé‡è¦ï¼Œå¤šè¯´åŸŸåä¸­çš„å†…å®¹è¦åœ¨ä¸»é¢˜ç›®å½•ä¸‹_config.ymlæ–‡ä»¶ä¸­çš„duoshuo_shortnameé…ç½®ï¼Œè®°å¾—è¿™é‡Œæ˜¯ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚ å¤šè¯´åˆ†äº«åŒæ ·åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š 123# .../themes/next/_config.ymlæ–‡ä»¶ä¸­# duoshuo_shareduoshuo_share: true å¤šè¯´çƒ­è¯„åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š 123# .../themes/next/_config.ymlæ–‡ä»¶ä¸­# duoshuo_hotarticalduoshuo_hotartical: true å…¶ä»–çš„åŠŸèƒ½é…ç½®ä¹Ÿç±»ä¼¼â€¦â€¦é…ç½®åˆ°æ­¤å¤„ï¼Œä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„ç‹¬ç«‹åšå®¢åŸºæœ¬å»ºæˆï¼Œå¾ˆå¤šäººä¹Ÿå°±åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œä½†æˆ‘æƒ³æˆ‘ä»¬å†™åšå®¢çš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Œè‚¯å®šæ˜¯æƒ³å°½å¯èƒ½å¤šçš„å¸®åˆ°åˆ«äººï¼Œä½†é—æ†¾çš„æ˜¯è²Œä¼¼Githubåšäº†é˜²çˆ¬è™«å¤„ç†ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬çš„åšå®¢ä¸€èˆ¬ä¸ä¼šè¢«æœç´¢å¼•æ“æ”¶å½•çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¦ä¸»åŠ¨æäº¤ç»™æœç´¢å¼•æ“ã€‚ ç‹¬ç«‹åšå®¢SEO éªŒè¯ç«™ç‚¹æ˜¯å¦è¢«æ”¶å½•è¦éªŒè¯ç«™ç‚¹æ˜¯å¦è¢«æ”¶å½•ï¼Œç›´æ¥åœ¨ç™¾åº¦æˆ–è°·æ­Œä¸­è¾“å…¥ï¼šsite:yousiteï¼Œä¼šæœ‰æç¤ºï¼š ç«™ç‚¹æ”¶å½•æäº¤æˆ‘ä»¬å•å‡»ä¸‹é¢çš„æäº¤ç½‘å€ï¼Œä¼šè¿›å…¥ç™¾åº¦ç«™é•¿ç®¡ç†ï¼Œå•å‡»ç«™ç‚¹ç®¡ç†ï¼Œæ·»åŠ ç½‘ç«™ï¼šè¾“å…¥è‡ªå·±è¦æäº¤æ”¶å½•çš„ç½‘ç«™ï¼Œæ¯”å¦‚ï¼šhttps://yoursite.github.ioï¼Œä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨HTMLæ ‡ç­¾éªŒè¯æ–¹å¼ï¼Œè¿™ä¸€ç‚¹è¦åœ¨è‡ªå·±åšå®¢ç½‘ç«™åŸ‹ç‚¹éªŒè¯ï¼Œé…ç½®æ­¥éª¤å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯ï¼š12google_site_verification: truebaidu_site_verification: true ï¼ˆ2ï¼‰åœ¨ä¸»é¢˜ç›®å½•themes/next/layout/_partials/head.swigæ–‡ä»¶ä¸­ï¼Œé…ç½®tokené…ç½®å›¾çš„tokenå€¼ï¼š123&#123;% if theme.baidu_site_verification %&#125; &lt;meta name=&quot;baidu-site-verification&quot; content=&quot;iZjCbg5MoG&quot; /&gt;&#123;% endif %&#125; ï¼ˆ3ï¼‰é…ç½®å¥½åï¼Œé‡æ–°å‘å¸ƒè‡ªå·±çš„ç«™ç‚¹ï¼š123hexo cleanhexo ghexo d ï¼ˆ4ï¼‰å•å‡»å®ŒæˆéªŒè¯éªŒè¯å®Œæˆåï¼Œè‡ªå·±çš„ç½‘ç«™ä¼šè¢«æäº¤ï¼Œå¦‚ä¸‹å›¾ï¼Œè¿‡æ®µæ—¶é—´åœ¨ç™¾åº¦ä¸­éªŒè¯ç«™ç‚¹æ˜¯å¦æ”¶å½•å³å¯ï¼Œæ®è¯´æ˜¯ä¸€å‘¨ã€‚ Googleæ”¶å½•ä¸ç™¾åº¦ç±»ä¼¼Googleæ”¶å½•ç½‘å€æ·»åŠ æ‰€è¦æäº¤çš„åœ°å€ï¼šæäº¤è¯·æ±‚åï¼Œç¼–è¾‘ç«™ç‚¹â€“&gt;æ·»åŠ å±æ€§ï¼Œé€‰æ‹©å¤‡ç”¨æ–¹æ³•ï¼Œå…¶ä»–æµç¨‹å’Œç™¾åº¦ç±»ä¼¼ï¼ŒéªŒè¯é€šè¿‡åï¼Œç«‹å³å°±å¯ä»¥åœ¨Googleä¸­æŸ¥åˆ°ï¼Œä¸çŸ¥æ˜¯æ•ˆç‡åŸå› ï¼Œè¿˜æ˜¯ç™¾åº¦æ•…æ„ä¸ºä¹‹å•Šï¼]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>åšå®¢</tag>
        <tag>Hexo</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS APPæ¡†æ¶æ­å»ºç®€æï¼ˆé™„GitHubæ‰˜ç®¡Demoï¼‰]]></title>
    <url>%2F2017%2F01%2F21%2F201701211716%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šiOS APPæ¡†æ¶æ­å»ºç®€æï¼ˆé™„GitHubæ‰˜ç®¡Demoï¼‰ éƒ½è¯´â€œä¸‰å²çœ‹è€â€ï¼Œæˆ‘åœ¨å’Œè°ç¤¾ä¼šä¸­æ‘¸çˆ¬ æ‰“æ»šäº†ä¹Ÿè¿‘ä¸‰ä¸ªå¹´å¤´ï¼Œè¿™ä¸å¿«è¿‡å¹´äº†ï¼Œä»Šå¹´æœ‹å‹/å‘å°å¯»æ‰¾â€œå¿ƒç†å¹³è¡¡â€çš„é¦–é€‰å¯¹è±¡ä¾æ—§æ˜¯å“¥ï¼Œçœ‹ç€å¤§å®¶æ»¡æ„è€Œå½’çš„èº«å½±ï¼Œè£å¹¸ä¹‹è‡³ï¼æ§ä¸€æ§å‡‰æ°´æ‰‘åˆ°è„¸ä¸Šï¼ŒæŠ¬å¤´ç…§ç…§é•œå­æ‰“é‡ç€ä¾æ—§â€œæ¯ç˜¦å¦‚æŸ´â€çš„è‡ªå·±ï¼Œçœ‹ç€æ—¶é—´ç»™åˆ»ä¸‹çš„â€œæŠ¬å¤´çº¹â€ï¼Œç›¯ç€é‚£æµ‘æµŠä½†ä¾æ—§åšå®šçš„çœ¼ç›ï¼Œå“¥æƒ³å¯¹è‡ªå·±è¯´ï¼šâ€œå¤§é›ï¼Œä½ å¯ä»¥çš„ï¼Œè™½ç„¶æ²¡æœ‰ä»¥å‰å¥½é…åˆäº†ï¼Œä½ ç»ˆæœ‰ä¸€å¤©ä¼šæˆåŠŸçš„ï¼Œè™½ç„¶è¿˜å¾ˆé¥è¿œï¼ä¹–ä¹–ï¼Œå¥½äº†ï¼Œå‚»Bå¯ä»¥å†™å¸–å­äº†â€¦â€¦â€ å‰è¨€ä¸ç®¡å¼€å‘ä»»ä½•è½¯ä»¶ï¼Œæˆ‘ä»¬çš„åŸåˆ™å°±æ˜¯å°½é‡åšåˆ°â€œé«˜å†…èšä½è€¦åˆâ€ã€‚æ‰€è°“â€œä½è€¦åˆâ€æ˜¯æŒ‡è½¯ä»¶ç»“æ„ä¸­æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦æˆ–å…³è”ç¨‹åº¦ï¼Œæ¨¡å—ä¹‹é—´æ¥å£çš„è°ƒç”¨åŠå®ç°çš„å¤æ‚åº¦ã€äº¤äº’æ•°æ®çš„å¤šå°‘ç­‰ï¼Œå†³å®šäº†è½¯ä»¶è€¦åˆåº¦çš„é«˜ä½å¼ºå¼±ï¼›æ‰€è°“â€œé«˜å†…èšâ€æ˜¯ä»æ¨¡å—å†…éƒ¨åŠŸèƒ½çš„å±‚é¢è€Œè¨€çš„ï¼Œæ¨¡å—å†…éƒ¨ç‰¹å®šåŠŸèƒ½çš„ä»£ç å…ƒç´ çš„ç´§å¯†ç¨‹åº¦å†³å®šäº†ä»£ç å†…èšæ€§çš„é«˜ä½ã€‚ ç½‘ä¸Šä¸ä¹æœ‰æ‰€è°“â€œååˆ†é’Ÿæ­å»ºå¼ºå£®APPæ¡†æ¶â€ã€â€œå¿«é€Ÿæ­å»ºå¼ºå£®APPæ¡†æ¶â€ç­‰å¸–å­ï¼Œä¸”ä¸å»è®²å¥½åï¼Œæ€»ä¹‹ï¼Œå®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ï¼Œä»Šå¤©æˆ‘ç®€å•æ±‡æŠ¥ä¸‹æœ¬äººåšé¡¹ç›®æ—¶ï¼Œæ¡†æ¶çš„æ­å»ºæµç¨‹åŠæ³¨æ„äº‹é¡¹ã€‚ æ¡†æ¶æ­å»ºæ¡†æ¶æ­å»ºæ˜¯ä¸ªåŠ³ç¥è´¹å¿ƒçš„äº‹æƒ…ï¼Œå› ä¸ºåœ¨æ­å»ºæ—¶ä½ è¦è€ƒè™‘åˆ°å„ç§å¯èƒ½ï¼Œæ¯”å¦‚ï¼šæ€ä¹ˆè®¾è®¡ä½¿å¾—æµç¨‹æ›´æ¸…æ™°ï¼Ÿæ€ä¹ˆè®¾è®¡æ›´æ˜“äºåˆ†å·¥åä½œï¼Ÿæ€ä¹ˆè®¾è®¡æ›´å®¹æ˜“å¿«é€Ÿå®šä½ä»£ç æ¨¡å—ï¼Ÿæ€ä¹ˆä¿è¯ç³»ç»Ÿçš„æ˜“æ‰©å±•æ€§ï¼Ÿç­‰ç­‰éƒ½æ˜¯æˆ‘ä»¬è¦æå‰æŠŠæ¡å¥½çš„ã€‚å…ˆçœ‹ä¸‹å¤§è‡´æ•ˆæœå›¾å¦‚ä¸‹ï¼š ä¸€ã€ æ¡†æ¶ç»“æ„APPçš„ç»“æ„ä¸€èˆ¬åˆ†ä¸ºä¸‰æ¡çº¿ï¼š ä¸€æ¡ä¸»æ¡†æ¶æµç¨‹ï¼› ä¸€æ¡æ˜¯ç”¨æˆ·ç™»å½•æ¡†æ¶æµç¨‹ï¼› ä¸€æ¡å…¶ä»–å¦‚å¹¿å‘Šé¡µã€æ¬¢è¿é¡µç­‰ ç›¸å¯¹è€Œè¨€ï¼Œä¸»æ¡†æ¶æµç¨‹è¾ƒä¸ºå¤æ‚ï¼Œé¡¶çº§å®¹å™¨ä¸ºUITabBarControllerï¼Œå­å®¹å™¨ä¸ºUINavigationControllerï¼Œå…¶ä¸­é¡¶çº§å®¹å™¨æ”¾3-5ä¸ªå¯¼èˆªæ§åˆ¶å™¨ï¼Œå¯¼èˆªæ§åˆ¶å™¨çš„rootViewControllerä¸ºå„æ¨¡å—çš„é¦–é¡µã€‚ç™»å½•æ¡†æ¶æµç¨‹åŠå…¶ä»–ä¸€èˆ¬ä¸ºçº¿æ€§æµç¨‹ï¼Œä¸ªåˆ«ä¼šæ¶‰åŠåˆ°æ ¹è§†å›¾çš„åˆ‡æ¢ï¼Œç›¸å¯¹ç®€å•ï¼Œå¦‚æœç”»æˆæ ‘çŠ¶ç»“æ„å›¾çš„è¯å¤§è‡´å¦‚ä¸‹ï¼š äºŒã€ StoryBoardåˆ†ç¦»ä¸ºäº†é…ç½®ä¸‰æ–¹åº“æ–¹ä¾¿ï¼Œæˆ‘ä½¿ç”¨CocoaPodså·¥ç¨‹(åŸºäºCocoaPods 1.1.1)ï¼Œä¸‹ä¸ºPodfileæ–‡ä»¶å¼•å…¥çš„ä¸‰æ–¹åº“ï¼š1234567891011121314platform :ios,â€™8.0â€™target â€˜EVNEstorePlatformâ€™ dopod &apos;MBProgressHUD&apos;, &apos;~&gt; 1.0.0&apos;pod &apos;FMDB&apos;pod &apos;SDWebImage&apos;, &apos;~&gt; 3.8&apos;pod &apos;IQKeyboardManager&apos;, &apos;~&gt; 3.3.7&apos;pod &apos;MJRefresh&apos;pod &apos;MJExtension&apos;pod &apos;MWPhotoBrowser&apos;pod &apos;AFNetworking&apos;, &apos;~&gt; 3.0&apos;end å¦‚é‡åˆ°é—®é¢˜ï¼Œå¯å‚ç…§CocoaPodså·¥ä½œåŸç†åŠä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè§£å†³æˆ–é—®é˜¿åº¦ã€‚ åœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ²¡æœ‰è¯´è°çš„æ¡†æ¶æ›´ä¼˜ï¼Œç»“æ„éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œé€‚åˆè‡ªå·±çš„å›¢é˜Ÿæ‰æ˜¯æœ€é‡è¦çš„ã€‚å•ä»æ¡†æ¶æ­å»ºåŠç•Œé¢å¸ƒå±€è€Œè¨€ï¼Œæœ‰çš„å›¢é˜Ÿå–œæ¬¢StoryBoardï¼Œå› ä¸ºæ‰€è§å³æ‰€å¾—ï¼Œç»™å¤–è¡Œä»‹ç»èµ·æ¥è¾ƒä¸ºæ–¹ä¾¿ï¼Œä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰çš„ç•Œé¢é“ºæ»¡å±å¹•ï¼Œå¾ˆé…·ç‚«çš„æ„Ÿè§‰ã€‚æœ‰çš„å›¢é˜Ÿå–œæ¬¢çº¯ä»£ç ï¼Œå½“çœ‹åˆ°è‡ªå·±å†™ä¸€ä¸²ä¸²å­—ç¬¦æ¸²æŸ“å‡ºâ€œç¥ç§˜â€åŠ¨ç”»ï¼Œè¯´ä¸å‡ºçš„æ»¡è¶³æ„Ÿã€‚å½“ç„¶æˆ‘ä»¬å›¢é˜Ÿå¥‰è¡Œçš„æ˜¯ä¸­åº¸ä¹‹é“ï¼Œæ¡†æ¶æ­å»º+ä¸ªåˆ«ç®€æ˜“ç•Œé¢æˆ‘ä»¬ä½¿ç”¨StoryBoardï¼Œå…¶ä»–ä½¿ç”¨çº¯ä»£ç çš„æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯è¸©è¿‡å‘ä¹‹åï¼Œå€’é€¼çš„ç»“æœã€‚æ¯‹åº¸ç½®ç–‘StoryBoardæœ‰å¾ˆå¤šçš„ä¼˜ç‚¹ï¼Œä½†å¯¹äºå›¢é˜Ÿåä½œå¼€å‘ï¼Œæœ‰æ—¶ä¼šæœ‰è¯´ä¸å‡ºçš„ç—›ï¼Œæ¯”å¦‚ï¼šåŒæ—¶ä¿®æ”¹StoryBoardæ–‡ä»¶é‡åˆ°çš„å†²çªï¼›å³ä¾¿æ˜¯ç»†å¾®çš„ä½ç§»è°ƒæ•´ï¼Œç¼–è¯‘èµ·æ¥ä¹Ÿéœ€è¦è¶³å¤Ÿè€å¿ƒï¼›æ›´æ–°äº†ä¸‹Xcodeæ€ä¹ˆå¸ƒå±€å…¨ä¹±äº†ç­‰ç­‰é—®é¢˜ï¼Œæ­£å› ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨æŠ˜ä¸­æ–¹æ¡ˆï¼Œå°½é‡å°†StoryBoardåˆ†ç¦»ä½¿ç”¨ï¼ŒMain.storyboardä¸­ä¸ºä¸»æ¡†æ¶é¡¶çº§å®¹å™¨å’Œç™»å½•æµç¨‹çš„é¡¶çº§å®¹å™¨ï¼Œè€Œå…¶ä»–3-5ä¸ªæ¨¡å—å¦‚ï¼Œé¦–é¡µHost.storyboardã€ä¸ªäººä¸­å¿ƒMineCenter.storyboardç­‰ï¼Œä½¿ç”¨å•ç‹¬çš„StoryBoardæ–‡ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–åŸºæœ¬ä½¿ç”¨çº¯ä»£ç æ–¹å¼ç¼–å†™ã€‚ åœ¨è¿›è¡Œæ•…äº‹ç‰ˆåˆ†ç¦»æ—¶ï¼Œä¸»è¦æ˜¯è‡ªå®šä¹‰UITabBarControllerçš„è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œæ ¹æ®ä¸Šé¢æ¨¡æ¿å›¾ï¼Œæ–°å»ºæ•…äº‹ç‰ˆæ–‡ä»¶ï¼›ç„¶åï¼ŒæŒ‰ç…§ç¬¬ä¸€èŠ‚æ¡†æ¶ç»“æ„å›¾ï¼Œå°†ç‰¹å®šçš„æ§åˆ¶å™¨å®¹å™¨ã€å¯¼èˆªæ§åˆ¶å™¨ã€è§†å›¾æ§åˆ¶å™¨æ‹–å…¥å¯¹åº”çš„æ•…äº‹ç‰ˆä¸­ï¼ˆStoryBoardæ–‡ä»¶ï¼‰ï¼›å†æ¬¡ï¼Œåœ¨è‡ªå®šä¹‰çš„UITabBarControllerä¸­ï¼Œè¿æ¥å„ä¸ªæ¨¡å—ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­UITabBarControllerèµ·åˆ°äº†åº”ç”¨çš„è¿æ¥ä¸­æ¢çš„ä½œç”¨ï¼Œä¸ºäº†ç‚«æŠ€ï¼Œå“¥åšäº†ä¸ªä¸­é—´å‡¸èµ·æ•ˆæœï¼Œä¸»è¦çš„TabBarControllerä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445#pragma mark: é¦–é¡µstoryboard UIImage *hostSelectImg = [UIImage imageNamed:@&quot;hostViewSelect&quot;]; UIImage *hostUnSelectImg = [UIImage imageNamed:@&quot;hostViewUnSelect&quot;]; UIStoryboard *hostSB = [UIStoryboard storyboardWithName:@&quot;Host&quot; bundle:nil]; UINavigationController *hostNaviVC = [hostSB instantiateViewControllerWithIdentifier:@&quot;hostNavigationC&quot;]; hostNaviVC.tabBarItem = [[UITabBarItem alloc] initWithTitle:@&quot;é¦–é¡µ&quot; image:[self scaleImage:hostUnSelectImg] selectedImage:[self scaleImage:hostSelectImg]]; hostNaviVC.tabBarItem.tag = 0;#pragma mark: å…³æ³¨storyboard UIImage *attentionSelectImg = [UIImage imageNamed:@&quot;attentionSelect.png&quot;]; UIImage *attentionUnSelectImg = [UIImage imageNamed:@&quot;attentionUnSelect.png&quot;]; UIStoryboard *attentionSB = [UIStoryboard storyboardWithName:@&quot;Attention&quot; bundle:nil]; UINavigationController *attentionNaviVC = [attentionSB instantiateViewControllerWithIdentifier:@&quot;attentionNavigationC&quot;]; attentionNaviVC.tabBarItem = [[UITabBarItem alloc] initWithTitle:@&quot;å…³æ³¨&quot; image:[self scaleImage:attentionUnSelectImg] selectedImage:[self scaleImage:attentionSelectImg]]; attentionNaviVC.tabBarItem.tag = 1;#pragma mark: å‘ç°storyboard UIImage *findSelectImg = [UIImage imageNamed:@&quot;findSelect.png&quot;]; UIImage *findUnSelectImImg = [UIImage imageNamed:@&quot;findUnSelect.png&quot;]; UIStoryboard *findSB = [UIStoryboard storyboardWithName:@&quot;Find&quot; bundle:nil]; UINavigationController *findNaviVC = [findSB instantiateViewControllerWithIdentifier:@&quot;findNavigationC&quot;]; findNaviVC.tabBarItem = [[UITabBarItem alloc] initWithTitle:@&quot;å‘ç°&quot; image:[UIImage imageWithCGImage:findUnSelectImImg.CGImage scale:1.5 orientation:findUnSelectImImg.imageOrientation] selectedImage:[UIImage imageWithCGImage:findSelectImg.CGImage scale:1.5 orientation:findSelectImg.imageOrientation]]; [findNaviVC.tabBarItem setImageInsets:UIEdgeInsetsMake(-14, 0, 14, 0)]; findNaviVC.tabBarItem.tag = 2; findNaviVC.tabBarItem.selectedImage = [[UIImage imageNamed:@&quot;findSelect.png&quot;] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]; findNaviVC.tabBarItem.image = [[UIImage imageNamed:@&quot;findUnSelect.png&quot;] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];#pragma mark: è´­ç‰©è½¦storyboard UIImage *goodsCarSelectImg = [UIImage imageNamed:@&quot;goodsCarSelect.png&quot;]; UIImage *goodsCarUnSelectImg = [UIImage imageNamed:@&quot;goodsCarUnSelect.png&quot;]; UIStoryboard *goodsCarSB = [UIStoryboard storyboardWithName:@&quot;GoodsCar&quot; bundle:nil]; UINavigationController *goodsCarNaviVC = [goodsCarSB instantiateViewControllerWithIdentifier:@&quot;goodsCarNavigationC&quot;]; goodsCarNaviVC.tabBarItem = [[UITabBarItem alloc] initWithTitle:@&quot;è´­ç‰©è½¦&quot; image:[self scaleImage:goodsCarUnSelectImg] selectedImage:[self scaleImage:goodsCarSelectImg]]; goodsCarNaviVC.tabBarItem.tag = 3;#pragma mark: ä¸ªäººä¸­å¿ƒstoryboard UIImage *mineCenterSelectImg = [UIImage imageNamed:@&quot;mineCenterSelect.png&quot;]; UIImage *mineCenterUnSelectImg = [UIImage imageNamed:@&quot;mineCenterUnSelect.png&quot;]; UIStoryboard *mineCenterSB = [UIStoryboard storyboardWithName:@&quot;MineCenter&quot; bundle:nil]; UINavigationController *mineCenterNaviVC = [mineCenterSB instantiateViewControllerWithIdentifier:@&quot;mineCenterNavigationC&quot;]; mineCenterNaviVC.tabBarItem = [[UITabBarItem alloc] initWithTitle:@&quot;æˆ‘&quot; image:[self scaleImage:mineCenterUnSelectImg] selectedImage:[self scaleImage:mineCenterSelectImg]]; mineCenterNaviVC.tabBarItem.tag = 4;#pragma mark: è¿æ¥ self.viewControllers = @[hostNaviVC, attentionNaviVC, findNaviVC, goodsCarNaviVC, mineCenterNaviVC]; æœ€åï¼Œ åˆ›å»ºå„æ¨¡å—å¯¹åº”çš„è§†å›¾æ§åˆ¶å™¨ï¼Œå°†å…¶åŒ¹é…åˆ°StoryBoardä¸­çš„æ§ä»¶ä¸­ã€‚ ä¸‰ã€ APPä½¿ç”¨æµç¨‹APPè¿è¡Œçš„æµç¨‹ä¸€èˆ¬ä¸ºï¼Œé¦–å…ˆæ‰§è¡ŒAppDelegateçš„ä»£ç†æ–¹æ³•didFinishLaunchingï¼Œè¿›å…¥å¯åŠ¨é¡µï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯é¦–æ¬¡ä½¿ç”¨APPï¼Œå¦‚æœæ˜¯è¿›å…¥æ¬¢è¿é¡µï¼Œå¦åˆ™ç›´æ¥éªŒè¯å¹¿å‘Šé¡µéªŒè¯ï¼Œè¿›è€Œè¿›å…¥åŠ è½½å¹¿å‘Šé¡µï¼Œæœ€åè¿›å…¥é¦–é¡µã€‚å…·ä½“æµç¨‹å›¾å¦‚ä¸‹ï¼šæˆ‘çš„æ¡†æ¶ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªæµç¨‹æ­å»ºã€‚ ç»“è¯­æˆ˜æˆ˜å…¢å…¢ï¼Œå¦‚å±¥è–„å†°ï¼Œæœ›å†æ¥å†å‰ï¼Œä¸‹ä¸ºå·¥ç¨‹æ‰˜ç®¡åœ°å€ï¼ŒEVNEstorePlatform GitHubï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œè¯·ä¸è¦åå•¬ç‚¹èµï¼Œå¯ä»¥åœ¨GitHubç»™ä¸ªstarï¼ŒO(âˆ©_âˆ©)Oè°¢è°¢â€¦â€¦]]></content>
      <categories>
        <category>iOSè¿›é˜¶ç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>CocoaPods</tag>
        <tag>Demo</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSè‡ªç­¾åHTTPSè¯ä¹¦å•å‘æ ¡éªŒæ–¹æ¡ˆ]]></title>
    <url>%2F2017%2F01%2F13%2F201701131803%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šiOSè‡ªç­¾åHTTPSè¯ä¹¦å•å‘æ ¡éªŒæ–¹æ¡ˆ å‰è¨€è¿™ä¸¤å¤©å…¬å¸é€‰æ‰€è°“çš„å…ˆè¿›ä¸ªäººï¼Œç»“æœä¹Ÿæ˜¯æˆ‘æœ€æ»¡æ„çš„ï¼Œæ²¡é€‰ä¸Šä½†èƒ½å¾—åˆ°è‡ªå·±èº«è¾¹çš„ä¼™ä¼´å¯¹è‡ªå·±çš„è®¤å¯ï¼Œå¾ˆå¼€å¿ƒï¼Œæ„Ÿå†’ä¹Ÿå¥½äº†å¾ˆå¤šï¼è™½ç„¶çŸ¥é“å¤§å®¶é€‰æˆ‘ï¼Œåªæ˜¯å¯¹æˆ‘å·¥ä½œå±‚é¢çš„è®¤å¯ï¼Œä¸äººå“æ— å…³ï¼Œä½†æˆ‘å®æ„¿ä¼™ä¼´èƒ½å¯¹æˆ‘çš„äººå“å±‚é¢ä¹Ÿæœ‰åŒç­‰è®¤å¯ã€‚ æ¯•ä¸šå·²è¿‘ä¸¤å¹´ï¼Œå‡ºæ¥å·¥ä½œæ—¶é—´æ€»ç®—èµ·æ¥ï¼Œä¹Ÿæœ‰å¿«ä¸‰å¹´äº†ã€‚ä»å¼€å§‹è·Ÿç€å¸ˆå‚…ï¼Œåˆ°æ…¢æ…¢ç‹¬ç«‹ï¼Œå†åˆ°å¸¦æ–°ä¼™ä¼´ä¸€èµ·åšé¡¹ç›®ï¼Œè¿™ä¸€è·¯èµ°æ¥ï¼Œæœ‰è¿‡æ— åŠ©ã€æœ‰è¿‡æ€€ç–‘ï¼Œæœ‰è¿‡ä¸ºä¼™ä¼´â€œç”˜æ„¿ç‹¬è‡ªç¦»å»â€çš„å†²åŠ¨ï¼Œæœ‰è¿‡ä½çº§è¶£å‘³çš„è¯±æƒ‘ï¼Œæœ‰è¿‡æ„ŸåŠ¨ï¼Œæœ‰è¿‡åšå®šï¼Œè¯´æˆ‘å‚»Bä¹Ÿå¥½ï¼Œè¯´æˆ‘æ€æ ·ä¹Ÿç½¢ï¼Œæˆ‘éƒ½å…¨ç›˜æ¥å—ã€‚ è¯´å®è¯ï¼Œæœ‰æ—¶ä¹Ÿä¼šçŸ›ç›¾ã€‚æˆ‘æ˜¯ä¸€ä¸ªâ€œè™šå¿ƒå¬å–åˆ«äººæ„è§â€çš„äººï¼Œåˆ«äººçš„å»ºè®®æˆ‘åæ€åï¼Œé™¤äº†æ€§æ ¼ä½¿ç„¶éƒ¨åˆ†ï¼Œå…¶ä»–å¤§éƒ¨åˆ†æˆ‘éƒ½ä¼šè°ƒæ•´ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ²¡æœ‰ä¸»è§ï¼Œè®¾è®¡ã€æµ‹è¯•æ€ä¹ˆè¯´å°±æ€ä¹ˆæ”¹ï¼Œé¢†å¯¼å®‰æ’å·¥ä½œä¹Ÿå°½é‡å»åšã€‚æ…¢æ…¢çš„å¯¹è‡ªå·±çš„å·¥ä½œæ–¹å¼ä¹Ÿæœ‰è¿‡ç–‘é—®ï¼Œè¿™æ ·åšæ˜¯å¦åˆé€‚ï¼Ÿä¹Ÿæœ‰è´µäººç»™æˆ‘æè¿‡ä¸€äº›ä¸œè¥¿ï¼Œè¯´è®©æˆ‘å­¦ä¼šè¡¨è¾¾è‡ªå·±ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä¹Ÿåšå‡ºäº›è‡ªå·±çš„æ”¹å˜ï¼Œåœ¨æŠ€æœ¯æ–¹é¢ï¼Œæˆ‘å¼€å§‹è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œä¸è¿‡æœ‰æ—¶ä¼šä¸æ³¨æ„è¡¨è¾¾çš„æ–¹æ³•å’Œæ–¹å¼ï¼Œä¹Ÿä¼šç»™é¢†å¯¼ç»™è‡ªå·±é€ æˆäº›è®¸å›°æƒ‘ã€‚ ä¸ç®¡æ€æ ·ï¼ŒçŒ´å¹´å³å°†è¿‡å»ï¼Œè¿™ææ€•æ˜¯å¹´å‰æœ€åä¸€æ¬¡é¡¹ç›®ä¸Šçº¿äº†ï¼Œç»™å¤§å®¶åˆ†äº«ä¸‹å‰å‡ å¤©HTTPSè¯ä¹¦æ ¡éªŒçš„ä¸€äº›ä¸œè¥¿ã€‚è¯´å¥½çš„å†™ç¯‡ã€ŠiOSè‡ªç­¾åHTTPSè¯ä¹¦å•å‘æ ¡éªŒæ–¹æ¡ˆã€‹å‘¢ï¼Œåˆæ‰¯äº†è¿™ä¹ˆå¤šé—²ç¯‡ï¼Œå¯¹å¤§å®¶ä¸ä½ã€‚ HTTPSç®€æè™½è¯´åœ¨å»å¹´åœ£è¯èŠ‚å‰å¤•è‹¹æœå‘å‡ºå…¬å‘Šè¦æ¨è¿ŸATSé€‚é…æˆªæ­¢æ—¶é—´ï¼Œä½†æ—¢ç„¶å®ƒåœ¨iOS9.0å§‹æ¨å‡ºApp Transport Securityï¼Œé€‚é…HTTPSæ˜¯æ—©æ™šçš„äº‹ï¼Œæ€»è¦åšå¥½æŠ€æœ¯å‚¨å¤‡ã€‚ä»¥é„™äººæµ…æ˜¾çš„æŠ€æœ¯è€Œè¨€ï¼Œæˆ‘è§‰å¾—iOS APPé€‚é…HTTPSä¸»è¦æ¶‰åŠä¸‰æ–¹é¢é€‚é…ï¼š æ™®é€šç½‘ç»œè¯·æ±‚ï¼› H5é¡µé¢åŠ è½½ï¼› SDWebImageåŠ è½½HTTPSå›¾ç‰‡ï¼ˆä¸€èˆ¬å…¬å¸æµ‹è¯•åº“ä¼šç”¨åˆ°è‡ªç­¾åè¯ä¹¦ï¼‰ã€‚ æ‰€è°“HTTPSï¼Œå³HTTP+SSL/TSLï¼Œåº•éƒ¨ä¹Ÿå°±æ˜¯åœ¨HTTPåè®®å±‚å’ŒTCP/IPåè®®å±‚ä¹‹é—´æ·»åŠ å®‰å…¨ä¼ è¾“å±‚åè®®SSLï¼Œä»è€Œè¾¾åˆ°å¯¹HTTPæ•°æ®åŒ…åŠ å¯†ä¼ è¾“çš„ç›®çš„ï¼Œ 1234567891011121314sequenceDiagram participant Client participant Server Client-&gt;&gt;Server: ä»¥æ˜æ–‡ä¼ è¾“æ•°æ®ï¼Œä¸»è¦æœ‰å®¢æˆ·ç«¯æ”¯æŒçš„SSLç‰ˆæœ¬ç­‰å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ä¿¡æ¯ Server--&gt;&gt;Server: æœåŠ¡ç«¯é€‰æ‹©åŠ å¯†æ–¹å¼ Server--&gt;&gt;Client: æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯è¿”å›SSLç‰ˆæœ¬ã€éšæœºæ•°ç­‰ä¿¡æ¯ Client-&gt;&gt;Client: æ ¡éªŒæœåŠ¡ç«¯è¯ä¹¦æ˜¯å¦åˆæ³•ã€äº§ç”Ÿéšæœºæ•° Client-&gt;&gt;Server: ä½¿ç”¨æœåŠ¡ç«¯éšæœºæ•°åŠ å¯†æ•°æ®å‘ç»™æœåŠ¡ç«¯ Server--&gt;&gt;Server: æœåŠ¡ç«¯ä½¿ç”¨ç§é’¥è§£å¯†å®¢æˆ·ç«¯æ•°æ® Server--&gt;&gt;Client: ä½¿ç”¨æ”¶åˆ°çš„éšæœºæ•°ï¼ŒåŠ å¯†æ•°æ®ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ Client-&gt;&gt;Client: å®¢æˆ·ç«¯ä½¿ç”¨å…¬é’¥è§£å¯†æ•°æ® ç®€ä¹¦ä¸æ”¯æŒMarkDowné«˜çº§è¯­æ³•ï¼Œä¸Šé¢çš„MarkDownæ–‡æœ¬å¯¹åº”ä¸‹å›¾ï¼š iOSé€‚é…HTTPSæ³¨æ„ç‚¹ ç½‘ç»œè¯·æ±‚NSURLConnection/NSURLSession H5é¡µé¢é€‚é…WKWebView/UIWebView SDWebImageå›¾ç‰‡åŠ è½½é€‚é… ç½‘ç»œè¯·æ±‚éƒ¨åˆ†NSURLConnectioné€‚é…12345678910111213141516171819- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge&#123; if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) &#123; NSURLCredential *credential = [NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust]; [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge]; &#125; else &#123; if ([challenge previousFailureCount] == 0) &#123; [[challenge sender] continueWithoutCredentialForAuthenticationChallenge:challenge]; &#125; else &#123; [[challenge sender] continueWithoutCredentialForAuthenticationChallenge:challenge]; &#125; &#125;&#125; NSURLSessioné€‚é…123456789101112131415161718192021222324252627282930313233/** dispositionï¼šå¦‚ä½•å¤„ç†è¯ä¹¦ NSURLSessionAuthChallengeUseCredential ä½¿ç”¨è¯ä¹¦ NSURLSessionAuthChallengePerformDefaultHandling å¿½ç•¥è¯ä¹¦ é»˜è®¤çš„åšæ³• NSURLSessionAuthChallengeCancelAuthenticationChallenge å–æ¶ˆè¯·æ±‚,å¿½ç•¥è¯ä¹¦ NSURLSessionAuthChallengeRejectProtectionSpace æ‹’ç»,å¿½ç•¥è¯ä¹¦*/#pragma mark - NSURLSessionDelegateä»£ç†æ–¹æ³• HTTPS ---å¼€å§‹---- (void)URLSession:(NSURLSession *)session didReceiveChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition, NSURLCredential *))completionHandler&#123; NSURLSessionAuthChallengeDisposition disposition = NSURLSessionAuthChallengePerformDefaultHandling; __block NSURLCredential *credential = nil; // åˆ¤æ–­æœåŠ¡å™¨è¿”å›çš„è¯ä¹¦æ˜¯å¦æ˜¯æœåŠ¡å™¨ä¿¡ä»»çš„ if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) &#123; credential = [NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust]; if (credential) &#123; disposition = NSURLSessionAuthChallengeUseCredential; // ä½¿ç”¨è¯ä¹¦ &#125; else &#123; disposition = NSURLSessionAuthChallengePerformDefaultHandling; // å¿½ç•¥è¯ä¹¦ é»˜è®¤çš„åšæ³• &#125; &#125; else &#123; disposition = NSURLSessionAuthChallengeCancelAuthenticationChallenge; // å–æ¶ˆè¯·æ±‚,å¿½ç•¥è¯ä¹¦ &#125; if (completionHandler)// å®‰è£…è¯ä¹¦ &#123; completionHandler(disposition, credential); &#125;&#125; H5é¡µé¢é€‚é…åŸºäºWKWebViewçš„H5é¡µé¢HTTPSé€‚é…12345678910#pragma mark: WKWebViewçš„httpsé…ç½®- (void)webView:(WKWebView *)webView didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition disposition, NSURLCredential * _Nullable credential))completionHandler&#123; if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) &#123; NSURLCredential *card = [[NSURLCredential alloc]initWithTrust:challenge.protectionSpace.serverTrust]; completionHandler(NSURLSessionAuthChallengeUseCredential,card); &#125;&#125; åŸºäºUIWebViewçš„H5é¡µé¢HTTPSé€‚é…è¯¦æƒ…è§ï¼šStretchâ€™s stackoverflowç­”æ¡ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445#pragma mark - Webview delegate- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;&#123; NSLog(@&quot;Did start loading: %@ auth:%d&quot;, [[request URL] absoluteString], _authenticated); if (!_authenticated) &#123; _authenticated = NO; _urlConnection = [[NSURLConnection alloc] initWithRequest:_request delegate:self]; [_urlConnection start]; return NO; &#125; return YES;&#125;#pragma mark - NURLConnection delegate- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;&#123; NSLog(@&quot;WebController Got auth challange via NSURLConnection&quot;); if ([challenge previousFailureCount] == 0) &#123; _authenticated = YES; NSURLCredential *credential = [NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust]; [challenge.sender useCredential:credential forAuthenticationChallenge:challenge]; &#125; else &#123; [[challenge sender] cancelAuthenticationChallenge:challenge]; &#125;&#125;- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;&#123; NSLog(@&quot;WebController received response via NSURLConnection&quot;); // remake a webview call now that authentication has passed ok. _authenticated = YES; [_web loadRequest:_request]; // Cancel the URL connection otherwise we double up (webview + url connection, same url = no good!) [_urlConnection cancel];&#125;- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace&#123; return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];&#125; SDWebImageåŠ è½½HTTPSå›¾ç‰‡é€‚é…ä½ç‰ˆæœ¬çš„SDWebImageæ˜¯å¯¹NSURLConnectionåšçš„å°è£…ï¼Œæ–°ç‰ˆæœ¬æ˜¯å¯¹NSURLSessionåšçš„å°è£…ï¼Œé€‚é…HTTPSå›¾ç‰‡ï¼Œè®°å¾—ç¡®å®šè‡ªå·±ä½¿ç”¨çš„SDWebImageç‰ˆæœ¬çš„SDWebImageDownloaderOperationç±»æ˜¯å¦åšè¿‡æ ¡éªŒã€‚å¦‚æœSDWebImageä½¿ç”¨çš„æ˜¯NSURLConnectionçœ‹çœ‹æ–‡ä»¶æ˜¯å¦æœ‰ï¼š 1- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge å¦åˆ™æŸ¥çœ‹SDWebImageDownloaderOperationæ–‡ä»¶ä¸­æ˜¯å¦æœ‰ 1- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didReceiveChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition disposition, NSURLCredential *credential))completionHandler ç¡®å®šå¥½ä¹‹åï¼Œå¦‚æœæ‰€æœ‰å›¾ç‰‡å‡æ˜¯HTTPSçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹UIImageView+WebCacheæ–‡ä»¶ 1234567891011// HTTPSé…ç½®é—®é¢˜ - (void)sd_setImageWithURL:(nullable NSURL *)url &#123;// [self sd_setImageWithURL:url placeholderImage:nil options:0 progress:nil completed:nil]; [self sd_setImageWithURL:url placeholderImage:nil options:SDWebImageAllowInvalidSSLCertificates progress:nil completed:nil]; // HTTPSé…ç½®é—®é¢˜&#125;- (void)sd_setImageWithURL:(nullable NSURL *)url placeholderImage:(nullable UIImage *)placeholder &#123;// [self sd_setImageWithURL:url placeholderImage:placeholder options:0 progress:nil completed:nil]; [self sd_setImageWithURL:url placeholderImage:placeholder options:SDWebImageAllowInvalidSSLCertificates progress:nil completed:nil]; // HTTPSé…ç½®é—®é¢˜&#125; å…¶å®è´¨å°±æ˜¯å°†optionè®¾ç½®ä¸ºSDWebImageAllowInvalidSSLCertificatesï¼Œçœ‹SDWebImageDownloaderOperationæ–‡ä»¶ä½ ä¼šå‘ç°ï¼ŒSDWebImageé‡‡ç”¨ç›´æ¥å¿½ç•¥è¯ä¹¦éªŒè¯çš„æ–¹å¼åŠ è½½çš„ï¼Œæ‰€ä»¥è®¾ç½®SDWebImageAllowInvalidSSLCertificatesæ‰æœ‰æ•ˆã€‚å¦‚æœ‰ä¸ªåˆ«ç‰¹æ®Šæƒ…å†µï¼Œè¦æ”¯æŒæŸäº›HTTPçš„å›¾ç‰‡ï¼ŒæŒ‰ç…§ä¸Šé¢æ–¹æ³•é€‚é…åï¼Œè¿˜éœ€åœ¨plistçš„Exception Domainsæ·»åŠ å“åº”é…ç½®ï¼Œè¯¦æƒ…è§è‹¹æœAPPæ¥å…¥HTTPSå»¶è¿Ÿæˆªæ­¢æ—¶é—´æ˜¯å¦¥åå—ã€‚]]></content>
      <categories>
        <category>iOSç½‘ç»œç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>HTTPS</tag>
        <tag>ATS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸‡å°æ—¶å®šå¾‹çš„é—æ†¾ä¹‹Objective-Cçš„selfä¸super]]></title>
    <url>%2F2016%2F12%2F24%2F201612241709%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šä¸€ä¸‡å°æ—¶å®šå¾‹çš„é—æ†¾ä¹‹Objective-Cçš„selfä¸super Malcolm T.Gladwellè¯´ï¼šâ€œäººä»¬çœ¼ä¸­çš„å¤©æ‰ä¹‹æ‰€ä»¥å“è¶Šéå‡¡ï¼Œå¹¶éå¤©èµ„è¶…äººä¸€ç­‰ï¼Œè€Œæ˜¯ä»˜å‡ºäº†æŒç»­ä¸æ–­çš„åŠªåŠ›ã€‚1ä¸‡å°æ—¶çš„é”¤ç‚¼æ˜¯ä»»ä½•äººä»å¹³å‡¡å˜æˆè¶…å‡¡çš„å¿…è¦æ¡ä»¶ã€‚â€ å¯¹äºä¸€ä¸‡å°æ—¶å®šå¾‹ï¼Œæˆ‘æ˜¯æ·±ä¿¡ä¸ç–‘çš„ï¼Œç„¶è€ŒçœŸçš„å°è¯•åšç€çš„æ—¶å€™ï¼Œæ‰å‘ç°ä¸€ä¸‡å°æ—¶ï¼Œå¯¹äºå¤©èµ„æ„šé’çš„æˆ‘è¿˜è¿œè¿œä¸å¤Ÿã€‚ å­¦ä¹ Objective-Cå·²è¿‘ä¸¤å¹´ï¼Œæ¯å¤©çš„å·¥ä½œå­¦ä¹ çš„å¹³å‡æ—¶é—´ä¹Ÿæ§åˆ¶åœ¨åä¸ªå°æ—¶ä»¥ä¸Šï¼Œæ¸æ¸åœ°ä¸€ç›´ä»¥ä¸ºè‡ªå·±å¯¹å…¶æœºåˆ¶åŠè¯­æ³•æœ‰äº†ä¸€å®šè®¤è¯†ï¼Œç„¶è€Œçœ‹åˆ°åˆ«äººå¯¹ä¸¤ä¸ªç¼–ç¨‹ä¸­æœ€å¸¸ç”¨åˆ°å…³é”®å­—selfã€superçš„ç†è§£çš„æ—¶å€™ï¼Œå®åœ¨ç¾æ„§ï¼Œæ·±æ„Ÿè‡ªå·±å¯¹å¹³æ—¥ä½¿ç”¨çš„ä¸œè¥¿äº†è§£è¿˜å¤ªå°‘å¤ªå°‘ã€‚ æ­£æ–‡å½“ç„¶ï¼Œè¿™ä¸€åˆ‡éƒ½è¦ä»ä¸€ä¸ªModelå’Œä¸€ä¸ªç½‘ä¸Šçš„ç¬”è¯•é¢˜è¯´èµ·ï¼š 1234567891011121314151617181920211ã€ä¸€ä¸ªModel#import &lt;Foundation/Foundation.h&gt;@interface EVNHelper : NSObject- (instancetype)init;@end#import &quot;EVNHelper.h&quot;@implementation EVNHelper- (instancetype)init&#123; self = [super init];// ï¼Ÿï¼Ÿï¼Ÿ if (self) &#123; // other init code &#125; return self;&#125;@end 1234567891011121314151617181920212ã€ ä¸€ä¸ªç¬”è¯•é¢˜- (instancetype)init&#123; self = [super init]; if (self) &#123; NSLog(@&quot;self className is %@&quot;, NSStringFromClass([self class])); NSLog(@&quot;super className is %@&quot;, NSStringFromClass([super class])); NSLog(@&quot;self superclass className is %@&quot;, NSStringFromClass([self superclass])); NSLog(@&quot;super superclass className is %@&quot;, NSStringFromClass([super superclass])); &#125; return self;&#125;@endè¾“å‡ºï¼š 2016-12-24 16:04:32.600 Demo[6009:1006834] self className is EVNHepler 2016-12-24 16:04:32.601 Demo[6009:1006834] super className is EVNHepler 2016-12-24 16:04:32.601 Demo[6009:1006834] self superclass className is NSObject 2016-12-24 16:04:32.602 Demo[6009:1006834] super superclass className is NSObject å¯¹åº”çš„é—®é¢˜ä¹Ÿæ¥äº†ï¼š1ã€å­ç±»åˆå§‹åŒ–ä¸ºä»€ä¹ˆè¦å†™self = [super init]ï¼Œæ„ä¹‰ï¼Ÿ2ã€ä¸ºä»€ä¹ˆ[self class]å’Œ [super class]ï¼›[self superclass]å’Œ[super superclass]è¾“å‡ºç›¸åŒï¼Ÿ å¯åˆ°åº•selfå’Œsuperæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿï¼ˆç”±äºå¯¹runtimeæ‡‚å¾—å¤ªå°‘ï¼Œæ€•è¯¯äººå­å¼Ÿï¼Œæš‚ä¸æ‰¯åº•å±‚ä»£ç ï¼Œåªè¯´è‡ªå·±èƒ½çœ‹åˆ°çš„ï¼‰ selfä¹‹å‰æˆ‘çš„ç†è§£ï¼Œselfæ˜¯å¯¹è±¡æŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡ã€‚å…¶å®è¿™ç§ç†è§£æ˜¯ä¸å‡†ç¡®çš„ï¼Œå› ä¸ºåœ¨é™æ€æ–¹æ³•self ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼ˆå¦‚ä¸‹ä»£ç ï¼‰ï¼Œè¿™æ€ä¹ˆè§£é‡Šå‘¢ï¼ 12345678+ (void)helperMethodA&#123; [self helperMethodB];&#125;+ (void)helperMethodB&#123; NSLog(@&quot;asdfasdfasd&quot;);&#125; å¸¦ç€è¿™ä»½å¥½å¥‡ï¼Œæœ€ç»ˆæˆ‘åœ¨NSObjectåè®®ä¸­æ‰¾åˆ°äº†selfï¼ŒåŸæ¥selfæ˜¯è¿”å›instancetypeç±»å‹çš„ä»£ç†æ–¹æ³•ï¼Œä½†åˆæœ‰äº›å¥‡æ€ªï¼Œæˆ‘ä»¬åœ¨è‡ªå®šä¹‰å­ç±»çš„æ—¶å€™å¹¶æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºselfçš„åŠŸèƒ½ï¼ŒOCå·²ç»å¸®æˆ‘ä»¬å®ç°ï¼Œåªæ˜¯æˆ‘ä»¬çœ‹ä¸åˆ°è€Œå·²ã€‚è¿™æ ·å°±æ˜ç¡®äº†ï¼Œselfæœ€ç»ˆè¿”å›çš„ç»“æœå°±æ˜¯instancetypeç±»å‹çš„ä¸œè¥¿ï¼Œå®ƒæ˜¯åŠ¨æ€ç±»å‹ï¼Œæœ€ç»ˆè¿è¡Œæ—¶æ‰ä¼šç¡®å®šï¼Œå®ä¾‹æ–¹æ³•è¿”å›å®ä¾‹ç±»å‹ã€é™æ€æ–¹æ³•è¿”å›çš„æ˜¯Classã€‚1234567891011121314#include &lt;objc/objc.h&gt;#include &lt;objc/NSObjCRuntime.h&gt;@class NSString, NSMethodSignature, NSInvocation;@protocol NSObject- (BOOL)isEqual:(id)object;@property (readonly) NSUInteger hash;@property (readonly) Class superclass;......- (Class)class OBJC_SWIFT_UNAVAILABLE(&quot;use &apos;anObject.dynamicType&apos; instead&quot;);- (instancetype)self;......@end superåœ¨Foundationæ¡†æ¶ä¸­ï¼Œsuperæ˜¯æ‰¾ä¸åˆ°çš„ï¼Œè¯¥å…³é”®å­—åº”è¯¥æ˜¯æ¯”selfæ›´ä¸ºå¥‡ç‰¹çš„ä¸œè¥¿ã€‚è™½ç„¶æ‰¾ä¸åˆ°superï¼Œä½†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»“æ„ä½“objc_superï¼Œåœ¨å®˜æ–¹è§£é‡Šä¸­æˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€äº›ç«¯å€ªã€‚objc_super:The compiler generates an objc_super data structure when it encounters the super keyword as the receiver of a message. It specifies the class definition of the particular superclass that should be messaged. å¤§è‡´æ„æ€å°±æ˜¯ï¼Œå½“é‡åˆ°superå…³é”®å­—æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªobjc_superç»“æ„ä½“ï¼Œä½œä¸ºæ¶ˆæ¯çš„æ¥æ”¶è€…ï¼Œobjc_superç»“æ„ä½“ä½¿å¾—æ¥æ”¶æ¶ˆæ¯çš„çˆ¶ç±»çš„å®šä¹‰è¢«æ˜ç¡®åŒ–ã€‚æ‰€ä»¥ï¼Œsuperçš„å«ä¹‰åº”è¯¥æ˜¯ä¸€ç§ç¼–è¯‘æŒ‡ä»¤ï¼Œå®ƒçš„ä½œç”¨ç”¨æ¥ç»™çˆ¶ç±»å‘é€æ¶ˆæ¯ï¼Œå¹¶è¿”å›æ¶ˆæ¯å“åº”çš„ç»“æœã€‚12345678910111213141516171819#include &lt;objc/objc.h&gt;#include &lt;objc/runtime.h&gt;#pragma GCC system_header#ifndef OBJC_SUPER#define OBJC_SUPER/// Specifies the superclass of an instance. struct objc_super &#123; /// Specifies an instance of a class. __unsafe_unretained id receiver; /// Specifies the particular superclass of the instance to message. #if !defined(__cplusplus) &amp;&amp; !__OBJC2__ __unsafe_unretained Class class;#else __unsafe_unretained Class super_class;#endif&#125;; çŸ¥æ‚‰äº†è¿™ä¸¤ç‚¹ï¼Œä¸Šé¢çš„ä¸¤ä¸ªé—®é¢˜ä¹Ÿå°±è¿åˆƒè€Œè§£äº†ã€‚ è§£ç­”ï¼šé—®é¢˜ä¸€ï¼šself = [super init]æ˜¯é¢å‘å¯¹è±¡æ€æƒ³çš„ä¸€ç§ä½“ç°ï¼Œæ„ä¹‰å°±æ˜¯ï¼Œåˆ©ç”¨çˆ¶ç±»çš„initæ–¹æ³•ä¸ºå­ç±»åˆå§‹åŒ–çˆ¶ç±»çš„å…¬æœ‰å±æ€§ã€‚é—®é¢˜äºŒï¼šç†è§£è¿™ä¸ªå…ˆè¦æ˜ç¡®allocå’Œinitçš„åŒºåˆ«ï¼Œallocä¸ºå¯¹è±¡å¼€è¾Ÿå†…å­˜ï¼Œinitæ˜¯å¯¹è±¡åˆå§‹åŒ–ï¼Œæ‰€ä»¥ï¼Œ[super init] æ˜¯åˆå§‹åŒ–åœ¨å­ç±»ä¸Šçš„ï¼Œsuperå‘å‡ºæ¶ˆæ¯çš„ä¸»ä½“å¯¹è±¡æ˜¯å­ç±»ï¼Œå’Œselfæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ classæ–¹æ³•å’Œselfç±»ä¼¼æ˜¯NSObjectåè®®ä¸­çš„ä»£ç†æ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºclassçš„åŠŸèƒ½ï¼ŒOCä¹Ÿå·²ç»å¸®æˆ‘ä»¬å®ç°åœ¨æ¯ä¸ªå­ç±»ä¸­ï¼Œåªæ˜¯æˆ‘ä»¬çœ‹ä¸åˆ°è€Œå·²ï¼Œæ‰€ä»¥ä¸ç®¡æ˜¯superè¿˜æ˜¯selfå‘å‡ºçš„classæ¶ˆæ¯ï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½åœ¨å­ç±»ä¸­ï¼Œè¿”å›çš„éƒ½æ˜¯å­ç±»ã€‚ å‚è€ƒï¼š [1] http://www.cnblogs.com/wustlj/archive/2011/11/07/2239635.html [2] http://blog.csdn.net/aoyuehan11/article/details/10268231 [3] ç¦…ä¸Objective-Cç¼–ç¨‹è‰ºæœ¯ ä¸­æ–‡ç‰ˆ ; ç¦…ä¸Objective-Cç¼–ç¨‹è‰ºæœ¯ è‹±æ–‡ç‰ˆ [4] é—®é¢˜1ï¼šStack-overflowå›ç­”]]></content>
      <categories>
        <category>iOSåŸºç¡€ç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‹¹æœAPPæ¥å…¥HTTPSå»¶è¿Ÿæˆªæ­¢æ—¶é—´æ˜¯å¦¥åå—]]></title>
    <url>%2F2016%2F12%2F23%2F201612230912%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šè‹¹æœAPPæ¥å…¥HTTPSå»¶è¿Ÿæˆªæ­¢æ—¶é—´æ˜¯å¦¥åå— å¦¥åï¼Ÿæ—¶é—´ä¸´è¿‘2017å¹´1æœˆ1æ—¥ï¼Œå¯¹äºå…¶ä»–å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯å†æ™®é€šä¸è¿‡çš„å…ƒæ—¦ã€‚ç„¶è€Œå¯¹äºæˆ‘ç­‰iOSå°æ°‘è€Œè¨€ï¼Œæ€•è¦å½»å¤œéš¾çœ äº†ã€‚è·Ÿé¢†å¯¼è¯´ï¼šâ€œè€å¤§ï¼Œå…ƒæ—¦ä¹‹åï¼Œè‹¹æœä¸è®©â€œè£¸å¥”â€äº†â€ï¼Œé¢†å¯¼æ€»æ˜¯ä¸€å‰¯ä¸å±‘çš„çœ¼ç¥ï¼šâ€œç­‰ç­‰çœ‹ï¼Œè½¦åˆ°å±±å‰è‡ªæœ‰è·¯ï¼Œæ€»ä¼šæœ‰åŠæ³•çš„â€ã€‚ å¥½æ‰“è„¸ï¼Œè¿™ä¸‹å¥½äº†ï¼Œ12æœˆ21æ—¥ï¼Œè‹¹æœå‘æ–‡ï¼Œè‹¹æœAPPæ¥å…¥HTTPSæˆªæ­¢æ—¥æœŸå»¶è¿Ÿï¼Œå…·ä½“æ—¥æœŸå¾…å®šâ€¦â€¦ å¥½å§ï¼é¢†å¯¼ï¼Œæ‚¨æ˜¯å¯¹çš„ï¼ çœ‹åˆ°è¿™åˆ™æ¶ˆæ¯ï¼Œå¾ˆå¤šäººéƒ½åœ¨ä¸ºè¿˜èƒ½ç»§ç»­â€œè£¸å¥”â€è€Œæ¬¢å‘¼é›€è·ƒï¼Œè‡ªæ¬ºæ¬ºäººçš„ä»¥ä¸ºè¿™æ˜¯è‹¹æœå¦¥åçš„ç»“æœï¼Œäº‹å®çœŸçš„å¦‚æ­¤å—ï¼Ÿå¯¹äºè¿™ç§è§‚ç‚¹ï¼Œæˆ‘åªèƒ½é€ä½ ä¸€å¥ï¼Œåˆ«é«˜å…´å¤ªæ—©ï¼Œäººå®¶åªæ˜¯å‘Šè¯‰ä½ ï¼šâ€œå°å­ï¼Œè¿™æ¬¡æˆ‘ä»¬æ˜¯è¦ç©çœŸçš„â€ã€‚ å¼ºåˆ¶ä½¿ç”¨ATSæ˜¯ä¸æ˜¯è‹¹æœè¿‡äºæ¿€è¿›ï¼Œé‚£ä»¥åä¸Šçº¿ç‰ˆæœ¬æ˜¯ä¸æ˜¯å¿…é¡»è¦ä¹°è¯ä¹¦å•¦ï¼Œä¹Ÿä¸è§å¾—ï¼Œå…¶å®iOSä¾æ—§å¯ä»¥ä½¿ç”¨HTTPï¼Œåªæ˜¯æˆ‘ä»¬ä¸Šçº¿çš„æ—¶å€™ï¼Œè¦åšå‡ºåˆç†è§£é‡Šè€Œå·²ã€‚æ“¦è¾¹çƒè¿˜æ˜¯å¯ä»¥æ‰“ä¸€ä¸‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨info.plistä¸­ï¼Œå°†æœåŠ¡ç«¯hostï¼šxxx.comæ·»åŠ åˆ°Exception Domainsä¸­ï¼Œåˆ†åˆ«è®¾ç½®(å¯æ‚²çš„æ˜¯æ“¦è¾¹çƒåªèƒ½iOS10+)ï¼šâ•®(â•¯_â•°)â•­12345678NSIncludesSubdomains: YES; // å«ä¹‰æ˜¯å­åŸŸåæ˜¯å¦é€‚ç”¨NSExceptionAllowsInsecureHTTPLoads: YES; // æ˜¯å¦å…è®¸ä¸å®‰å…¨HTTPè´Ÿè½½NSExceptionRequiresForwardSecrecy: NO; // æ˜¯å¦é€‚ç”¨å‰ç½®åŠ å¯†æˆ–è€…NSIncludesSubdomains: YES;NSThirdPartyExceptionAllowsInsecureHTTPLoads: YES; // æ˜¯å¦å…è®¸ç¬¬ä¸‰æ–¹ä¸å®‰å…¨HTTPè´Ÿè½½NSThirdPartyExceptionRequiresForwardSecrecy: NO; // ç¬¬ä¸‰æ–¹æ˜¯å¦é€‚ç”¨å‰ç½®åŠ å¯† å³ï¼Œå°†åŸŸåxxx.comé¿å¼€ATSéªŒè¯ï¼Œä¾æ—§æ”¯æŒHTTPï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦è§£é‡Šè¯´æ˜ï¼Œå¯ä»¥è¯´éœ€è¦è®¿é—®çš„åŸŸåæ˜¯ç¬¬ä¸‰æ–¹çš„ï¼Œä»–ä»¬ä¸æ”¯æŒHTTPSï¼Œä¸è¿‡å¦‚æœè®¿é—®çš„æ˜¯è‡ªå·±çš„æœåŠ¡å™¨çš„è¯ï¼Œè¿™ä¸ªç†ç”±æœ‰ç‚¹æ‚¬iOSå–µç¥[2]ã€‚ä¸è¿‡ä¸ºç¨³å¦¥èµ·è§ï¼Œæˆ‘ä»¬è¿˜æ˜¯å°½å¿«é€‚é…HTTPSä¸ºå¥½ã€‚1234567891011121314151617181920212223info.plist code:&lt;key&gt;NSExceptionDomains&lt;/key&gt;&lt;dict&gt; &lt;key&gt;xxx.com&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt; NSExceptionAllowsInsecureHTTPLoads &lt;/key&gt; &lt;true/&gt; &lt;key&gt; NSExceptionRequiresForwardSecrecy &lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; ...... &lt;key&gt;weibo.cn&lt;/key&gt; &lt;dict&gt; &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt; &lt;string&gt;TLSv1.0&lt;/string&gt; &lt;key&gt;NSIncludesSubdomains&lt;/key&gt; &lt;true/&gt; &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt;&lt;/dict&gt; å‚è€ƒï¼šã€1ã€‘ è‹¹æœATSï¼ˆå¼ºåˆ¶HTTPSï¼‰å®¡æ ¸æ–°æ”¿è§£ç ã€2ã€‘å…³äº iOS 10 ä¸­ ATS çš„é—®é¢˜]]></content>
      <categories>
        <category>iOSç½‘ç»œç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>HTTPS</tag>
        <tag>ATS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæŒ‡çº¹è¯†åˆ«ç™»å½•æµç¨‹åŠå®ç°]]></title>
    <url>%2F2016%2F10%2F19%2F201610191550%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šiOSæŒ‡çº¹è¯†åˆ«ç™»å½•æµç¨‹åŠå®ç° é—²è°ˆæœ€è¿‘ä¸€ç›´åœ¨è¿½é’äº‘å¿—ï¼Œæ€»è§‰å¾—ç”µè§†å‰§æ²¡æœ‰å°è¯´æ¥çš„ç²¾å½©ã€‚æ˜¯çš„ï¼Œå¤§å’–ä»¬æ¼”æŠ€å ªç§°æƒŠè‰³ï¼Œå‰§æƒ…æ”¹ç¼–ä¹Ÿå¾ˆç´§å‡‘ï¼Œä½†ä¸å¾—ä¸è¯´å¾ˆå¤šä¸œè¥¿å•é æ¼”æ˜¯è¾¾ä¸åˆ°çš„ï¼Œä¸»äººå…¬æ¯ä¸€åˆ»çš„å†…å¿ƒä¹Ÿåªèƒ½åœ¨å°è¯´ä¸­æ‰èƒ½çœ‹çš„è´´åˆ‡ï¼ˆä¸ºäº†è£…Xï¼Œå“¥ä¸æƒœäºŒç™¾ä¸¤ä¹°äº†ä¸€æ²“æ­£ç‰ˆå…¸è—ç‰ˆï¼‰ã€‚ çœ‹è¿‡çš„ç«¥é‹çŸ¥é“ï¼Œå¼ å°å‡¡æ‰‹ä¸­çš„æ³•å®ï¼Œæ˜¯ç”±æ‘„é­‚ä¸å—œè¡€ç ä»¥å¼ å°å‡¡ç²¾è¡€ä¸ºåª’æ·¬ç‚¼è€Œæˆã€‚è€Œä¸”æ­¤æ³•å®ï¼Œæœ‰ä¸€ç‰¹å¤§ä¼˜ç§€å“è´¨ï¼Œé‚£å°±æ˜¯é™¤äº†ä¸å¼ å°å‡¡æœ‰è¡€ç¼˜å…³ç³»çš„äººä¹‹å¤–ï¼Œå³ä¾¿ä½ æœ‰é€šå¤©æœ¬é¢†ä¹Ÿä¸èƒ½æ“æ§ï¼Œå¿ è¯šå¦‚æ­¤å¤«å¤ä½•æ±‚å•Šï¼Œè¯´åˆ°è¿™é‡Œå¤§æ¦‚å°±æ‰¯åˆ°æ­£é¢˜äº†ï¼Œå¯¹çš„ï¼Œæ­¤æ³•å®è‡ªå¸¦å®‰å…¨éªŒè¯åŠŸèƒ½ï¼Œç±»ä¼¼æˆ‘ä»¬ä»Šå¤©çš„å¯†ç æ ¡éªŒä¸æŒ‡çº¹è¯†åˆ«éªŒè¯åŠŸèƒ½ã€‚ æŒ‡çº¹è¯†åˆ«ç®€æè‹¹æœè®¾è®¡çš„iOSæ˜¯ä»¥å®‰å…¨æ€§ä¸ºæ ¸å¿ƒçš„ï¼Œä¸ç®¡æ˜¯æ²™ç›’æœºåˆ¶ï¼Œè¿˜æ˜¯ä»£ç ç­¾åç­‰ï¼Œä»–ä»¬çš„æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†å®‰å…¨ã€‚ è‡ªiPhone 5Så§‹ï¼Œè‹¹æœå…¬å¸æ¨å‡ºäº†å…¨æ–°ç”Ÿç‰©å®‰å…¨è¯†åˆ«æŠ€æœ¯â€”æŒ‡çº¹è¯†åˆ«éªŒè¯ï¼ˆTouch IDï¼‰ã€‚ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´å¿«ã€æ›´è½»æ¾åœ°å¯¹è®¾å¤‡è¿›è¡Œå®‰å…¨çš„è®¿é—®ã€‚å¯è´µçš„æ˜¯ï¼ŒTouch IDåšåˆ°äº†ä»ä»»æ„è§’åº¦è¯»å–æŒ‡çº¹æ•°æ®ï¼Œå…‹æœäº†åŸºäºå¯†ç è¿›è¡Œé”å®šçš„ä¸ä¾¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè‹¹æœè¿˜åŠ å…¥å¿…é¡»è¿›è¡Œå¯†ç æ ¡éªŒçš„åœºæ™¯ï¼Œè¿›ä¸€æ­¥ç¡®ä¿å®‰å…¨ï¼Œä¾‹å¦‚ã€1ã€‘: åˆšå¼€æœºæˆ–é‡å¯ï¼› è¶…è¿‡ 48 å°æ—¶æœªè§£é”è®¾å¤‡ï¼› è®¾å¤‡æ”¶åˆ°äº†è¿œç¨‹é”å®šå‘½ä»¤ï¼› äº”æ¬¡æœªèƒ½æˆåŠŸåŒ¹é…æŒ‡çº¹ï¼› è¿›å…¥Touch IDè®¾ç½®æ¨¡å—æˆ–æ›´æ–°æ–°æŒ‡çº¹ï¼› æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œè‹¹æœå…¬å¸æä¾›Touch IDç»™ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œç¨‹åºåªä¼šæ”¶åˆ°è®¤è¯æ˜¯å¦æˆåŠŸçš„é€šçŸ¥ï¼Œè€Œæ— æ³•è®¿é—® Touch ID æˆ–ä¸å·²æ³¨å†ŒæŒ‡çº¹ç›¸å…³çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹å¯¹å®‰å…¨è€Œè¨€å°¤ä¸ºé‡è¦ã€‚ ä¸ºäº†è·å¾—æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå¾ˆå¤šé“¶è¡Œç±»ã€æ”¯ä»˜ç±»APPéƒ½é›†æˆäº†æŒ‡çº¹ã€æ‰‹åŠ¿ç­‰äºŒæ¬¡éªŒè¯åŠŸèƒ½ã€‚ä»Šå¤©æˆ‘ä»¬å°±é‡ç‚¹æ¥è°ˆè°ˆTouch IDé›†æˆåˆ°APPçš„å…·ä½“æµç¨‹åŠå®ç°ã€‚ æµç¨‹åˆ†ææŒ‡çº¹ç™»å½•æµç¨‹ï¼šäºŒæ¬¡å¯åŠ¨åè¯†åˆ«ç™»å½•ï¼š ä½¿ç”¨è¿‡æŒ‡çº¹ç™»å½•çš„æœ‹å‹ï¼Œå¤§æ¦‚éƒ½çŸ¥é“ä¸Šé¢çš„æµç¨‹ã€‚è¿™ä¸ªä¸šåŠ¡å®ç°çš„éš¾ç‚¹åœ¨äºï¼Œé¦–æ¬¡ç™»å½•æˆåŠŸå¹¶å¯ç”¨æŒ‡çº¹æˆæƒâ€”&gt;é€€å‡ºAPPåâ€”&gt;äºŒæ¬¡å¯åŠ¨APPï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯å¦è¦å¯ç”¨æŒ‡çº¹ç™»å½•éªŒè¯å‘¢ï¼Ÿè¿™æ—¶å°±éœ€è¦æˆ‘ä»¬å¯¹æ•°æ®æŒä¹…åŒ–å’Œæ•°æ®å…±äº«æœ‰è¾ƒæ·±çš„ç†è§£ï¼Œå¾ˆå¤šAPPå¼€å‘è€…ï¼Œåœ¨å¼€å‘ç™»å½•ä¿æŒçš„æ—¶å€™ï¼Œå¤§éƒ½ä¼šä½¿ç”¨æŒä¹…åŒ–æ•°æ®çš„æ–¹å¼ï¼Œå­˜å‚¨æˆåŠŸç™»å½•çš„æ ‡è®°ã€‚ä½†å¯¹äºå®‰å…¨æ€§è¾ƒé«˜çš„APPï¼Œæ¯æ¬¡é‡æ–°å¯åŠ¨æ—¶éƒ½ä¼šæ ¡éªŒç™»å½•çŠ¶æ€ï¼Œå•é æŒä¹…åŒ–æ•°æ®æ˜¯ä¸å¤Ÿçš„ã€‚ æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šé€šè¿‡ä¸‰ä¸ªæ•°æ®è¿›è¡Œç™»å½•ä¿æŒï¼Œ loginStateï¼šæŒä¹…åŒ–æ•°æ®ï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·ç™»å½•æˆåŠŸï¼Œæœªæ¿€æ´»çŠ¶æ€ï¼› startAutoLoginStateï¼šæŒä¹…åŒ–æ•°æ®ï¼Œæ˜¯å¦å¼€å¯æŒ‡çº¹è¯†åˆ«æˆæƒï¼› isAppCurrentLoginStateï¼šå…±äº«æ•°æ®ï¼Œç™»å½•æ¿€æ´»çŠ¶æ€ï¼Œè¯¥çŠ¶æ€çš„ç‰¹ç‚¹ï¼Œæ¯æ¬¡é‡æ–°å¯åŠ¨APPéƒ½ä¼šé‡æ–°åˆå§‹åŒ–æ•°æ®ã€‚ é¦–æ¬¡ç™»å½•ï¼šä¸‰ä¸ªæ•°æ®å˜åŒ–æƒ…å†µï¼Œ çŠ¶æ€ loginState startAutoLoginState isAppCurrentLoginState ç™»å½•ä¹‹å‰ nilæˆ–NO nilæˆ–NO NO ç™»å½•æˆåŠŸ YES nilæˆ–NO YES å¯ç”¨æŒ‡çº¹æˆæƒ YES YES YES ä¸å¯ç”¨æˆæƒ YES NO YES äºŒæ¬¡éªŒè¯ç™»å½•ï¼ˆæŒ‡çº¹ç™»å½•ï¼‰ï¼šä¸‰ä¸ªæ•°æ®å˜åŒ–æƒ…å†µï¼Œ å¦‚æœloginStateå’ŒstartAutoLoginStateåŒä¸ºYESï¼Œå³å¯è¿›è¡ŒæŒ‡çº¹ç™»å½•éªŒè¯ï¼Œä»¥ä¸‹ä¸ºæ•°æ®å˜åŒ–æƒ…å†µï¼› çŠ¶æ€ loginState startAutoLoginState isAppCurrentLoginState éªŒè¯ä¹‹å‰ YES YES NO éªŒè¯å¤±è´¥ NO YES NO éªŒè¯æˆåŠŸ YES YES YES å¦åˆ™ï¼Œé‡æ–°ç™»å½•ã€‚ æ ¸å¿ƒä»£ç å®ç°åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒæŒ‡çº¹è¯†åˆ«123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒæŒ‡çº¹è¯†åˆ« */- (IBAction)loginBtnAction:(UIButton *)sender&#123; [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:YES] forKey:@&quot;loginState&quot;]; EVNHelper *helper = [EVNHelper shareHelper]; helper.isAppCurrentLoginState = YES; LAContext *context = [[LAContext alloc] init]; // åˆå§‹åŒ–ä¸Šä¸‹æ–‡å¯¹è±¡ NSError *error = nil; // åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒæŒ‡çº¹è¯†åˆ«åŠŸèƒ½ if ([context canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;error]) &#123; // æ”¯æŒæŒ‡çº¹éªŒè¯ UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@&quot;ç™»å½•æˆåŠŸï¼&quot; message:@&quot;æ˜¯å¦å¯ç”¨æŒ‡çº¹ç™»å½•&quot; preferredStyle:UIAlertControllerStyleAlert]; __weak typeof (self) weakSelf = self; UIAlertAction *cancelAction = [UIAlertAction actionWithTitle:@&quot;ç¨å&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:NO] forKey:@&quot;startAutoLoginState&quot;]; weakSelf.transLoginStateBlock(); // å›ä¼  [self dismissViewControllerAnimated:YES completion:nil]; &#125;]; UIAlertAction *startUseAction = [UIAlertAction actionWithTitle:@&quot;å¯ç”¨&quot; style:UIAlertActionStyleDestructive handler:^(UIAlertAction * _Nonnull action) &#123; [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:YES] forKey:@&quot;startAutoLoginState&quot;]; weakSelf.transLoginStateBlock(); // å›ä¼  [self dismissViewControllerAnimated:YES completion:nil]; &#125;]; [alertController addAction:cancelAction]; [alertController addAction:startUseAction]; [self presentViewController:alertController animated:YES completion:nil]; &#125; else &#123; [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:NO] forKey:@&quot;startAutoLoginState&quot;]; self.transLoginStateBlock(); // å›ä¼  [self dismissViewControllerAnimated:YES completion:nil]; &#125;&#125; æŒ‡çº¹ç™»å½•éªŒè¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129/** * æŒ‡çº¹ç™»å½•éªŒè¯ */- (void)loadAuthentication&#123; __weak typeof(self) weakSelf = self; LAContext *myContext = [[LAContext alloc] init]; // è¿™ä¸ªå±æ€§æ˜¯è®¾ç½®æŒ‡çº¹è¾“å…¥å¤±è´¥ä¹‹åçš„å¼¹å‡ºæ¡†çš„é€‰é¡¹ myContext.localizedFallbackTitle = @&quot;å¿˜è®°å¯†ç &quot;; NSError *authError = nil; NSString *myLocalizedReasonString = @&quot;è¯·æŒ‰ä½Homeé”®å®ŒæˆéªŒè¯&quot;; // MARK: åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒæŒ‡çº¹è¯†åˆ« if ([myContext canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;authError]) &#123; [myContext evaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics localizedReason:myLocalizedReasonString reply:^(BOOL success, NSError * _Nullable error) &#123; if(success) &#123; NSLog(@&quot;æŒ‡çº¹è®¤è¯æˆåŠŸ&quot;); weakSelf.helper.isAppCurrentLoginState = YES; weakSelf.logoutBtnAction.hidden = NO; weakSelf.userInfo.text = @&quot;ä»ä¼¯å®‰&quot;; &#125; else &#123; weakSelf.helper.isAppCurrentLoginState = NO; NSLog(@&quot;æŒ‡çº¹è®¤è¯å¤±è´¥ï¼Œ%@&quot;,error.description); NSLog(@&quot;%ld&quot;, (long)error.code); // é”™è¯¯ç  error.code switch (error.code) &#123; case LAErrorAuthenticationFailed: // Authentication was not successful, because user failed to provide valid credentials &#123; NSLog(@&quot;æˆæƒå¤±è´¥&quot;); // -1 è¿ç»­ä¸‰æ¬¡æŒ‡çº¹è¯†åˆ«é”™è¯¯ &#125; break; case LAErrorUserCancel: // Authentication was canceled by user (e.g. tapped Cancel button) &#123; NSLog(@&quot;ç”¨æˆ·å–æ¶ˆéªŒè¯Touch ID&quot;); // -2 åœ¨TouchIDå¯¹è¯æ¡†ä¸­ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’® &#125; break; case LAErrorUserFallback: // Authentication was canceled, because the user tapped the fallback button (Enter Password) &#123; [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; NSLog(@&quot;ç”¨æˆ·é€‰æ‹©è¾“å…¥å¯†ç ï¼Œåˆ‡æ¢ä¸»çº¿ç¨‹å¤„ç†&quot;); // -3 åœ¨TouchIDå¯¹è¯æ¡†ä¸­ç‚¹å‡»äº†è¾“å…¥å¯†ç æŒ‰é’® &#125;]; &#125; break; case LAErrorSystemCancel: // Authentication was canceled by system (e.g. another application went to foreground) &#123; NSLog(@&quot;å–æ¶ˆæˆæƒï¼Œå¦‚å…¶ä»–åº”ç”¨åˆ‡å…¥ï¼Œç”¨æˆ·è‡ªä¸»&quot;); // -4 TouchIDå¯¹è¯æ¡†è¢«ç³»ç»Ÿå–æ¶ˆï¼Œä¾‹å¦‚æŒ‰ä¸‹Homeæˆ–è€…ç”µæºé”® &#125; break; case LAErrorPasscodeNotSet: // Authentication could not start, because passcode is not set on the device. &#123; NSLog(@&quot;è®¾å¤‡ç³»ç»Ÿæœªè®¾ç½®å¯†ç &quot;); // -5 &#125; break; case LAErrorTouchIDNotAvailable: // Authentication could not start, because Touch ID is not available on the device &#123; NSLog(@&quot;è®¾å¤‡æœªè®¾ç½®Touch ID&quot;); // -6 &#125; break; case LAErrorTouchIDNotEnrolled: // Authentication could not start, because Touch ID has no enrolled fingers &#123; NSLog(@&quot;ç”¨æˆ·æœªå½•å…¥æŒ‡çº¹&quot;); // -7 &#125; break;#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_9_0 case LAErrorTouchIDLockout: //Authentication was not successful, because there were too many failed Touch ID attempts and Touch ID is now locked. Passcode is required to unlock Touch ID, e.g. evaluating LAPolicyDeviceOwnerAuthenticationWithBiometrics will ask for passcode as a prerequisite ç”¨æˆ·è¿ç»­å¤šæ¬¡è¿›è¡ŒTouch IDéªŒè¯å¤±è´¥ï¼ŒTouch IDè¢«é”ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥å¯†ç è§£é”ï¼Œå…ˆTouch IDéªŒè¯å¯†ç  &#123; NSLog(@&quot;Touch IDè¢«é”ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥å¯†ç è§£é”&quot;); // -8 è¿ç»­äº”æ¬¡æŒ‡çº¹è¯†åˆ«é”™è¯¯ï¼ŒTouchIDåŠŸèƒ½è¢«é”å®šï¼Œä¸‹ä¸€æ¬¡éœ€è¦è¾“å…¥ç³»ç»Ÿå¯†ç  &#125; break; case LAErrorAppCancel: // Authentication was canceled by application (e.g. invalidate was called while authentication was in progress) å¦‚çªç„¶æ¥äº†ç”µè¯ï¼Œç”µè¯åº”ç”¨è¿›å…¥å‰å°ï¼ŒAPPè¢«æŒ‚èµ·å•¦&quot;); &#123; NSLog(@&quot;ç”¨æˆ·ä¸èƒ½æ§åˆ¶æƒ…å†µä¸‹APPè¢«æŒ‚èµ·&quot;); // -9 &#125; break; case LAErrorInvalidContext: // LAContext passed to this call has been previously invalidated. &#123; NSLog(@&quot;LAContextä¼ é€’ç»™è¿™ä¸ªè°ƒç”¨ä¹‹å‰å·²ç»å¤±æ•ˆ&quot;); // -10 &#125; break;#else#endif default: &#123; [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; NSLog(@&quot;å…¶ä»–æƒ…å†µï¼Œåˆ‡æ¢ä¸»çº¿ç¨‹å¤„ç†&quot;); &#125;]; break; &#125; &#125; &#125; &#125;]; &#125; else &#123; NSLog(@&quot;è®¾å¤‡ä¸æ”¯æŒæŒ‡çº¹&quot;); NSLog(@&quot;%ld&quot;, (long)authError.code); weakSelf.helper.isAppCurrentLoginState = NO; switch (authError.code) &#123; case LAErrorTouchIDNotEnrolled: &#123; NSLog(@&quot;Authentication could not start, because Touch ID has no enrolled fingers&quot;); break; &#125; case LAErrorPasscodeNotSet: &#123; NSLog(@&quot;Authentication could not start, because passcode is not set on the device&quot;); break; &#125; default: &#123; NSLog(@&quot;TouchID not available&quot;); break; &#125; &#125; &#125;&#125; å¤§è‡´æ•ˆæœï¼šDemo GitHubä¸‹è½½é“¾æ¥: EVNTouchIDDemo.gitï¼Œå¦‚æœæœ‰ç”¨ï¼Œç»™ä¸ªStarâ€¦â€¦ å‚è€ƒæ–‡çŒ®ï¼šã€1ã€‘iOS security guide;ã€2ã€‘Apple Objective-C;ã€3ã€‘Apple Swift API.]]></content>
      <categories>
        <category>iOSè¿›é˜¶ç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>Demo</tag>
        <tag>Touch ID</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swiftå’ŒObjective-Cæ··ç¼–çš„æ³¨æ„å•¦]]></title>
    <url>%2F2016%2F10%2F13%2F201610131932%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šSwiftå’ŒObjective-Cæ··ç¼–çš„æ³¨æ„å•¦ å‰è¨€Swiftå·²æ¨å‡ºæ•°å¹´ï¼Œä¸Objective-Cç›¸æ¯”Swiftçš„è¯­è¨€æœºåˆ¶åŠä½¿ç”¨ç®€æ˜“ç¨‹åº¦ä¸Šæ›´æ¥åœ°æ°”ï¼Œå¤§å¤§é™ä½äº†iOSå…¥é—¨é—¨æ§›ã€‚å½“ç„¶è¿™å¯¹æ–°å…¥è¡Œçš„ç«¥é‹ä»¬æ¥è®²ï¼Œçš„ç¡®ç®—æ˜¯ç¦éŸ³ï¼Œä½†å¯¹äºæ•´ä¸ªiOSç¼–ç¨‹ä»ä¸šè€…æ¥è®²ï¼ŒçœŸçœŸæ˜¯ï¼Œæ›¾å‡ ä½•æ—¶â€œé«˜å¤§ä¸Šâ€ï¼Œè½¬ç¬ä¹‹é—´â€œçŸ®çŸ¬ç©·â€ã€‚å†åŠ ä¸ŠåŸ¹è®­ç­æ¨ªè¡Œï¼Œæ‰¹é‡æ‰¹å‘ä¹‹ä¸‹ï¼ŒiOSå†ä¹Ÿçœ‹ä¸åˆ°å½“å¹´çš„è¾‰ç…Œã€‚å¾€äº‹ä¸å†æï¼Œäº‹è¿˜æ˜¯è¦åšæ»´ã€‚iOS10æ¨å‡ºåï¼Œç´§è·Ÿç€Xcode8ä¹Ÿæ¨é€äº†æ›´æ–°ï¼Œç»†å¿ƒè€…ä¼šå‘ç°ï¼ŒXcode8ä¸‹iOSç‰ˆæœ¬æœ€ä½é€‚é…å·²å˜ä¸ºiOS8.0ï¼ŒåŠ ä¸ŠSwiftç‰ˆæœ¬è¶‹äºç¨³å®šï¼Œä»æŸç§æ„ä¹‰ä¸Šè®²ï¼ŒSwiftçš„æ—¶ä»£æ­£å¼å¼€å¯ï¼Œæ›¿ä»£Objective-Cæ€•ä¹Ÿåªæ˜¯æ—¶é—´é—®é¢˜ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬ä¹Ÿåº”åšå¥½å‡†å¤‡ã€‚ä»Šå¹´è¶Šæ¥çš„è¶Šå¤šçš„å…¬å¸ï¼Œä¹Ÿå¼€å§‹äº†Swiftå’ŒObjective-Cæ··ç¼–ã€‚ æˆ‘ä»¬ä»Šå¤©å°±æ¥çœ‹çœ‹ä¸¤è€…æ··ç¼–ä¸­çš„ä¸€äº›æ³¨æ„äº‹é¡¹åŠé—®é¢˜ï¼š æ··ç¼–æ··ç¼–ä¹Ÿæ— éä¸¤ç§æƒ…å†µï¼Œ åœ¨Objective - Cå·¥ç¨‹æˆ–è€…æ–‡ä»¶ä½¿ç”¨Swiftçš„æ–‡ä»¶ï¼› åœ¨Swiftå·¥ç¨‹æˆ–è€…æ–‡ä»¶ä½¿ç”¨Objective - Cæ–‡ä»¶ åœ¨æ··ç¼–çš„è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªæ–‡ä»¶ï¼š1. æ¡¥æ¥æ–‡ä»¶ï¼šæ¡¥æ¥æ–‡ä»¶â€œProjectName-Bridging-Header.hâ€ï¼Œåœ¨é¦–æ¬¡åˆ›å»ºå…¶ä»–æ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€‚å¦‚æœä¸å°å¿ƒåˆ é™¤åï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼Œä¸è¿‡åå­—å¿…é¡»æ˜¯â€œProjectName-Bridging-Header.hâ€å¤´æ–‡ä»¶ï¼ˆåç§°ç»„æˆ:å·¥ç¨‹å-Bridging-Header.hï¼‰ï¼Œå¦‚æœåå­—è®°ä¸æ¸…ä¹Ÿå¯ä»¥è‡ªå·±æ–°å»ºHeader fileåï¼Œåœ¨Targetsâ€“&gt;Build Settingsâ€“&gt;Swift Compiler - Generalâ€“&gt;Objective-C Bridging Headeré…ç½®æ–‡ä»¶è·¯å¾„ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯Swiftä½¿ç”¨OCç±»æ—¶ä½¿ç”¨ã€‚ 2. Objective-C Generated Interface Header Nameæ–‡ä»¶è¿™ä¸ªæ–‡ä»¶æ˜¯æ··ç¼–æ—¶ï¼Œç³»ç»Ÿç”Ÿæˆçš„Swiftæ–‡ä»¶å¯¹åº”çš„Objective-Cçš„å¤´æ–‡ä»¶ï¼Œå…·ä½“å¯ä»¥åœ¨Targetsâ€“&gt;Build Settingsâ€“&gt;Swift Compiler - Generalâ€“&gt;Objective-C Generated Interface Header Nameè¿›è¡Œé…ç½®ï¼Œé»˜è®¤æ–‡ä»¶åæ˜¯å·¥ç¨‹å-Swift.hï¼Œä¸€èˆ¬ä¸åšæ”¹åŠ¨ã€‚ åœ¨Objective - Cå·¥ç¨‹æˆ–è€…æ–‡ä»¶ä½¿ç”¨Swiftçš„æ–‡ä»¶å½“åœ¨OCæ–‡ä»¶ä¸­è°ƒç”¨Swiftæ–‡ä»¶ä¸­çš„ç±»çš„æ—¶å€™ï¼Œé¦–å…ˆåœ¨OCæ–‡ä»¶ä¸­è¦åŠ ä¸Š #import â€œProjectName-swift.hâ€(åå­—ç»„æˆ:å·¥ç¨‹å-swift) è¿™ä¸ªæ–‡ä»¶è™½ç„¶åœ¨å·¥ç¨‹ä¸­çœ‹ä¸åˆ°ï¼Œä½†æ˜¯å¥¹çœŸå®å­˜åœ¨ï¼Œç¼–è¯‘åï¼Œä½ å¯ä»¥æŒ‰ä½Command+å•å‡»è¯¥æ–‡ä»¶åï¼Œå°±ä¼šçœ‹åˆ°å…·ä½“ç”Ÿæˆçš„ä»£ç ã€‚å¼•å…¥åï¼Œå…·ä½“ç±»çš„ä½¿ç”¨ï¼Œç›´æ¥æŒ‰ç…§OCçš„æ–¹å¼ä½¿ç”¨å³å¯ã€‚ åœ¨Swiftå·¥ç¨‹æˆ–è€…æ–‡ä»¶ä½¿ç”¨Objective - Cæ–‡ä»¶ å½“åœ¨Swiftä¸­ä½¿ç”¨OCæ–‡ä»¶çš„æ—¶å€™ï¼Œåªéœ€åœ¨æ¡¥æ¥æ–‡ä»¶å³projectName-Bridging-Header.hæ–‡ä»¶ä¸­å¼•å…¥éœ€è¦çš„å¤´æ–‡ä»¶ã€‚å…·ä½“ä½¿ç”¨ï¼ŒæŒ‰ç…§å¯¹åº”çš„Swiftè¯­æ³•ç»“æ„æ¥å³å¯ã€‚ æ··ç¼–æ³¨æ„äº‹é¡¹å¯¹äºéœ€è¦æ··ç¼–çš„Swiftç±»æ·»åŠ @objcå£°æ˜æˆ–ç»§æ‰¿NSObjectæˆ–NSObjectçš„å­ç±»12345class TestClass&#123;// å±æ€§// å®ç°&#125; å¦‚æœè¦åœ¨Objective-Cç±»ä¸­ä½¿ç”¨TestClassç±»ï¼Œåº”å½“ä½¿ç”¨@objcåŠ ä»¥å£°æ˜ï¼Œæˆ–è€…å°†TestClassç»§æ‰¿è‡ªNSObjectæˆ–NSObjectçš„å­ç±»ï¼Œå¦åˆ™ï¼Œå¼•å…¥ProductName-Swift.hä¹‹åï¼Œç¨‹åºæ‰¾ä¸åˆ°å¯¹åº”ç±»ã€‚ ä½¿ç”¨ç¬¬ä¸‰æ–¹Framework è®¾ç½®ï¼š targetâ€“&gt;build setting â€“&gt;Packaging â€“&gt;Defines Moduleä¸º â€œYesâ€ï¼› ç„¶åï¼Œé…ç½®æ–‡ä»¶Target -&gt; Build Phases -&gt; Link Binaryï¼Œæ·»åŠ è¦å¯¼å…¥çš„Frameworkï¼› æœ€åï¼Œè¿˜æ˜¯è¦é…ç½®æ¡¥æ¥æ–‡ä»¶ï¼Œæ¯”å¦‚è¦ä½¿ç”¨ abc-lib.frameworkåº“ä¸­çš„ abc.h å°±è¦è¿™æ ·é…ç½®ï¼š#importâ€abc-lib/abc.hâ€; Subclasså­ç±»é—®é¢˜å¯¹äºè‡ªå®šä¹‰çš„ç±»è€Œè¨€ï¼ŒObjective-Cçš„ç±»ï¼Œä¸èƒ½ç»§æ‰¿è‡ªSwiftçš„ç±»ï¼Œå³è¦æ··ç¼–çš„OCç±»ä¸èƒ½æ˜¯Swiftç±»çš„å­ç±»ã€‚åè¿‡æ¥ï¼Œéœ€è¦æ··ç¼–çš„Swiftç±»å¯ä»¥ç»§æ‰¿è‡ªOCçš„ç±»ã€‚ æ³¨è§£ OCå®æ–‡ä»¶å¦‚Swiftæ–‡ä»¶è¦ä½¿ç”¨OCä¸­å®šä¹‰çš„å®ï¼Œåªèƒ½ä½¿ç”¨å¸¸é‡ç®€å•å®æ–‡ä»¶ã€‚ Swiftç‹¬æœ‰ç‰¹æ€§Swiftä¸­æœ‰è®¸å¤šOCæ²¡æœ‰çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼ŒSwiftæœ‰å…ƒç»„ã€ä¸ºä¸€ç­‰å…¬æ°‘çš„å‡½æ•°ã€è¿˜æœ‰ç‰¹æœ‰çš„æšä¸¾ç±»å‹ã€‚æ‰€ä»¥ï¼Œè¦ä½¿ç”¨çš„æ··ç¼–æ–‡ä»¶è¦æ³¨æ„Swiftç‹¬æœ‰å±æ€§é—®é¢˜ã€‚ æ¡ˆä¾‹ä¹‹Swiftä¸­ä½¿ç”¨OCçš„blockSwift 2.* ï¼šSwiftä¸­ä½¿ç”¨Closureä¸èƒ½ä½¿ç”¨Blockä½œä¸ºå±æ€§è¿›è¡Œä¼ å€¼ï¼Œå¿…é¡»æ˜¯åˆå§‹åŒ–æ–¹æ³•æˆ–å‡½æ•°ã€‚ Objective-Cæ–‡ä»¶ä¸­ï¼š1234567891011#import &lt;UIKit/UIKit.h&gt;typedef void (^Myblock)(NSString *arg); @interface FirViewController : UIViewController //@property (copy, nonatomic) Myblock myBlock; //è¿™ç§ä½œä¸ºå…¬å…±å‚æ•°çš„å½¢å¼ï¼Œå¦‚æœåœ¨Swiftç±»ä¸­å»å›è°ƒçš„è¯ï¼Œæ˜¯æœ‰é—®é¢˜çš„ã€‚æç¤ºæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»¥Blockä¸ºå‚æ•°çš„æ–¹æ³• - (void)transValue:(Myblock) block;@end ä¸‹é¢æ˜¯.mæ–‡ä»¶1234567891011121314151617#import &quot;FirViewController.h&quot; @implementation FirViewController - (void)viewDidLoad &#123; [super viewDidLoad]; self.view.backgroundColor = [UIColor whiteColor]; &#125; - (void)transValue:(Myblock)block&#123; if (block) &#123; block(@&quot;firBack&quot;); &#125; &#125; @end åœ¨Swiftæ–‡ä»¶å›è°ƒï¼š åœ¨Swiftä½¿ç”¨OCçš„ç±»æ—¶ï¼Œé¦–å…ˆåœ¨æ¡¥æ¥æ–‡ä»¶ä¸­å£°æ˜ocçš„å¤´æ–‡ä»¶å·¥ç¨‹å-Bridging-Header.hè¿™æ˜¯åˆ›å»ºSwiftå·¥ç¨‹çš„æƒ…å†µä¸‹1234567891011121314151617import UIKit class ViewController: UIViewController &#123; override func viewDidLoad() &#123; super.viewDidLoad() self.view.backgroundColor = UIColor.whiteColor() &#125; @IBOutlet weak var goFirst: UIButton! @IBAction func goFirstAction(sender: AnyObject) &#123; let firVC:FirViewController = FirViewController() firVC. transValue &#123; ( arg:String !) -&gt; Void in self.aBtn?.setTitle(arg, forState: UIControlState.Normal) &#125; self.navigationController?.pushViewController(firVC, animated: true) &#125;]]></content>
      <categories>
        <category>iOSç½‘ç»œç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSçš„æ¶ˆæ¯æ¨é€ç®€æ]]></title>
    <url>%2F2016%2F08%2F01%2F201608061544%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šiOSçš„æ¶ˆæ¯æ¨é€ç®€æ iOSçš„æ¶ˆæ¯æ¨é€ç®€ææ¶ˆæ¯æ¨é€çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨åº”ç”¨åˆ‡è‡³åå°æˆ–æ‰‹æœºé”å±æƒ…å†µä¸‹ï¼Œæé†’ç”¨æˆ·å½“å‰æ—¶é—´APPå†…éƒ¨å‘ç”Ÿäº†æŸäº‹ï¼Œå¸å¼•ç”¨æˆ·æ‰“å¼€APPåº”ç”¨ã€‚ æ¶ˆæ¯æ¨é€æœ‰ä¸‰ç§æç¤ºç±»å‹ï¼š UIUserNotificationTypeBadgeï¼šåº”ç”¨çš„BadgeValueå°çº¢åœˆ UIUserNotificationTypeSoundï¼šå£°éŸ³æˆ–éœ‡åŠ¨æç¤º UIUserNotificationTypeAlertï¼šAlertå±•ç¤ºMessageå†…å®¹ åŸºäºä¸è½»æ˜“æ‰“æ‰°ç”¨æˆ·ä½¿ç”¨çš„åŸåˆ™ï¼ŒAPPæ¶ˆæ¯æ¨é€éœ€è¦å¾å¾—ç”¨æˆ·åŒæ„ï¼Œæå‰è¿›è¡Œæ³¨å†Œã€‚123456789101112131415161718192021222324252627282930313233- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions&#123; // ç¨‹åºå¯åŠ¨æ³¨å†Œæ¨é€ if ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 8.0) &#123; UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeBadge | UIUserNotificationTypeAlert | UIUserNotificationTypeSound categories:nil]; [[UIApplication sharedApplication] registerUserNotificationSettings:settings]; &#125; else &#123; [application registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIUserNotificationTypeSound]; &#125; ...... return YES;&#125;// åœ¨ iOS8 ç³»ç»Ÿä¸­ï¼Œè¿˜éœ€è¦æ·»åŠ è¿™ä¸ªæ–¹æ³•ã€‚é€šè¿‡æ–°çš„ API æ³¨å†Œæ¨é€æœåŠ¡ï¼Œå¦‚æœç”¨æˆ·ä¸å…è®¸æ¨é€ï¼Œç¨‹åºå¯åŠ¨æ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè·å–ç”¨æˆ·çš„è®¾ç½®- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings &#123; [application registerForRemoteNotifications];&#125;// æ³¨å†Œå¤±è´¥è°ƒç”¨- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error &#123; NSLog(@&quot;è¿œç¨‹é€šçŸ¥æ³¨å†Œå¤±è´¥ï¼š%@&quot;,error);&#125; å¦‚æœç”¨æˆ·é€‰æ‹©å…è®¸ï¼Œè‹¹æœä¼šæ ¹æ®bundleIDå’Œæ‰‹æœºUDIDç”ŸæˆdeviceTokenï¼Œç„¶åè°ƒç”¨ applicationï¼šdidRegisterForRemoteNotificationsWithDeviceToken: æ–¹æ³•è·å–åˆ°devicetoken 12345- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken&#123; NSLog(@&quot;test:%@&quot;,deviceToken); // è·å–è®¾å¤‡çš„Tokenï¼Œè·å–æˆåŠŸåˆ™ä»£è¡¨æ³¨å†ŒæˆåŠŸ // ç¨‹åºåº”è¯¥å°†devicetokenå‘ç»™APPçš„æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†å…¶å­˜å‚¨ï¼Œä»¥ä¾¿äºå‘é€æ¨é€æ¶ˆæ¯&#125; æ¶ˆæ¯æ¨é€åˆ†ä¸ºä¸¤ç§ï¼š æœ¬åœ°æ¶ˆæ¯æ¨é€ï¼ˆLocalNotificationï¼‰ ç¦»çº¿æ¶ˆæ¯æ¨é€ï¼ˆPushNotificationæˆ–è€…RemoteNotificationï¼‰ æœ¬åœ°æ¶ˆæ¯æ¨é€ ä¸€èˆ¬ç”¨äºå·¥å…·ç±»è½¯ä»¶ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡æé†’ç­‰è½¯ä»¶ï¼Œåˆ°æŸä¸ªæ—¶é—´ç‚¹å‘å‡ºé€šçŸ¥æç¤ºã€‚ å®æ—¶é€šä¿¡è½¯ä»¶ï¼Œé€šçŸ¥å®¢æˆ·ç«¯çš„å½¢å¼ï¼Œæ¯”å¦‚å®æ—¶é€šä¿¡è½¯ä»¶ï¼Œæ”¶åˆ°èŠå¤©ä¿¡æ¯åï¼Œé€šçŸ¥æ‰‹æœºå“é“ƒæˆ–éœ‡åŠ¨ï¼Œæˆ–ä¿®æ”¹TabBarçš„Itemçš„BadgeValueç­‰ã€‚ ç¦»çº¿æ¶ˆæ¯æ¨é€APPåˆ‡è‡³åå°ï¼ŒKillæ‰APPçš„æƒ…å†µä¸‹ï¼Œæç¤ºç”¨æˆ·ã€‚ æ”¶åˆ°é€šçŸ¥åçš„å›è°ƒæ”¶åˆ°é€šçŸ¥åï¼Œå•å‡»æœ¬åœ°é€šçŸ¥åï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š ç¨‹åºä»åå°åˆ‡è‡³å‰å°æ‰“å¼€ï¼ˆç¨‹åºæœªè¢«killæ‰ï¼‰æ”¶åˆ°æœ¬åœ°é€šçŸ¥å°±ä¼šè°ƒç”¨didReceiveLocalNotificationä»£ç†æ–¹æ³•ï¼Œå½“åº”ç”¨åœ¨å‰å°æ—¶ï¼Œæ”¶åˆ°æœ¬åœ°æ¨é€é€šçŸ¥ä¹Ÿä¼šè°ƒç”¨ï¼Œä¸è¿‡ä¸€èˆ¬ä¸åšå¤„ç† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273- (void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification &#123; switch (application.applicationState) &#123; case UIApplicationStateActive: // æ´»åŠ¨åœ¨å‰å°ï¼Œæœªé”å±æƒ…å†µ &#123; // æ”¶åˆ°æœ¬åœ°æ¨é€çš„æ—¶å€™ï¼Œç¨‹åºåœ¨å‰å° // å‰å°çš„ç•Œé¢çš„å˜åŒ–ä»£ç ï¼Œä¸€èˆ¬æ˜¯TabBarçš„Itemçš„BadgeValueæ”¹å˜ [self playSoundAndVibration]; // æŒ¯é“ƒ return; &#125; break; case UIApplicationStateInactive: // è¿›å…¥æ¶ˆæ¯é€šçŸ¥æ æ—¶ç‚¹å‡»æŸæ¡æ¶ˆæ¯ï¼Œé€€åˆ°åå° &#123; // æ”¶åˆ°æœ¬åœ°æ¨é€çš„æ—¶å€™ï¼Œç¨‹åºåœ¨è¢«åˆ‡è‡³åå° // å…·ä½“ä¸šåŠ¡æ‰§è¡Œä»£ç ï¼Œè·³è½¬æˆ–å…¶ä»– [self playSoundAndVibration]; // æŒ¯é“ƒ &#125; break; case UIApplicationStateBackground: //ç¨‹åºè¿›å…¥åå° &#123; NSLog(@&quot;%@&quot;,message); [self playSoundAndVibration]; // æŒ¯é“ƒ [self showNotificationWithMessage:message]; &#125; break; default: break; &#125;&#125;- (void)playSoundAndVibration&#123; NSTimeInterval timeInterval = [[NSDate date] timeIntervalSinceDate:self.lastPlaySoundDate]; if (timeInterval &lt; kDefaultPlaySoundInterval) &#123; // å¦‚æœè·ç¦»ä¸Šæ¬¡å“é“ƒå’Œéœ‡åŠ¨æ—¶é—´å¤ªçŸ­, åˆ™è·³è¿‡å“é“ƒ NSLog(@&quot;skip ringing &amp; vibration %@, %@&quot;, [NSDate date], self.lastPlaySoundDate); return; &#125; self.lastPlaySoundDate = [NSDate date]; // ä¿å­˜æœ€åä¸€æ¬¡å“é“ƒæ—¶é—´ [[EMCDDeviceManager sharedInstance] playNewMessageSound]; // æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œæ’­æ”¾éŸ³é¢‘ [[EMCDDeviceManager sharedInstance] playVibration]; // æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œéœ‡åŠ¨&#125;- (void)showNotificationWithMessage:(EMMessage *)message&#123; UILocalNotification *notification = [[UILocalNotification alloc] init]; // å‘é€æœ¬åœ°æ¨é€ notification.fireDate = [NSDate date]; //è§¦å‘é€šçŸ¥çš„æ—¶é—´ notification.alertBody = NSLocalizedString(@&quot;receiveMessage&quot;, @&quot;you have a new message&quot;); notification.hasAction = NO; notification.timeZone = [NSTimeZone defaultTimeZone]; NSTimeInterval timeInterval = [[NSDate date] timeIntervalSinceDate:self.lastPlaySoundDate]; if (timeInterval &lt; kDefaultPlaySoundInterval) &#123; NSLog(@&quot;skip ringing &amp; vibration %@, %@&quot;, [NSDate date], self.lastPlaySoundDate); &#125; else &#123; notification.soundName = UILocalNotificationDefaultSoundName; self.lastPlaySoundDate = [NSDate date]; &#125; NSMutableDictionary *userInfo = [NSMutableDictionary dictionary]; [userInfo setObject:[NSNumber numberWithInt:message.messageType] forKey:kMessageType]; [userInfo setObject:message.conversationChatter forKey:kConversationChatter]; notification.userInfo = userInfo; [[UIApplication sharedApplication] scheduleLocalNotification:notification]; // å‘é€é€šçŸ¥ [UIApplication sharedApplication].applicationIconBadgeNumber += 1;&#125; ç¨‹åºKillæ‰ï¼Œé‡æ–°è¿è¡Œ æ‰“å¼€ç¨‹åºï¼Œéƒ½ä¼šæ‰§è¡Œæ‰§è¡Œapplication: didFinishLaunchingWithOptions: å›è°ƒæ–¹æ³•ï¼Œä¸åŒçš„æ˜¯ï¼Œæ­£å¸¸å¯åŠ¨æ—¶launchOptionså‚æ•°ä¸ºnullï¼Œå¦‚æœå…¶ä»–æ–¹å¼å¯åŠ¨launchOptionsä¼šå¸¦æœ‰ç‰¹å®šå‚æ•°ã€‚ 1234567891011121314151617181920212223242526272829- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; if (launchOptions[UIApplicationLaunchOptionsLocalNotificationKey]) &#123; NSDictionary*userInfo = [launchOptions objectForKey:@&quot;UIApplicationLaunchOptionsRemoteNotificationKey&quot;]; // NSDictionary*userInfo = launchOptions[UIApplicationLaunchOptionsLocalNotificationKey]ï¼› // killæ‰çš„ç¨‹åºï¼Œå•å‡»æœ¬åœ°é€šçŸ¥æ‰“å¼€ï¼Œä¼šè¿›å…¥è¿™ä¸ªåœ°æ–¹ï¼Œå¹¶å°†ç›¸åº”çš„launchOptionsä¼ é€’ç»™ç¨‹åº // ä»¥ä¾¿äºæˆ‘ä»¬åšå‡ºå¯¹åº”çš„è·³è½¬ç­‰ [self didReceiveRemoteNotification:userInfo]; &#125; ...... return YES;&#125;#pragma mark - æ€æ­»è¿›ç¨‹ï¼Œç¦»çº¿æ¨é€è·å–çš„ä¿¡æ¯- (void)didReceiveRemoteNotification:(NSDictionary *)userInfo&#123; // æ–¹ä¾¿ç¦»çº¿æ¨é€æ¶ˆæ¯çš„è§£æ NSError *parseError = nil; NSData *jsonData = [NSJSONSerialization dataWithJSONObject:userInfo options:NSJSONWritingPrettyPrinted error:&amp;parseError]; NSString *str = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@&quot;apns.content&quot;, @&quot;Apns content&quot;) message:str delegate:nil cancelButtonTitle:NSLocalizedString(@&quot;ok&quot;, @&quot;OK&quot;) otherButtonTitles:nil]; [alert show];&#125; AppDelegateä¸­å…³äºæ¨é€ä»£ç†æ–¹æ³•çš„æ‰§è¡Œæƒ…å†µï¼šé¦–æ¬¡å®‰è£…APPåº”ç”¨ï¼š--&gt; didRegisterForRemoteNotificationsWithDeviceTokenè¢«è°ƒç”¨ï¼› --&gt; ç³»ç»Ÿæç¤ºç”¨æˆ·æ˜¯å¦å…è®¸å¼€å¯æ¨é€ï¼› --&gt; didRegisterUserNotificationSettingsè¢«è°ƒç”¨ï¼› éé¦–æ¬¡å¯åŠ¨æ—¶ï¼š--&gt; æ¨é€å¤„äºæ‹’ç»çŠ¶æ€:didRegisterUserNotificationSettingsè¢«è°ƒç”¨ï¼› --&gt; æ¨é€å¤„äºå…è®¸çŠ¶æ€ --&gt; didRegisterForRemoteNotificationsWithDeviceToken è¢«è°ƒç”¨ --&gt; didRegisterUserNotificationSettings è¢«è°ƒç”¨ è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·ä¿®æ”¹æ¨é€è®¾ç½®ï¼š--&gt; æ‹’ç» åˆ° å…è®¸ï¼šdidRegisterForRemoteNotificationsWithDeviceTokenè¢«è°ƒç”¨ --&gt; å…è®¸ åˆ° æ‹’ç»ï¼šä»€ä¹ˆä¹Ÿä¸åš ä¸€ç‚¹ç–‘é—®ï¼Ÿï¼Ÿï¼Ÿåœ¨Killæ‰APPæƒ…å†µï¼Œå•å‡»æœ¬åœ°æ¨é€æ¶ˆæ¯ï¼ŒiOS7.0ä¹‹åä¸åœ¨didFinishLaunchingWithOptionsä¸­åšå¤„ç†ï¼Œåªåœ¨ä¸‹é¢å‡½æ•°åšå¤„ç†ï¼Œä½†æˆ‘å®é™…å¼€å‘ä¸­ï¼Œæ²¡æœ‰è¿™æ ·å¥‡æ€ªã€‚ 12345- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler&#123; // userInfo&#125;]]></content>
      <categories>
        <category>iOSè¿›é˜¶ç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>BadgeValue</tag>
        <tag>Notification</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å“¥çš„å•ä¾‹æ˜¯ä¼ªçš„è¿˜æ˜¯çœŸçš„æœ‰å›¾ä¸ºè¯(Singleton)]]></title>
    <url>%2F2016%2F06%2F13%2F201606141032%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šå“¥çš„å•ä¾‹æ˜¯ä¼ªçš„è¿˜æ˜¯çœŸçš„æœ‰å›¾ä¸ºè¯(Singleton) å‰è¨€ å‰æ®µæ—¶é—´å’ŒåŒäº‹äº¤æµå•ä¾‹æ¨¡å¼ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹å•ä¾‹äº†è§£è¿˜æœ‰å¾ˆå¤šä¸è¶³ã€‚ä¸Šç½‘æŸ¥äº†ä¸‹å‘ç°ï¼Œæœ‰äº›å¸–å­å¤ªå‘ï¼Œæ‹¿ç€ä¼ªå•ä¾‹å¤§ä¹¦ç‰¹ä¹¦ï¼Œçœ‹ç€çœ¼ç–¼ã€‚å•ä¾‹ä¸æ˜¯ç®€å•çš„ç¼–ç¨‹æŠ€å·§ï¼Œå®ƒæ˜¯ç¼–ç¨‹æ¨¡å¼ï¼Œèƒ½ä¸Šå‡åˆ°æ¨¡å¼çº§åˆ«çš„ä¸œè¥¿ï¼Œä¸æ˜¯è¯´å‡ è¡Œç®€å•ä»£ç èƒ½æå®šçš„ï¼Œæ¯æ¬¡å¬åˆ°â€œå•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­æœ€ç®€å•çš„å½¢å¼â€è¿™å¥è¯æ—¶ï¼Œéƒ½æœ‰ç§æƒ³æ‹¿äººæ’å¢™çš„æ„Ÿè§‰ã€‚ ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ æåˆ°å•ä¾‹ï¼Œå¦‚æœåœ¨å¤§å­¦é‡Œä¸ŠJavaè¯¾çš„æ—¶å€™ï¼Œä½ å¿˜äº†ç¡è§‰ï¼Œé‚£ä¹ˆä½ è‚¯å®šçŸ¥é“å•ä¾‹æœ‰å¾ˆå¤šç§å†™æ³•ï¼Œæ¯”å¦‚ï¼šé¥¿æ±‰å¼ã€æ‡’æ±‰å¼ç­‰ã€‚å•ä¾‹ç±»çš„å†™æ³•ä¹Ÿæ˜¯å¾ˆå¤šå…¬å¸ï¼Œç¬”è¯•å¿…è€ƒé¢˜ä¹‹ä¸€ã€‚åœ¨iOSç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šå•ä¾‹ç±»ï¼Œå¦‚ï¼ŒUIApplicationã€NSUserDefaultsç­‰ã€‚ å•ä¾‹æ¨¡å¼æ˜¯ä¸€ä¸ªClassåœ¨ç³»ç»Ÿä¸­åªå…è®¸ç”Ÿæˆä¸€ä¸ªInstance Objectï¼Œä»¥å…±äº«å†…å­˜çš„æ–¹å¼ä¾›ç³»ç»Ÿä¸­å…¶ä»–å®ä¾‹å¯¹è±¡è¿›è¡Œè®¿é—®ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œå•ä¾‹æ¨¡å¼æ˜¯éå¸¸æœ‰ç”¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ æåˆ°å•ä¾‹ï¼Œå¾ˆå¤šäººéƒ½ä¼šä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå…·ä½“åœºæ™¯ï¼šä¸€å°æœºå™¨å¤šä¸ªå¯æ‰“å°çš„åº”ç”¨Pro1ã€ Pro2ã€Pro3â€¦â€¦ï¼Œä¸€å°æ‰“å°æœºPrintï¼›åœ¨å¤šä¸ªåº”ç”¨è¿æ¥æ‰“å°æœºçš„æ—¶å€™ï¼ŒPro1ã€ Pro2ã€Pro3è¿æ¥æ‰“å°æœºPrintçš„æ—¶å€™ï¼Œç”Ÿæˆçš„Printå®ä¾‹æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚ å•ä¾‹çš„ä½œç”¨ å•ä¾‹ç±»ä¿è¯äº†åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œä¸”æ˜“äºå¤–ç•Œè®¿é—®ã€‚ å…±äº«å†…å­˜ï¼Œå­˜å‚¨ç”¨æˆ·æ•°æ®ç­‰ æ— äº¤äº’ç±»ä¼ å€¼æ—¶ï¼Œå……å½“ä¸­é—´äºº å†™æ³•åˆ†ç±»: æ‡’æ±‰å¼ : é¦–æ¬¡ç”¨åˆ°å•ä¾‹å¯¹è±¡çš„æ—¶ï¼Œåˆ›å»ºå®ä¾‹å¯¹è±¡ï¼› é¥¿æ±‰å¼ : è¿›å…¥ç¨‹åºå°±åˆ›å»ºå®ä¾‹å¯¹è±¡ æåˆ°è¿™ä¸¤ç§æ–¹å¼ï¼Œé¦–å…ˆè¯´ä¸ªçŸ¥è¯†ç‚¹ï¼šNSObjectçš„loadå’Œinitializeæ–¹æ³•ï¼Œç‚¹å¼€Appleå®˜æ–¹å…³äºNSObjectçš„APIä¼šå‘ç°ï¼Œåœ¨NSObject.hæ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªç±»æ–¹æ³•loadã€initializeï¼Œ @interface NSObject &lt;NSObject&gt; { Class isa OBJC_ISA_AVAILABILITY; } + (void)load; + (void)initialize; + (void)load å®˜æ–¹æè¿° The load message is sent to classes and categories that are both dynamically loaded and statically linked, but only if the newly loaded class or category implements a method that can respond.The order of initialization is as follows:All initializers in any framework you link to.All +load methods in your image.All C++ static initializers and C/C++ attribute(constructor) functions in your image.All initializers in frameworks that link to you. + (void) initialize å®˜æ–¹æè¿° The runtime sends initialize to each class in a program just before the class, or any class that inherits from it, is sent its first message from within the program. The runtime sends the initialize message to classes in a thread-safe manner. Superclasses receive this message before their subclasses. The superclass implementation may be called multiple times if subclasses do not implement initializeâ€”the runtime will call the inherited implementationâ€”or if subclasses explicitly call [super initialize]. Appleçš„å®˜æ–¹æ–‡æ¡£æ¸…æ¥šåœ°è¯´æ˜äº†initializeå’Œloadçš„åŒºåˆ«ï¼šloadï¼šåªè¦ç±»æ‰€åœ¨æ–‡ä»¶è¢«å¼•ç”¨å°±ä¼šè¢«è°ƒç”¨ï¼Œç³»ç»Ÿè¿è¡Œï¼Œloadå°±ä¼šè¢«æ‰§è¡Œï¼›initializeï¼šåœ¨ç±»æˆ–è€…å…¶å­ç±»çš„æ–¹æ³•è¢«è°ƒç”¨å‰è¢«è°ƒç”¨ï¼Œå®ƒå±äºæ‡’æ±‰çš„ï¼Œè‡ªå·±çš„æ–¹æ³•æ²¡è¢«ç”¨åˆ°ï¼Œå®ƒæ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚ ç›¸åŒç‚¹ï¼šä¸¤ç§æ–¹æ³•éƒ½åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ ä¸ºäº†é˜²æ­¢ä¸åœçš„if â€“&gt;( _instance == nil) else â€¦.è¿™ç§ä»¤äººä½œå‘•çš„åˆ¤æ–­ï¼Œä¸‹é¢å®ç°ä½¿ç”¨çº¿ç¨‹æ–¹å¼ï¼ˆè®°å¾—å®ç°NSCopying, NSMutableCopyingåè®®æ–¹æ³•ï¼‰ï¼š ######å…ˆéªŒè¯ä¸‹ï¼Œå“¥çš„å•ä¾‹æ˜¯ä¼ªçš„ï¼Œè¿˜æ˜¯çœŸçš„ï¼Œæœ‰å›¾ä¸ºè¯ï¼šæœ‰æœ‹å‹é—®åˆ°ï¼Œä½¿ç”¨allocåˆ›å»ºå®ä¾‹ä¸ºä»€ä¹ˆä¼šåœ°å€ç›¸åŒï¼Œä¸»è¦æ˜¯å› ä¸ºé‡å†™äº†allocWithZoneï¼Œè¿”å›åŒä¸€ä¸ªå®ä¾‹ã€‚åé¢mutableCopyWithZoneå’ŒcopyWithZoneæ–¹æ³•çš„é‡å†™ï¼Œæ˜¯å³ä¾¿æ˜¯ä½¿ç”¨copyä¿®é¥°ï¼Œä¹ŸåŒæ ·è¿”å›åŒä¸€ä¸ªå®ä¾‹ã€‚1@property (nonatomic, copy) EVNHelper *helper; æ‡’æ±‰å¼å•ä¾‹.hæ–‡ä»¶ï¼š // // EVNHelper.h // MMBao_master // // Created by developer on 16/6/11. // Copyright Â© 2016å¹´ ä»ä¼¯å®‰. All rights reserved. // #import &lt;Foundation/Foundation.h&gt; @interface EVNHelper : NSObject&lt;NSCopying, NSMutableCopying&gt; + (instancetype)shareInstance; @end .mæ–‡ä»¶ï¼š // // EVNHelper.m // MMBao_master // // Created by developer on 16/6/11. // Copyright Â© 2016å¹´ ä»ä¼¯å®‰. All rights reserved. // #import &quot;EVNHelper.h&quot; static id _instance; @implementation EVNHelper + (instancetype)allocWithZone:(struct _NSZone *)zone { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [super allocWithZone:zone]; }); return _instance; } + (instancetype)shareInstance { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [[self alloc] init]; }); return _instance; } - (id)copyWithZone:(NSZone *)zone { return _instance; } - (id)mutableCopyWithZone:(NSZone *)zone { return _instance; } @end é¥¿æ±‰å¼å•ä¾‹.hæ–‡ä»¶ï¼š // // EVNHelper.h // MMBao_master // // Created by developer on 16/6/11. // Copyright Â© 2016å¹´ ä»ä¼¯å®‰. All rights reserved. // #import &lt;Foundation/Foundation.h&gt; @interface EVNHelper : NSObject&lt;NSCopying, NSMutableCopying&gt; + (instancetype)shareInstance; @end .mæ–‡ä»¶ï¼š // // EVNHelper.m // MMBao_master // // Created by developer on 16/6/11. // Copyright Â© 2016å¹´ ä»ä¼¯å®‰. All rights reserved. // #import &quot;EVNHelper.h&quot; static id _instance; @implementation EVNHelper /** * åªè¦ç³»ç»Ÿä¸­å¼•ç”¨äº†è¯¥ç±»ï¼Œç¨‹åºè¿è¡Œï¼Œå°±ä¼šä¸»åŠ¨è°ƒç”¨loadï¼ˆä¸ç”¨æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œä¸”åªä¼šåŠ è½½1æ¬¡ï¼‰ */ + (void)load { _instance = [[EVNHelper alloc] init]; //[[self alloc] init]; } + (instancetype)allocWithZone:(struct _NSZone *)zone { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [super allocWithZone:zone]; }); return _instance; } + (instancetype)shareInstance { static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ _instance = [[self alloc] init]; }); return _instance; } - (id)copyWithZone:(NSZone *)zone { return _instance; } - (id)mutableCopyWithZone:(NSZone *)zone { return _instance; } @end ä¸Šé¢çš„å†™æ³•æ˜¯åœ¨ARCæƒ…å†µä¸‹ï¼ŒMRCè¿˜éœ€åœ¨.mæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼šï¼ˆé„™äººä¸å¤ªæ‡‚MRCï¼Œåªä¸ºæ‰©å……ä¸‹ï¼Œæœ‰é—®é¢˜ï¼Œè¯·å›å¤ï¼ŒæŒ‡æ•™ï¼‰ (1) é‡å†™releaseæ–¹æ³•ä¸ºç©º (2) é‡å†™retainæ–¹æ³•è¿”å›self (3) é‡å†™retainCountè¿”å› 1 (4) é‡å†™autoreleaseè¿”å›self - (oneway void)release { NSLog(@&quot;è¿™é‡Œç©ºè¯­å¥å°±è¡Œ&quot;); } - (id)retain { return self; } - (NSUInteger)retainCount { return 1; } - (id)autorelease { return self; }]]></content>
      <categories>
        <category>iOSè¿›é˜¶ç¯‡</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>Singleton</tag>
        <tag>GCD</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CocoaPodså·¥ä½œåŸç†åŠä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜]]></title>
    <url>%2F2016%2F06%2F03%2F201606032325%2F</url>
    <content type="text"><![CDATA[åŸæ–‡ï¼šCocoaPodså·¥ä½œåŸç†åŠä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ é¡¹ç›®ä¸Šçº¿ï¼Œç»ˆäºåˆæœ‰æ—¶é—´ç ”ç©¶äº›ä¸‰æ–¹çš„ä¸œè¥¿äº†ï¼Œåœ¨è‡ªå·±é’»ç‰›è§’çš„æ—¶å€™ï¼Œä¸è§‰é—´é™·å…¥äº†è¯¯åŒºã€‚åœ¨é¡¹ç›®å®è·µè¿‡ç¨‹ä¸­ï¼Œè·Ÿè€å¤§ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œä¹Ÿæ„Ÿè§‰è‡ªå·±è‚šå­æœ‰äº†äº›æ²¹æ°´ï¼Œå¯çœ‹åˆ°GitHubä¸Šé‚£äº›å¤§ç‰›çš„å¼€æºå¤§ä½œï¼Œä¸å…è‡ªå‘ã€‚è™½å…¥è¡Œä¸€å¹´ï¼Œæ‰¿è’™è€å¤§çœ‹å¾—èµ·ï¼Œäº¤ç»™äº†ä¸ªå¸¦å¾’å¼Ÿçš„ä»»åŠ¡ï¼Œäº¤æµä¸­å—è™ä¸è¿›æ­¥åŒè¡Œï¼Œè‹¦æ¶©ä¸æš–å¿ƒå¹¶è¿›ã€‚è™½ç„¶è‡ªå·±å¸ˆèŒƒå‡ºèº«ï¼Œå¯ç¦»åˆæ ¼çš„è€å¸ˆï¼ŒçœŸå¿ƒè¿˜æ˜¯æœ‰å·®è·çš„ï¼Œè‡³å°‘é˜Ÿå‹ç»™çš„åé¦ˆæ˜¯ï¼šâ€œè¡¨è¾¾èƒ½åŠ›å¤ªå·®ï¼Œæ°¸è¿œæ´»åœ¨è‡ªå·±çš„æ€è·¯é‡Œâ€ã€‚çªç„¶æƒ³åˆ°äº†å°å²³å²³ä¸€å¥è¯ï¼šâ€œè™½ç„¶æ¯å¤©å·¥ä½œå¾ˆç´¯ï¼Œä½†æ˜¯æˆ‘æŒ£å¾—å°‘å•Šï¼â€ï¼Œæˆ‘è¦è¯´çš„æ˜¯ï¼šâ€œä½ æ¯å¤©é‚£ä¹ˆåŠªåŠ›ï¼Œå¿å—äº†é‚£ä¹ˆå¤šå¯‚å¯å’Œç—›è‹¦ï¼Œå¯æˆ‘ä¹Ÿæ²¡è§ä½ å¤šä¹ˆä¼˜ç§€å•Šï¼â€ï¼Œå“¥æ‡‚çš„è¿˜æ˜¯å¤ªå°‘ã€‚å¥½äº†ï¼Œä¸‹é¢æ˜¯æ­£é¢˜ï¼š åœ¨é¡¹ç›®å¼•å…¥ç¬¬ä¸‰æ–¹SDKè¿‡ç¨‹ä¸­ï¼Œå„ç§å¼•å…¥åº“æ–‡ä»¶ã€å„ç§æ”¹é…ç½®ï¼Œç‰¹åˆ«æ˜¯æ›´æ–°SDKçš„æ—¶å€™ï¼Œç€å®æ˜¯ä»¶è®©äººå¤´å¤§çš„äº‹æƒ…ã€‚å¸¸åœ¨ç½‘ä¸Šçœ‹åˆ°åˆ«äººä½¿ç”¨è‡ªåŠ¨åŒ–ä¸‰æ–¹åº“ç®¡ç†å·¥å…·Cocoapodsï¼ŒåŸé¡¹ç›®ä¸­ä¸€ç›´æ²¡æ•¢å°è¯•ï¼Œæœ€è¿‘ä¸€ç›´åœ¨ç ”ç©¶ï¼Œä½¿ç”¨ä¸­ç¡®æœ‰çœ¼å‰ä¸€äº®çš„æ„Ÿè§‰ï¼Œä¸è¿‡ä¸­é—´ä¹Ÿé‡åˆ°äº†è®¸å¤šé—®é¢˜ï¼Œå–å¼„å¦‚ä¸‹ï¼š å®‰è£…æµç¨‹æ­¥éª¤æ­¤å¤„å°±ä¸å¤šè®²äº†ï¼Œç½‘ä¸Šéšä¾¿æœä¸‹â€¦â€¦ åœ¨ä½¿ç”¨pod å‘½ä»¤å¼•å…¥æ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯ä¸­ä¼šæç¤ºï¼šAnalyzing dependencies Downloading dependencies Installing...... Generating Pods project [!] From now on use `ProjectName.xcworkspace`. å¦‚æœä½¿ç”¨CocoaPodsç»„ç»‡ç®¡ç†ä¸‰æ–¹åº“ä¹‹åï¼Œå°±åªèƒ½é€šè¿‡ProjectName.xcworkspaceæ‰“å¼€ï¼Œå¦‚æœæ‰“å¼€åŸæ¥çš„å·¥ç¨‹ä¼šç¼–è¯‘æŠ¥é”™ã€‚æ‰§è¡Œpodå‘½ä»¤ä¹‹åï¼Œé¡¹ç›®ä¸­ä¼šç”Ÿæˆï¼šProjectName.xcworkspaceã€Podfile.lockã€Podsç­‰æ–‡ä»¶ï¼› CocoaPodså·¥ä½œåŸç†ï¼šCocoaPodsçš„å·¥ä½œä¸»è¦æ˜¯é€šè¿‡ProjectName.xcworkspaceæ¥ç»„ç»‡çš„ï¼Œåœ¨æ‰“å¼€ProjectName.xcworkspaceæ–‡ä»¶åï¼Œå‘ç°Xcodeä¼šå¤šå‡ºä¸€ä¸ªPodså·¥ç¨‹ã€‚ åº“æ–‡ä»¶å¼•å…¥åŠé…ç½®ï¼šåº“æ–‡ä»¶çš„å¼•å…¥ä¸»è¦ç”±Podså·¥ç¨‹ä¸­çš„Pods-ProjectName-frameworks.shè„šæœ¬è´Ÿè´£ï¼Œåœ¨æ¯æ¬¡ç¼–è¯‘çš„æ—¶å€™ï¼Œè¯¥è„šæœ¬ä¼šå¸®ä½ æŠŠé¢„å¼•å…¥çš„æ‰€æœ‰ä¸‰æ–¹åº“æ–‡ä»¶æ‰“åŒ…çš„æˆProjectName.aé™æ€åº“æ–‡ä»¶ï¼Œæ”¾åœ¨æˆ‘ä»¬åŸXcodeå·¥ç¨‹ä¸­Frameworkæ–‡ä»¶å¤¹ä¸‹ï¼Œä¾›å·¥ç¨‹ä½¿ç”¨ã€‚ Resourceæ–‡ä»¶ï¼šResourceèµ„æºæ–‡ä»¶ä¸»è¦ç”±Podså·¥ç¨‹ä¸­çš„Pods-ProjectName-resources.shè„šæœ¬è´Ÿè´£ï¼Œåœ¨æ¯æ¬¡ç¼–è¯‘çš„æ—¶å€™ï¼Œè¯¥è„šæœ¬ä¼šå¸®ä½ å°†æ‰€æœ‰ä¸‰æ–¹åº“çš„Resourceæ–‡ä»¶copyåˆ°ç›®æ ‡ç›®å½•ä¸­ã€‚ ä¾èµ–å‚æ•°è®¾ç½®ï¼šåœ¨Podså·¥ç¨‹ä¸­çš„çš„æ¯ä¸ªåº“æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªç›¸åº”çš„SDKName.xcconfigï¼Œåœ¨ç¼–è¯‘æ—¶ï¼ŒCocoaPodså°±æ˜¯é€šè¿‡è¿™äº›æ–‡ä»¶æ¥è®¾ç½®æ‰€æœ‰çš„ä¾èµ–å‚æ•°çš„ï¼Œç¼–è¯‘åï¼Œåœ¨ä¸»å·¥ç¨‹çš„Podsæ–‡ä»¶å¤¹ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼ŒPods-ProjectName.debug.xcconfigã€Pods-ProjectName.release.xcconfigã€‚ ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ï¼š 1. installå’Œupdateå‘½ä»¤çš„é…ç½®é€Ÿåº¦é—®é¢˜åœ¨æˆ‘ä»¬è¾“å…¥pod installæˆ–è€…pod updateä¹‹åï¼ŒCocoaPodsé¦–å…ˆä¼šå»åŒ¹é…æœ¬åœ°çš„specåº“ï¼Œåœ¨ç¡®è®¤specç‰ˆæœ¬åº“ä¸éœ€è¦æ›´æ–°ä¹‹åï¼Œæ‰ä¼šä¸‹è½½ç›¸åº”çš„åº“æ–‡ä»¶ï¼Œè¿™æ ·æ¯”è¾ƒè€—æ—¶ï¼Œæœ‰æ—¶å€™ï¼Œä»¥ä¸ºæ˜¯å¡æ­»äº†å‘¢ã€‚æ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ï¼Œè·³è¿‡specç‰ˆæœ¬åº“æ›´æ–°åŒ¹é…ã€‚ pod update --verbose --no-repo-update pod install --verbose --no-repo-update æœ‰æœ‹å‹è¯´ä¸åŠ --verboseï¼Œå…¶å®åŠ --verboseçš„æ„ä¹‰åœ¨äºå¯ä»¥è¾“å‡ºæ›´è¯¦ç»†çš„é…ç½®è¿‡ç¨‹ä¿¡æ¯ï¼Œåœ¨ä¹¦å†™æ—¶ä½ç½®ä¹Ÿå¯ä»¥æ¢ï¼Œè·³è¿‡specç‰ˆæœ¬åº“æ›´æ–°åŒ¹é…çš„é‡ç‚¹æ˜¯â€“no-repo-updateï¼Œæ¯”å¦‚ï¼š pod install --no-repo-update --verbose // ä¸æ›´æ–°ï¼Œå¹¶æ‰“å°å‡ºè¯¦ç»†è¿‡ç¨‹ä¿¡æ¯ 2. The dependency **** is not used in any concrete target.[!] The dependency UMengAnalytics-NO-IDFA is not used in any concrete target.è¿™ä¸ªæç¤ºæ˜¯å› ä¸ºï¼Œcocoapodså‡çº§ä¸º1.0ä»¥åï¼ŒPodfileæ–‡ä»¶ä¹¦å†™æ ¼å¼çš„é—®é¢˜ï¼Œ1.0ä¹‹å‰ï¼š platform :ios pod &apos;UMengAnalytics-NO-IDFAâ€™ pod &apos;MBProgressHUD&apos;, &apos;~&gt; 0.9.2&apos; pod &apos;FMDB&apos; pod &apos;SDWebImage&apos;, &apos;~&gt; 3.7.3&apos; pod &apos;IQKeyboardManager&apos;, &apos;~&gt; 3.2.4&apos; pod &apos;MJRefresh&apos;, &apos;~&gt; 2.3.2&apos; pod &apos;MJExtension&apos;, &apos;~&gt; 0.2.0&apos; 1.0ä¹‹åï¼š platform :ios,â€™7.0â€™ target â€˜ProjectNameâ€™ do #ProjectNameå·¥ç¨‹åå­— pod &apos;MBProgressHUD&apos;, &apos;~&gt; 0.9.2&apos; pod &apos;FMDB&apos; pod &apos;SDWebImage&apos;, &apos;~&gt; 3.7.3&apos; pod &apos;IQKeyboardManager&apos;, &apos;~&gt; 3.2.4&apos; pod &apos;MJRefresh&apos;, &apos;~&gt; 2.3.2&apos; pod &apos;MJExtension&apos;, &apos;~&gt; 0.2.0&apos; pod &apos;UMengAnalytics-NO-IDFAâ€™ end 3. Unable to satisfy the following requirements: - SDWebImage (~&gt; 3.8) required by Podfile[!] Unable to satisfy the following requirements: - SDWebImage (~&gt; 3.8) required by Podfileæ˜¯å› ä¸ºPodfileæ–‡ä»¶ä¸­å†™çš„ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œä¸€èˆ¬æ˜¯è¿‡å¤§ã€‚ 4. ä½¿ç”¨CocoaPodsä¹‹åï¼Œå¤´æ–‡ä»¶æ— æ³•è‡ªåŠ¨è¡¥é½é—®é¢˜ä½¿ç”¨CocoaPodsæ¥ç®¡ç†ä¸‰æ–¹åº“ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œä½†æ˜¯çªç„¶å‘ç°ä¸€ä¸ªç¾ä¸­ä¸è¶³çš„å°é—®é¢˜ï¼Œåœ¨ä½¿ç”¨importå¼•å…¥æ–‡ä»¶æ—¶ï¼Œä¸èƒ½è‡ªåŠ¨è¡¥é½ï¼Œéœ€è¦æ‰‹å·¥copyæ–‡ä»¶åï¼Œçº ç»“äº†åŠå¤©ï¼šè§£å†³åŠæ³•ï¼šTarget -&gt; Build Settings ï¼ŒUser Header Search Pathsæ¡ç›®ä¸­ï¼Œæ·»åŠ ${SRCROOT}æˆ–è€…$(PODS_ROOT)ï¼Œå¹¶ä¸”é€‰æ‹©Recursiveï¼Œé€’å½’æœç´¢ï¼Œç„¶åå°±å¯ä»¥è‡ªåŠ¨è¡¥é½äº†ã€‚ 5. åœ¨é¡¹ç›®ä¸­ç§»é™¤CocoaPodsä¸‰æ–¹åº“é…ç½®æ–‡ä»¶å¦‚æœæˆ‘ä»¬åœ¨é…ç½®CocoaPodsçš„ä¸‰æ–¹åº“æ–‡ä»¶åï¼Œä¸åœ¨éœ€è¦äº†å¯ä»¥ç§»é™¤æŒ‡å®šåº“æ–‡ä»¶é…ç½®ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š åˆ é™¤å·¥ç¨‹æ–‡ä»¶å¤¹ä¸‹çš„Podfileã€Podfile.lockå’ŒPodsæ–‡ä»¶å¤¹ï¼› åˆ é™¤xcworkspaceæ–‡ä»¶ï¼› æ‰“å¼€xcodeprojæ–‡ä»¶ï¼Œåˆ é™¤é¡¹ç›®ä¸­çš„libpods.aå’ŒPods.xcconfigå¼•ç”¨ï¼› æ‰“å¼€Build Phasesé€‰é¡¹ï¼Œåˆ é™¤Check Pods Manifest.lockå’ŒCopy Pods Resourcesï¼› é‡æ–°pod install]]></content>
      <categories>
        <category>iOSé¡¹ç›®é›†æˆ</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>CocoaPods</tag>
        <tag>Git</tag>
      </tags>
  </entry>
</search>